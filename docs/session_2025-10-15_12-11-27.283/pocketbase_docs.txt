POCKETBASE DOCUMENTATION
==================================================

Generated on: 2025-10-15 12:11:27

[1] Introduction
URL: https://pocketbase.io/docs/
Category: general
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Introduction

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

Please keep in mind that PocketBase is still under active development and full backward
compatibility is not guaranteed before reaching v1.0.0. PocketBase is NOT recommended for
production critical applications yet, unless you are fine with reading the
<a href="https://github.com/pocketbase/pocketbase/blob/master/CHANGELOG.md" class="txt-bold" target="_blank" rel="noopener noreferrer">changelog</a>
and applying some manual migration steps from time to time.
PocketBase is an open source backend consisting of embedded database (SQLite) with realtime subscriptions,
builtin auth management, convenient dashboard UI and simple REST-ish API. It can be used both as Go
framework and as standalone application.
The easiest way to get started is to download the prebuilt minimal PocketBase executable:
See the
<a href="https://github.com/pocketbase/pocketbase/releases" target="_blank" rel="noreferrer noopener">GitHub Releases page</a>
for other platforms and more details.
Once you've extracted the archive, you could start the application by running
<code><strong>./pocketbase serve</strong></code> in the extracted directory.
<strong>And that's it!</strong>
The first time it will generate an installer link that should be automatically opened in the browser to set
up your first superuser account
<small class="txt-hint">(you can also create the first superuser manually via
<code>./pocketbase superuser create EMAIL PASS</code>)
</small>.
The started web server has the following default routes:
The prebuilt PocketBase executable will create and manage 2 new directories alongside the executable:
You could find all available commands and their options by running
<code>./pocketbase --help</code> or
<code>./pocketbase [command] --help</code>
<div class="inline-flex flex-gap-5"><a href="https://github.com/pocketbase/pocketbase/releases/download/v0.30.2/pocketbase_0.30.2_linux_amd64.zip" class="inline-flex flex-gap-5 txt-bold" target="_blank" rel="noreferrer noopener"><i class="ri-qq-fill"></i> <span class="txt">Download v0.30.2 for Linux x64</span></a> <small class="txt-hint">(~12MB zip)</small></div>
<div class="inline-flex flex-gap-5"><a href="https://github.com/pocketbase/pocketbase/releases/download/v0.30.2/pocketbase_0.30.2_windows_amd64.zip" class="inline-flex flex-gap-5 txt-bold" target="_blank" rel="noreferrer noopener"><i class="ri-windows-fill"></i> <span class="txt">Download v0.30.2 for Windows x64</span></a> <small class="txt-hint">(~12MB zip)</small></div>
<div class="inline-flex flex-gap-5"><a href="https://github.com/pocketbase/pocketbase/releases/download/v0.30.2/pocketbase_0.30.2_darwin_amd64.zip" class="inline-flex flex-gap-5 txt-bold" target="_blank" rel="noreferrer noopener"><i class="ri-apple-fill"></i> <span class="txt">Download v0.30.2 for macOS x64</span></a> <small class="txt-hint">(~12MB zip)</small></div>
<div class="inline-flex flex-gap-5"><a href="https://github.com/pocketbase/pocketbase/releases/download/v0.30.2/pocketbase_0.30.2_linux_arm64.zip" class="inline-flex flex-gap-5 txt-bold" target="_blank" rel="noreferrer noopener"><i class="ri-qq-fill"></i> <span class="txt">Download v0.30.2 for Linux ARM64</span></a> <small class="txt-hint">(~11MB zip)</small></div>
<div class="inline-flex flex-gap-5"><a href="https://github.com/pocketbase/pocketbase/releases/download/v0.30.2/pocketbase_0.30.2_windows_arm64.zip" class="inline-flex flex-gap-5 txt-bold" target="_blank" rel="noreferrer noopener"><i class="ri-windows-fill"></i> <span class="txt">Download v0.30.2 for Windows ARM64</span></a> <small class="txt-hint">(~11MB zip)</small></div>
<div class="inline-flex flex-gap-5"><a href="https://github.com/pocketbase/pocketbase/releases/download/v0.30.2/pocketbase_0.30.2_darwin_arm64.zip" class="inline-flex flex-gap-5 txt-bold" target="_blank" rel="noreferrer noopener"><i class="ri-apple-fill"></i> <span class="txt">Download v0.30.2 for macOS ARM64</span></a> <small class="txt-hint">(~11MB zip)</small></div>
<a href="http://127.0.0.1:8090" target="_blank"><code>http://127.0.0.1:8090</code></a>
- if <code>pb_public</code> directory exists, serves the static content from it (html, css, images,
etc.)
<a href="http://127.0.0.1:8090/_/" target="_blank"><code>http://127.0.0.1:8090/_/</code></a>
- superusers dashboard
<a href="http://127.0.0.1:8090/api/" target="_blank"><code>http://127.0.0.1:8090/api/</code></a>
- REST-ish API
<code>pb_data</code> - stores your application data, uploaded files, etc. (usually should be added in
<code>.gitignore</code>).
<code>pb_migrations</code> - contains JS migration files with your collection changes (can be safely
committed in your repository).
<br> <div class="txt-hint m-b-xs">You can even write custom migration scripts. For more info check the
<a href="/docs/js-migrations">JS migrations docs</a>.</div>
How to use PocketBase
API rules and filters
Files upload and handling
Working with relations
Collection operations
Collection operations
Sending HTTP requests
Please keep in mind that PocketBase is still under active development and full backward
compatibility is not guaranteed before reaching v1.0.0. PocketBase is NOT recommended for
production critical applications yet, unless you are fine with reading the
and applying some manual migration steps from time to time.
The easiest way to get started is to download the prebuilt minimal PocketBase executable:
Download v0.30.2 for Linux x64
Download v0.30.2 for Windows x64
Download v0.30.2 for macOS x64
Download v0.30.2 for Linux ARM64
Download v0.30.2 for Windows ARM64
Download v0.30.2 for macOS ARM64
for other platforms and more details.
Once you've extracted the archive, you could start the application by running
in the extracted directory.
The first time it will generate an installer link that should be automatically opened in the browser to set
up your first superuser account
(you can also create the first superuser manually via
./pocketbase superuser create EMAIL PASS
The started web server has the following default routes:
http://127.0.0.1:8090
directory exists, serves the static content from it (html, css, images,
etc.)
http://127.0.0.1:8090/_/
- superusers dashboard
http://127.0.0.1:8090/api/
The prebuilt PocketBase executable will create and manage 2 new directories alongside the executable:
- stores your application data, uploaded files, etc. (usually should be added in
- contains JS migration files with your collection changes (can be safely
committed in your repository).
You could find all available commands and their options by running
./pocketbase [command] --help
Next: How to use PocketBase


--------------------------------------------------------------------------------

[2] How to use PocketBase
URL: https://pocketbase.io/docs/how-to-use/
Category: general
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# How to use PocketBase

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

The easiest way to use PocketBase is by interacting with its Web APIs directly from the client-side (e.g.
mobile app or browser SPA).
It was designed with this exact use case in mind and it is also the reason why there are general purpose
JSON APIs for listing, pagination, sorting, filtering, etc.
The access and filter controls for your data are usually done through the
<a href="/docs/api-rules-and-filters/">collection API rules</a>
For the cases when you need more specialized handling (sending emails, intercepting the default actions,
creating new routes, etc.) you can
<a href="/docs/use-as-framework/">extend PocketBase with Go or JavaScript</a>
For interacting with the
<a href="/docs/api-records/">Web APIs</a>
you can make use of the official SDK clients:
When used on the client-side, it is safe to have a single/global SDK instance for the entire lifecycle of
your application.
Not everyone will agree with this, but if you are building a web app with PocketBase I recommend
developing the frontend as a <strong>traditional client-side SPA</strong> and for the cases where additional
server-side handling is needed (e.g. for payment webhooks, extra data server validations, etc.) you
could try to:
Create one-off Node.js/Bun/Deno/etc. server-side actions that will interact with
PocketBase only as superuser and as pure data store (similar to traditional database
interactions but over HTTP). In this case it is safe to have a global superuser client
such as:
Then you can directly import the file in your server-side actions and use the client as
usual:
Using PocketBase with meta framework such as SvelteKit, Nuxt, Next.js, etc.
<strong>in a JS SSR mode</strong>
is possible but it comes with many complications and you need to carefully evaluate whether the cost
of having another backend (PocketBase) alongside your existing one (the Node.js server) is worth it.
You can read more about the potential problems in
<a href="https://github.com/pocketbase/pocketbase/discussions/5313" target="_blank" rel="noopener noreferrer">JS SSR - issues and recommendations #5313</a> but some of the common pitfalls are:
This doesn't mean that using PocketBase with JS SSR is always a "bad thing" but based on the
dozens reported issues so far I would recommend it only after careful evaluation and only to more
experienced developers that have in-depth understanding of the used tools and their trade-offs. If
you still want to use PocketBase to handle regular users authentication with a JS SSR meta
framework, then you can find some JS SDK examples in the repo's
<a href="https://github.com/pocketbase/js-sdk#ssr-integration" target="_blank" rel="noopener noreferrer">JS SSR integration section
</a>.
htmx, Hotwire/Turbo, Unpoly and other similar tools are commonly used for building server rendered
applications but unfortunately they don't play well with the JSON APIs and fully stateless nature
of PocketBase.
It is possible to use them with PocketBase but at the moment I don't recommend it because we lack
the necessary helpers and utilities for building SSR-first applications, which means that you
might have to create from scratch a lot of things on your own such as middlewares for handling
cookies (<em>and eventually also taking care of CORS and CSRF</em>) or custom authentication
endpoints and access controls (<em>the collection API rules apply only for the builtin JSON routes</em>).
In the future we could eventually provide official SSR support in terms of guides and middlewares
for this use case but again - PocketBase wasn't designed with this in mind and you may want to
reevaluate the tech stack of your application and switch to a traditional client-side SPA as
mentioned earlier or use a different backend solution that might fit better with your use case.
When building mobile apps with the JavaScript SDK or Dart SDK you'll have to specify a custom
persistence store if you want to preserve the authentication between the various app activities
and open/close state.
The SDKs come with a helper async storage implementation that allows you to hook any custom
persistent layer (local file, SharedPreferences, key-value based database, etc.). Here is a
minimal PocketBase SDKs initialization for React Native (JavaScript) and Flutter (Dart):
At the time of writing, React Native on Android and iOS seems to have a non-standard
<code>FormData</code> implementation and for uploading files on these platforms it requires the following
special object syntax:
Or in other words, you may have to apply a conditional handling similar to:
The next couple pages have a little bit more information about the basic PocketBase components like
collections, records, authentication, relations, files handling, etc.
<a href="https://github.com/pocketbase/js-sdk" class="txt-bold" target="_blank" rel="noreferrer noopener">JavaScript SDK</a> <span class="txt">(Browser, Node.js, React Native)</span>
<a href="https://github.com/pocketbase/dart-sdk" class="txt-bold" target="_blank" rel="noreferrer noopener">Dart SDK</a> <span class="txt">(Web, Mobile, Desktop, CLI)</span>
<a href="/docs/use-as-framework">Use PocketBase as Go/JS framework</a> to create new routes or
intercept existing.
<p data-svelte-h="svelte-1ej65vm">Create one-off Node.js/Bun/Deno/etc. server-side actions that will interact with
PocketBase only as superuser and as pure data store (similar to traditional database
interactions but over HTTP). In this case it is safe to have a global superuser client
such as:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// src/superuser.js</span>
<span class="token keyword">import</span> PocketBase <span class="token keyword">from</span> <span class="token string">"pocketbase"</span>
<span class="token keyword">const</span> superuserClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PocketBase</span><span class="token punctuation">(</span><span class="token string">'https://example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// disable autocancellation so that we can handle async requests from multiple users</span>
superuserClient<span class="token punctuation">.</span><span class="token function">autoCancellation</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// option 1: authenticate as superuser using email/password (could be filled with ENV params)</span>
<span class="token keyword">await</span> superuserClient<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'_superusers'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authWithPassword</span><span class="token punctuation">(</span><span class="token constant">SUPERUSER_EMAIL</span><span class="token punctuation">,</span> <span class="token constant">SUPERUSER_PASS</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
<span class="token comment">// This will trigger auto refresh or auto reauthentication in case</span>
<span class="token comment">// the token has expired or is going to expire in the next 30 minutes.</span>
<span class="token literal-property property">autoRefreshThreshold</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">60</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// option 2: OR authenticate as superuser via long-lived "API key"</span>
<span class="token comment">// (see https://pocketbase.io/docs/authentication/#api-keys)</span>
superuserClient<span class="token punctuation">.</span>authStore<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">'YOUR_GENERATED_SUPERUSER_TOKEN'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> superuserClient<span class="token punctuation">;</span><!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-89d0l6">Then you can directly import the file in your server-side actions and use the client as
usual:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">import</span> superuserClient <span class="token keyword">from</span> <span class="token string">'./src/superuser.js'</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">serverAction</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> resp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">...</span> <span class="token keyword">do</span> some extra data validations or handling <span class="token operator">...</span>
<span class="token comment">// send a create request as superuser</span>
<span class="token keyword">await</span> superuserClient<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><!-- HTML_TAG_END --></code> </div>
Security issues caused by incorrectly initialized and shared JS SDK instance in a long-running
server-side context.
OAuth2 integration difficulties related to the server-side only OAuth2 flow (or its mixed
"all-in-one" client-side handling and sharing a cookie with the server-side).
Proxying realtime connections and essentially duplicating the same thing PocketBase already
does.
Performance bottlenecks caused by the default single-threaded Node.js process and the
excessive resources utilization due to the server-side rendering and heavy back-and-forth
requests communication between the different layers (client<->Node.js<->PocketBase).
How to use PocketBase
API rules and filters
Files upload and handling
Working with relations
Collection operations
Collection operations
Sending HTTP requests
Introduction - How to use PocketBase
How to use PocketBase
The easiest way to use PocketBase is by interacting with its Web APIs directly from the client-side (e.g.
mobile app or browser SPA).
It was designed with this exact use case in mind and it is also the reason why there are general purpose
JSON APIs for listing, pagination, sorting, filtering, etc.
The access and filter controls for your data are usually done through the
For the cases when you need more specialized handling (sending emails, intercepting the default actions,
creating new routes, etc.) you can
For interacting with the
you can make use of the official SDK clients:
(Browser, Node.js, React Native)
(Web, Mobile, Desktop, CLI)
When used on the client-side, it is safe to have a single/global SDK instance for the entire lifecycle of
your application.
Web apps recommendation
Not everyone will agree with this, but if you are building a web app with PocketBase I recommend
developing the frontend as a
traditional client-side SPA
and for the cases where additional
server-side handling is needed (e.g. for payment webhooks, extra data server validations, etc.) you
could try to:
Use PocketBase as Go/JS framework
to create new routes or
intercept existing.
Create one-off Node.js/Bun/Deno/etc. server-side actions that will interact with
PocketBase only as superuser and as pure data store (similar to traditional database
interactions but over HTTP). In this case it is safe to have a global superuser client
such as:
'https://example.com'
// disable autocancellation so that we can handle async requests from multiple users
// option 1: authenticate as superuser using email/password (could be filled with ENV params)
// This will trigger auto refresh or auto reauthentication in case
// the token has expired or is going to expire in the next 30 minutes.
// option 2: OR authenticate as superuser via long-lived "API key"
// (see https://pocketbase.io/docs/authentication/#api-keys)
'YOUR_GENERATED_SUPERUSER_TOKEN'
Then you can directly import the file in your server-side actions and use the client as
usual:
some extra data validations or handling
// send a create request as superuser
Using PocketBase with meta framework such as SvelteKit, Nuxt, Next.js, etc.
is possible but it comes with many complications and you need to carefully evaluate whether the cost
of having another backend (PocketBase) alongside your existing one (the Node.js server) is worth it.
You can read more about the potential problems in
JS SSR - issues and recommendations #5313
but some of the common pitfalls are:
Security issues caused by incorrectly initialized and shared JS SDK instance in a long-running
server-side context.
OAuth2 integration difficulties related to the server-side only OAuth2 flow (or its mixed
"all-in-one" client-side handling and sharing a cookie with the server-side).
Proxying realtime connections and essentially duplicating the same thing PocketBase already
does.
Performance bottlenecks caused by the default single-threaded Node.js process and the
excessive resources utilization due to the server-side rendering and heavy back-and-forth
requests communication between the different layers (client<->Node.js<->PocketBase).
This doesn't mean that using PocketBase with JS SSR is always a "bad thing" but based on the
dozens reported issues so far I would recommend it only after careful evaluation and only to more
experienced developers that have in-depth understanding of the used tools and their trade-offs. If
you still want to use PocketBase to handle regular users authentication with a JS SSR meta
framework, then you can find some JS SDK examples in the repo's
JS SSR integration section
Why not htmx, Hotwire/Turbo, Unpoly, etc.
htmx, Hotwire/Turbo, Unpoly and other similar tools are commonly used for building server rendered
applications but unfortunately they don't play well with the JSON APIs and fully stateless nature
of PocketBase.
It is possible to use them with PocketBase but at the moment I don't recommend it because we lack
the necessary helpers and utilities for building SSR-first applications, which means that you
might have to create from scratch a lot of things on your own such as middlewares for handling
cookies (
and eventually also taking care of CORS and CSRF
) or custom authentication
endpoints and access controls (
the collection API rules apply only for the builtin JSON routes
In the future we could eventually provide official SSR support in terms of guides and middlewares
for this use case but again - PocketBase wasn't designed with this in mind and you may want to
reevaluate the tech stack of your application and switch to a traditional client-side SPA as
mentioned earlier or use a different backend solution that might fit better with your use case.
Mobile apps auth persistence
// Node.js and React Native doesn't have native EventSource implementation
// for example: npm install react-native-sse --save
'@react-native-async-storage/async-storage'
// initialize the async store
// initialize the PocketBase client
// (it is OK to have a single/global instance for the duration of your application)
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'package:shared_preferences/shared_preferences.dart'
// for simplicity we are using a simple SharedPreferences instance
// but you can also replace it with its safer EncryptedSharedPreferences alternative
// initialize the async store
// initialize the PocketBase client
// (it is OK to have a single/global instance for the duration of your application)
'http://127.0.0.1:8090'
React Native file upload on Android and iOS
At the time of writing, React Native on Android and iOS seems to have a non-standard
implementation and for uploading files on these platforms it requires the following
special object syntax:
Or in other words, you may have to apply a conditional handling similar to:
// result is the resolved promise of ImagePicker.launchImageLibraryAsync
// regular File/Blob value
// the below object format works only on Android and iOS
// (FormData.set() also doesn't seem to be supported so we use FormData.append())
The next couple pages have a little bit more information about the basic PocketBase components like
collections, records, authentication, relations, files handling, etc.


--------------------------------------------------------------------------------

[3] pb-ext - Enhanced PocketBase Server
URL: https://raw.githubusercontent.com/magooney-loon/pb-ext/main/README.md
Category: general
Description: Enhanced PocketBase server with monitoring, logging & API docs. <img width="3840" height="2160" alt="pb-ext" src="https://github.com/user-attachments/assets/af360704-c3d6-4d1f-9b49-80229d6570d2" /> - ...

Content:
# pb-ext

Enhanced PocketBase server with monitoring, logging & API docs.

<img width="3840" height="2160" alt="pb-ext" src="https://github.com/user-attachments/assets/af360704-c3d6-4d1f-9b49-80229d6570d2" />

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/magooney-loon/pb-ext)

## Core Features

- **API Schema**: Auto-generates OpenAPI docs UI for your endpoints
- **Cron Tracking**: Logs and monitors scheduled cron jobs
- **System Monitoring**: Real-time CPU, memory, disk, network, and runtime metrics
- **Structured Logging**: Complete logging with error tracking and request tracing
- **Visitor Analytics**: Track visitor stats, page views, device types, and browsers
- **PocketBase Integration**: Uses PocketBase's auth system and styling

## Access

- Admin panel:
```bash
127.0.0.1:8090/_
```
- pb-ext dashboard:
```bash
127.0.0.1:8090/_/_
```
## Quick Start

> üÜï New to Golang and/or PocketBase? [Read this beginner tutorial](TUTORIAL.md).

```go
package main

import (
	"flag"
	"log"

	app "github.com/magooney-loon/pb-ext/core"
	"github.com/pocketbase/pocketbase/core"
)

func main() {
	devMode := flag.Bool("dev", false, "Run in developer mode")
	flag.Parse()

	initApp(*devMode)
}

func initApp(devMode bool) {
	var opts []app.Option

	if devMode {
		opts = append(opts, app.InDeveloperMode())
	} else {
		opts = append(opts, app.InNormalMode())
	}

	srv := app.New(opts...)

	app.SetupLogging(srv)

	registerCollections(srv.App())
	registerRoutes(srv.App())
	registerJobs(srv.App())

	srv.App().OnServe().BindFunc(func(e *core.ServeEvent) error {
		app.SetupRecovery(srv.App(), e)
		return e.Next()
	})

	if err := srv.Start(); err != nil {
		srv.App().Logger().Error("Fatal application error",
			"error", err,
			"uptime", srv.Stats().StartTime,
			"total_requests", srv.Stats().TotalRequests.Load(),
			"active_connections", srv.Stats().ActiveConnections.Load(),
			"last_request_time", srv.Stats().LastRequestTime.Load(),
		)
		log.Fatal(err)
	}
}

// Example models in cmd/server/collections.go
// Example routes in cmd/server/routes.go
// Example handlers in cmd/server/handlers.go
// Example cron jobs in cmd/server/jobs.go
//
// You can restructure Your project as You wish,
// just keep this main.go in cmd/server/main.go
//
// Consider using the cmd/scripts commands for
// streamlined fullstack dx with +Svelte5kit+
//
// Ready for a production build deployment?
// https://github.com/magooney-loon/pb-deployer
```

```bash
go mod tidy
go run cmd/scripts/main.go --run-only
```

See `**/*/README.md` for detailed docs.

Having issues with Your API Docs?
```bash
127.0.0.1:8090/api/docs/debug/ast
```

--------------------------------------------------------------------------------

[4] pb-ext - Scripts Documentation
URL: https://raw.githubusercontent.com/magooney-loon/pb-ext/refs/heads/main/cmd/scripts/README.md
Category: general

Content:
## [COMMAND SEQUENCES]

### > Standard Development Mode
```
$ go run cmd/scripts/main.go
```
*Builds frontend + starts development server*

### > Full System Installation
```
$ go run cmd/scripts/main.go --install
```
*Downloads dependencies + builds + runs in dev mode*

### > Frontend Compilation Only
```
$ go run cmd/scripts/main.go --build-only
```
*Compiles frontend assets without server daemon*

### > Development Server Only
```
$ go run cmd/scripts/main.go --run-only
```
*Starts server daemon, skips build sequence*

### > Production Deployment Build
```
$ go run cmd/scripts/main.go --production
```
*Creates optimized production binary + assets*

### > Test Suite Execution
```
$ go run cmd/scripts/main.go --test-only
```
*Runs comprehensive test suite with coverage reports*

### > Custom Output Directory
```
$ go run cmd/scripts/main.go --production --dist release
```
*Production build with custom target directory*

### > System Help Terminal
```
$ go run cmd/scripts/main.go --help
```
*Displays all available command flags and options*

## [DEPLOYMENT INTEGRATION]

### Automated VPS Deployment via pb-deployer:
```
$ git clone https://github.com/magooney-loon/pb-deployer
$ cd pb-deployer && go run cmd/scripts/main.go --install
```

### pb-deployer Features:
    [‚úì] Automated server provisioning + security hardening
    [‚úì] Zero-downtime deployment cycles with rollback
    [‚úì] Production systemd service management
    [‚úì] Full PocketBase v0.20+ compatibility

## [SYSTEM REQUIREMENTS]

    [REQUIRED]
    ‚îú‚îÄ‚îÄ Go 1.19+        (backend compilation)
    ‚îú‚îÄ‚îÄ Node.js 16+     (frontend build system)
    ‚îú‚îÄ‚îÄ npm 8+          (dependency management)
    ‚îî‚îÄ‚îÄ Git             (version control)

    [OPTIONAL]
    ‚îî‚îÄ‚îÄ pb-deployer     (production deployment automation)

## [BUILD PROCESS]

    [DEVELOPMENT MODE]
    1. System validation    ‚Üí Check Go/Node/npm availability
    2. Dependency install   ‚Üí npm install + go mod tidy
    3. Frontend build       ‚Üí npm run build
    4. Asset deployment     ‚Üí Copy to pb_public/
    5. Server startup       ‚Üí go run ./cmd/server --dev serve

    [PRODUCTION MODE]
    1. Environment prep     ‚Üí Clean dist/ directory
    2. Dependency install   ‚Üí Full dependency resolution
    3. Frontend build       ‚Üí Optimized production build
    4. Server compilation   ‚Üí go build -ldflags="-s -w"
    5. Asset packaging      ‚Üí Create deployment archive
    6. Metadata generation  ‚Üí Build info + package metadata

    [TEST MODE]
    1. System validation    ‚Üí Verify test environment
    2. Test execution       ‚Üí Run all test suites
    3. Coverage analysis    ‚Üí Generate coverage reports
    4. Report generation    ‚Üí HTML/JSON/TXT outputs

## [TROUBLESHOOTING]

    [ERROR: Command not found]
    ‚Üí Ensure Go/Node/npm are installed and in system PATH

    [ERROR: Frontend build failed]
    ‚Üí Check package.json and run 'npm install' manually
    ‚Üí Verify frontend/ directory exists with valid source

    [ERROR: Server compilation failed]
    ‚Üí Run 'go mod tidy' to resolve dependencies
    ‚Üí Check cmd/server/main.go exists

    [ERROR: Permission denied]
    ‚Üí Ensure write permissions for pb_public/ and dist/

--------------------------------------------------------------------------------

[5] pb-ext - Collections Implementation
URL: https://raw.githubusercontent.com/magooney-loon/pb-ext/refs/heads/main/cmd/server/collections.go
Category: hooks
Description: Collection example

Content:
```go
package main

// Collection example

import (
	"github.com/pocketbase/pocketbase/core"
)

// registerCollections sets up all database collections for the application
func registerCollections(app core.App) {
	app.OnServe().BindFunc(func(e *core.ServeEvent) error {
		if err := todoCollection(e.App); err != nil {
			app.Logger().Error("Failed to create todo collection", "error", err)
		}

		return e.Next()
	})
}

// todoCollection creates a todos collection for CRUD demo
func todoCollection(app core.App) error {
	// Check if todos collection already exists
	existingCollection, _ := app.FindCollectionByNameOrId("todos")
	if existingCollection != nil {
		app.Logger().Info("Todos collection already exists")
		return nil
	}

	// Create new todos collection
	collection := core.NewBaseCollection("todos")

	// Find users collection for optional relation (v2 auth)
	usersCollection, err := app.FindCollectionByNameOrId("users")
	if err != nil {
		return err
	}

	// Add optional user relation
	collection.Fields.Add(&core.RelationField{
		Name:          "user",
		Required:      false, // Optional - v1 routes won't use this
		CollectionId:  usersCollection.Id,
		CascadeDelete: true,
	})

	// Add title field (required)
	collection.Fields.Add(&core.TextField{
		Name:     "title",
		Required: true,
		Max:      200,
	})

	// Add description field (optional)
	collection.Fields.Add(&core.TextField{
		Name:     "description",
		Required: false,
		Max:      1000,
	})

	// Add completed field (boolean, default false)
	collection.Fields.Add(&core.BoolField{
		Name: "completed",
	})

	// Add priority field (select)
	collection.Fields.Add(&core.SelectField{
		Name:   "priority",
		Values: []string{"low", "medium", "high"},
	})

	// Add auto-date fields
	collection.Fields.Add(&core.AutodateField{
		Name:     "created",
		OnCreate: true,
	})

	collection.Fields.Add(&core.AutodateField{
		Name:     "updated",
		OnCreate: true,
		OnUpdate: true,
	})

	// Set collection rules - public access for v1
	collection.ViewRule = nil   // Public read
	collection.CreateRule = nil // Public create
	collection.UpdateRule = nil // Public update
	collection.DeleteRule = nil // Public delete

	// Add indexes
	collection.AddIndex("idx_todos_user", false, "user", "")
	collection.AddIndex("idx_todos_completed", false, "completed", "")

	// Save the collection
	if err := app.Save(collection); err != nil {
		app.Logger().Error("Failed to create todos collection", "error", err)
		return err
	}

	app.Logger().Info("Created todos collection")
	return nil
}

```
--------------------------------------------------------------------------------

[6] pb-ext - Handlers Implementation
URL: https://raw.githubusercontent.com/magooney-loon/pb-ext/refs/heads/main/cmd/server/handlers.go
Category: hooks
Description: API_SOURCE

Content:
```go
package main

// API_SOURCE

import (
	"encoding/json"
	"net/http"
	"strconv"
	"time"

	"github.com/pocketbase/pocketbase/core"
)

// Request types
type TodoRequest struct {
	Title       string `json:"title"`
	Description string `json:"description,omitempty"`
	Priority    string `json:"priority,omitempty"` // low, medium, high
	Completed   bool   `json:"completed"`
}

type TodoPatchRequest struct {
	Title       *string `json:"title,omitempty"`
	Description *string `json:"description,omitempty"`
	Priority    *string `json:"priority,omitempty"`
	Completed   *bool   `json:"completed,omitempty"`
}

// API_DESC Get current server time in multiple formats
// API_TAGS public,utility,time
func timeHandler(c *core.RequestEvent) error {
	now := time.Now()
	return c.JSON(http.StatusOK, map[string]any{
		"time": map[string]string{
			"iso":       now.Format(time.RFC3339),
			"unix":      strconv.FormatInt(now.Unix(), 10),
			"unix_nano": strconv.FormatInt(now.UnixNano(), 10),
			"utc":       now.UTC().Format(time.RFC3339),
		},
		"server":  "pb-ext",
		"version": "1.0.0",
	})
}

// API_DESC Create a new todo item
// API_TAGS todos,create
func createTodoHandler(c *core.RequestEvent) error {
	// Check authentication - required for creation
	if c.Auth == nil {
		return c.JSON(http.StatusUnauthorized, map[string]any{"error": "Authentication required"})
	}

	var req TodoRequest
	if err := json.NewDecoder(c.Request.Body).Decode(&req); err != nil {
		return c.JSON(http.StatusBadRequest, map[string]any{"error": "Invalid JSON payload"})
	}

	if req.Title == "" {
		return c.JSON(http.StatusBadRequest, map[string]any{"error": "Title is required"})
	}

	// Validate priority if provided
	if req.Priority != "" && req.Priority != "low" && req.Priority != "medium" && req.Priority != "high" {
		return c.JSON(http.StatusBadRequest, map[string]any{"error": "Priority must be 'low', 'medium', or 'high'"})
	}

	// Default priority to medium if not provided
	if req.Priority == "" {
		req.Priority = "medium"
	}

	// Create todo record data
	todoData := map[string]any{
		"title":       req.Title,
		"description": req.Description,
		"priority":    req.Priority,
		"completed":   req.Completed,
	}

	// Only set user field if authenticated user is from users collection
	// Superusers/admins don't have records in users collection
	if c.Auth.Collection().Name == "users" {
		todoData["user"] = c.Auth.Id
	}
	// If authenticated as superuser, leave user field empty or handle differently

	// Create record in todos collection
	collection, err := c.App.FindCollectionByNameOrId("todos")
	if err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Collection not found"})
	}

	record := core.NewRecord(collection)
	record.Load(todoData)

	if err := c.App.Save(record); err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Failed to create todo"})
	}

	return c.JSON(http.StatusCreated, map[string]any{
		"message": "Todo created successfully! ‚úÖ",
		"todo": map[string]any{
			"id":          record.Id,
			"title":       record.GetString("title"),
			"description": record.GetString("description"),
			"priority":    record.GetString("priority"),
			"completed":   record.GetBool("completed"),
			"created_at":  record.GetDateTime("created"),
			"user_id":     record.GetString("user"),
			"created_by":  c.Auth.Collection().Name, // Show if created by user or admin
		},
	})
}

// API_DESC Get all todos with optional filtering
// API_TAGS todos,list,read
func getTodosHandler(c *core.RequestEvent) error {
	collection, err := c.App.FindCollectionByNameOrId("todos")
	if err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Collection not found"})
	}

	// Build query with optional filters
	filter := ""
	filterParams := make(map[string]any)

	// Filter by completion status if provided
	if completed := c.Request.URL.Query().Get("completed"); completed != "" {
		if completed == "true" || completed == "1" {
			filter = "completed = true"
		} else if completed == "false" || completed == "0" {
			filter = "completed = false"
		}
	}

	// Filter by priority if provided
	if priority := c.Request.URL.Query().Get("priority"); priority != "" {
		if filter != "" {
			filter += " && "
		}
		filter += "priority = {:priority}"
		filterParams["priority"] = priority
	}

	// For authenticated requests, filter by user (only if user is from users collection)
	if c.Auth != nil && c.Auth.Collection().Name == "users" {
		if filter != "" {
			filter += " && "
		}
		filter += "user = {:userId}"
		filterParams["userId"] = c.Auth.Id
	}

	records, err := c.App.FindRecordsByFilter(collection, filter, "-created", 100, 0, filterParams)
	if err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Failed to fetch todos"})
	}

	todos := make([]map[string]any, len(records))
	for i, record := range records {
		todos[i] = map[string]any{
			"id":          record.Id,
			"title":       record.GetString("title"),
			"description": record.GetString("description"),
			"priority":    record.GetString("priority"),
			"completed":   record.GetBool("completed"),
			"created_at":  record.GetDateTime("created"),
			"updated_at":  record.GetDateTime("updated"),
		}

		// Include user info if available
		if userId := record.GetString("user"); userId != "" {
			todos[i]["user_id"] = userId
		}
	}

	return c.JSON(http.StatusOK, map[string]any{
		"message": "Todos retrieved successfully üìã",
		"todos":   todos,
		"count":   len(todos),
		"filters": map[string]any{
			"completed": c.Request.URL.Query().Get("completed"),
			"priority":  c.Request.URL.Query().Get("priority"),
		},
	})
}

// API_DESC Get a specific todo by ID
// API_TAGS todos,read,single
func getTodoHandler(c *core.RequestEvent) error {
	todoID := c.Request.PathValue("id")

	collection, err := c.App.FindCollectionByNameOrId("todos")
	if err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Collection not found"})
	}

	record, err := c.App.FindRecordById(collection, todoID)
	if err != nil {
		return c.JSON(http.StatusNotFound, map[string]any{"error": "Todo not found"})
	}

	// For authenticated requests, check ownership (only enforce for regular users)
	if c.Auth != nil && c.Auth.Collection().Name == "users" {
		if userID := record.GetString("user"); userID != "" && userID != c.Auth.Id {
			return c.JSON(http.StatusForbidden, map[string]any{"error": "Access denied"})
		}
	}

	return c.JSON(http.StatusOK, map[string]any{
		"message": "Todo retrieved successfully üìñ",
		"todo": map[string]any{
			"id":          record.Id,
			"title":       record.GetString("title"),
			"description": record.GetString("description"),
			"priority":    record.GetString("priority"),
			"completed":   record.GetBool("completed"),
			"created_at":  record.GetDateTime("created"),
			"updated_at":  record.GetDateTime("updated"),
			"user_id":     record.GetString("user"),
		},
	})
}

// API_DESC Update a todo item (partial update)
// API_TAGS todos,update,patch
func updateTodoHandler(c *core.RequestEvent) error {
	// Check authentication - required for updates
	if c.Auth == nil {
		return c.JSON(http.StatusUnauthorized, map[string]any{"error": "Authentication required"})
	}

	todoID := c.Request.PathValue("id")

	collection, err := c.App.FindCollectionByNameOrId("todos")
	if err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Collection not found"})
	}

	record, err := c.App.FindRecordById(collection, todoID)
	if err != nil {
		return c.JSON(http.StatusNotFound, map[string]any{"error": "Todo not found"})
	}

	// Check ownership - regular users can only update their own todos, superusers can update any
	if c.Auth.Collection().Name == "users" {
		if userID := record.GetString("user"); userID != c.Auth.Id {
			return c.JSON(http.StatusForbidden, map[string]any{"error": "Access denied - you can only update your own todos"})
		}
	}

	var req TodoPatchRequest
	if err := json.NewDecoder(c.Request.Body).Decode(&req); err != nil {
		return c.JSON(http.StatusBadRequest, map[string]any{"error": "Invalid JSON payload"})
	}

	// Apply updates
	updates := make(map[string]any)
	if req.Title != nil {
		if *req.Title == "" {
			return c.JSON(http.StatusBadRequest, map[string]any{"error": "Title cannot be empty"})
		}
		record.Set("title", *req.Title)
		updates["title"] = *req.Title
	}
	if req.Description != nil {
		record.Set("description", *req.Description)
		updates["description"] = *req.Description
	}
	if req.Priority != nil {
		if *req.Priority != "low" && *req.Priority != "medium" && *req.Priority != "high" {
			return c.JSON(http.StatusBadRequest, map[string]any{"error": "Priority must be 'low', 'medium', or 'high'"})
		}
		record.Set("priority", *req.Priority)
		updates["priority"] = *req.Priority
	}
	if req.Completed != nil {
		record.Set("completed", *req.Completed)
		updates["completed"] = *req.Completed
	}

	if err := c.App.Save(record); err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Failed to update todo"})
	}

	return c.JSON(http.StatusOK, map[string]any{
		"message": "Todo updated successfully! ‚úèÔ∏è",
		"todo": map[string]any{
			"id":          record.Id,
			"title":       record.GetString("title"),
			"description": record.GetString("description"),
			"priority":    record.GetString("priority"),
			"completed":   record.GetBool("completed"),
			"updated_at":  record.GetDateTime("updated"),
		},
		"updates": updates,
	})
}

// API_DESC Delete a todo item
// API_TAGS todos,delete
func deleteTodoHandler(c *core.RequestEvent) error {
	// Check authentication - required for deletion
	if c.Auth == nil {
		return c.JSON(http.StatusUnauthorized, map[string]any{"error": "Authentication required"})
	}

	todoID := c.Request.PathValue("id")

	collection, err := c.App.FindCollectionByNameOrId("todos")
	if err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Collection not found"})
	}

	record, err := c.App.FindRecordById(collection, todoID)
	if err != nil {
		return c.JSON(http.StatusNotFound, map[string]any{"error": "Todo not found"})
	}

	// Check ownership - regular users can only delete their own todos, superusers can delete any
	if c.Auth.Collection().Name == "users" {
		if userID := record.GetString("user"); userID != c.Auth.Id {
			return c.JSON(http.StatusForbidden, map[string]any{"error": "Access denied - you can only delete your own todos"})
		}
	}

	if err := c.App.Delete(record); err != nil {
		return c.JSON(http.StatusInternalServerError, map[string]any{"error": "Failed to delete todo"})
	}

	return c.JSON(http.StatusOK, map[string]any{
		"message": "Todo deleted successfully! üóëÔ∏è",
		"deleted_todo": map[string]any{
			"id":    todoID,
			"title": record.GetString("title"),
		},
		"deleted_at": time.Now().Format(time.RFC3339),
	})
}

```
--------------------------------------------------------------------------------

[7] pb-ext - Jobs Implementation
URL: https://raw.githubusercontent.com/magooney-loon/pb-ext/refs/heads/main/cmd/server/jobs.go
Category: hooks

Content:
```go
package main

import (
	"fmt"
	"time"

	"github.com/magooney-loon/pb-ext/core/server"
	"github.com/pocketbase/pocketbase/core"
)

func registerJobs(app core.App) {
	app.OnServe().BindFunc(func(e *core.ServeEvent) error {

		// Register example cron jobs
		if err := helloJob(app); err != nil {
			app.Logger().Error("Failed to register hello job", "error", err)
			return err
		}

		if err := dailyCleanupJob(app); err != nil {
			app.Logger().Error("Failed to register daily cleanup job", "error", err)
			return err
		}

		if err := weeklyStatsJob(app); err != nil {
			app.Logger().Error("Failed to register weekly stats job", "error", err)
			return err
		}

		app.Logger().Info("All cron jobs registered successfully")
		return e.Next()
	})
}

func helloJob(app core.App) error {
	jobManager := server.GetJobManager()
	if jobManager == nil {
		return fmt.Errorf("job manager not initialized")
	}
	return jobManager.RegisterJob("helloWorld", "Hello World Job",
		"A simple demonstration job that runs every 5 minutes, outputs timestamped hello messages and simulates basic task processing",
		"*/5 * * * *", func(jobLogger *server.JobExecutionLogger) {
			jobLogger.Start("Hello World Job")
			jobLogger.Info("Current time: %s", time.Now().Format("2006-01-02 15:04:05"))
			jobLogger.Progress("Processing hello world task...")

			// Simulate some work
			time.Sleep(100 * time.Millisecond)

			jobLogger.Success("Hello from cron job! Task completed successfully.")
			jobLogger.Complete(fmt.Sprintf("Job finished at: %s", time.Now().Format("2006-01-02 15:04:05")))
		})
}

func dailyCleanupJob(app core.App) error {
	jobManager := server.GetJobManager()
	if jobManager == nil {
		return fmt.Errorf("job manager not initialized")
	}
	return jobManager.RegisterJob("dailyCleanup", "Daily Cleanup Job",
		"Automated maintenance job that runs daily at 2 AM to clean up completed todos older than 30 days, helping keep the database optimized",
		"0 2 * * *", func(jobLogger *server.JobExecutionLogger) {
			jobLogger.Start("Daily Cleanup Job")
			jobLogger.Info("Cleanup job started at: %s", time.Now().Format("2006-01-02 15:04:05"))

			app.Logger().Info("Running daily cleanup job", "time", time.Now())

			// Example: Clean up old todos older than 30 days
			collection, err := app.FindCollectionByNameOrId("todos")
			if err != nil {
				jobLogger.Error("Failed to find todos collection: %v", err)
				app.Logger().Error("Failed to find todos collection", "error", err)
				jobLogger.Fail(err)
				return
			}

			jobLogger.Success("Found todos collection, proceeding with cleanup...")

			// Delete completed todos older than 30 days
			cutoffDate := time.Now().AddDate(0, 0, -30)
			jobLogger.Info("Cleaning up todos older than: %s", cutoffDate.Format("2006-01-02"))

			filter := "completed = true && created < {:cutoff}"
			records, err := app.FindRecordsByFilter(collection, filter, "", 100, 0, map[string]any{
				"cutoff": cutoffDate.Format("2006-01-02 15:04:05.000Z"),
			})

			if err != nil {
				jobLogger.Error("Failed to find old todos: %v", err)
				app.Logger().Error("Failed to find old todos", "error", err)
				jobLogger.Fail(err)
				return
			}

			jobLogger.Info("Found %d old completed todos to clean up", len(records))

			deletedCount := 0
			for _, record := range records {
				if err := app.Delete(record); err != nil {
					jobLogger.Error("Failed to delete todo %s: %v", record.Id, err)
					app.Logger().Error("Failed to delete old todo", "id", record.Id, "error", err)
				} else {
					deletedCount++
				}
			}

			jobLogger.Statistics(map[string]interface{}{
				"total_found": len(records),
				"deleted":     deletedCount,
				"failed":      len(records) - deletedCount,
			})

			jobLogger.Complete(fmt.Sprintf("Deleted %d/%d records", deletedCount, len(records)))
			app.Logger().Info("Daily cleanup completed", "deleted_records", deletedCount)
		})
}

func weeklyStatsJob(app core.App) error {
	jobManager := server.GetJobManager()
	if jobManager == nil {
		return fmt.Errorf("job manager not initialized")
	}
	return jobManager.RegisterJob("weeklyStats", "Weekly Statistics Job",
		"Weekly analytics job that runs every Sunday at midnight to generate comprehensive todo statistics including completion rates and productivity metrics",
		"0 0 * * 0", func(jobLogger *server.JobExecutionLogger) {
			jobLogger.Start("Weekly Statistics Job")
			jobLogger.Info("Generating weekly report for week ending: %s", time.Now().Format("2006-01-02"))

			app.Logger().Info("Generating weekly statistics", "time", time.Now())

			// Example: Generate weekly todo statistics
			collection, err := app.FindCollectionByNameOrId("todos")
			if err != nil {
				jobLogger.Error("Failed to find todos collection: %v", err)
				app.Logger().Error("Failed to find todos collection", "error", err)
				jobLogger.Fail(err)
				return
			}

			jobLogger.Success("Found todos collection, analyzing data...")

			// Count todos from the past week
			weekAgo := time.Now().AddDate(0, 0, -7)
			jobLogger.Info("Analyzing todos created since: %s", weekAgo.Format("2006-01-02"))

			filter := "created >= {:week_ago}"
			records, err := app.FindRecordsByFilter(collection, filter, "", 1000, 0, map[string]any{
				"week_ago": weekAgo.Format("2006-01-02 15:04:05.000Z"),
			})

			if err != nil {
				jobLogger.Error("Failed to fetch weekly todos: %v", err)
				app.Logger().Error("Failed to fetch weekly todos", "error", err)
				jobLogger.Fail(err)
				return
			}

			jobLogger.Progress("Processing %d todos from the past week...", len(records))

			completed := 0
			pending := 0
			for _, record := range records {
				if record.GetBool("completed") {
					completed++
				} else {
					pending++
				}
			}

			completionRate := float64(0)
			if len(records) > 0 {
				completionRate = float64(completed) / float64(len(records)) * 100
			}

			// Log statistics using the structured method
			stats := map[string]interface{}{
				"Total todos created": len(records),
				"Completed todos":     completed,
				"Pending todos":       pending,
				"Completion rate":     fmt.Sprintf("%.1f%%", completionRate),
			}

			jobLogger.Info("WEEKLY STATISTICS REPORT")
			jobLogger.Statistics(stats)
			jobLogger.Complete("Weekly statistics report generated successfully")

			app.Logger().Info("Weekly statistics generated",
				"total_todos_created", len(records),
				"completed_todos", completed,
				"pending_todos", pending,
				"completion_rate", completionRate,
			)
		})
}

```
--------------------------------------------------------------------------------

[8] pb-ext - Routes Implementation
URL: https://raw.githubusercontent.com/magooney-loon/pb-ext/refs/heads/main/cmd/server/routes.go
Category: hooks
Description: API_SOURCE

Content:
```go
package main

// API_SOURCE

import (
	"github.com/magooney-loon/pb-ext/core/server/api"

	"github.com/pocketbase/pocketbase/apis"
	"github.com/pocketbase/pocketbase/core"
)

func registerRoutes(app core.App) {
	// Initialize version manager with configs
	versionManager := api.InitializeVersionedSystem(createAPIVersions(), "v1")

	app.OnServe().BindFunc(func(e *core.ServeEvent) error {
		// Get version-specific routers
		v1Router, err := versionManager.GetVersionRouter("v1", e)
		if err != nil {
			return err
		}

		v2Router, err := versionManager.GetVersionRouter("v2", e)
		if err != nil {
			return err
		}

		// Register v1 routes
		registerV1Routes(v1Router)

		// Register v2 routes
		registerV2Routes(v2Router)

		return e.Next()
	})

	// Register version management endpoints
	versionManager.RegisterWithServer(app)
}

// createAPIVersions creates version configurations with reduced duplication
func createAPIVersions() map[string]*api.APIDocsConfig {
	baseConfig := &api.APIDocsConfig{
		Title:       "pb-ext demo api",
		Description: "Hello world",
		BaseURL:     "http://127.0.0.1:8090/",
		Enabled:     true,
	}

	// Create v1 config
	v1Config := *baseConfig
	v1Config.Version = "1.0.0"
	v1Config.Status = "stable"

	// Create v2 config
	v2Config := *baseConfig
	v2Config.Version = "2.0.0"
	v2Config.Status = "testing"

	return map[string]*api.APIDocsConfig{
		"v1": &v1Config,
		"v2": &v2Config,
	}
}

// registerV1Routes registers all v1 API routes
func registerV1Routes(router *api.VersionedAPIRouter) {
	// Option 1: Manual route registration (explicit control)
	prefix := "/api/v1"
	router.GET(prefix+"/todos", getTodosHandler)
	router.POST(prefix+"/todos", createTodoHandler).Bind(apis.RequireAuth())
	router.GET(prefix+"/todos/{id}", getTodoHandler)
	router.PATCH(prefix+"/todos/{id}", updateTodoHandler).Bind(apis.RequireAuth())
	router.DELETE(prefix+"/todos/{id}", deleteTodoHandler).Bind(apis.RequireAuth())

	// Option 2: CRUD convenience method (less boilerplate)
	// Uncomment to use instead of manual registration above:
	//
	// v1 := router.SetPrefix("/api/v1")
	// v1.CRUD("todos", api.CRUDHandlers{
	// 	List:   getTodosHandler,
	// 	Create: createTodoHandler,
	// 	Get:    getTodoHandler,
	// 	Patch:  updateTodoHandler,
	// 	Delete: deleteTodoHandler,
	// }, apis.RequireAuth()) // Auth applied to Create, Update, Patch, Delete
}

// registerV2Routes registers all v2 API routes
func registerV2Routes(router *api.VersionedAPIRouter) {
	// Using prefixed router for cleaner code
	v2 := router.SetPrefix("/api/v2")

	// Utility routes (no auth required)
	v2.GET("/time", timeHandler)

	// Future v2 routes can be added here easily:
	// v2.GET("/status", statusHandler)
	// v2.GET("/health", healthHandler)
}

```
--------------------------------------------------------------------------------

[9] Going to production
URL: https://pocketbase.io/docs/going-to-production/
Category: setup
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Going to production

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#deployment-strategies" class="link-primary"> Deployment strategies </a>
<a href="#backup-and-restore" class="link-primary"> Backup and Restore </a>
<a href="#recommendations" class="link-primary"> Recommendations </a>
<a href="#minimal-setup" class="link-primary"> Minimal setup </a>
<a href="#using-reverse-proxy" class="link-primary"> Using reverse proxy </a>
<a href="#using-docker" class="link-primary"> Using Docker </a>
<a href="#use-smtp-mail-server" class="link-primary"> Use SMTP mail server </a>
<a href="#enable-mfa-for-superusers" class="link-primary"> Enable MFA for superusers </a>
<a href="#enable-rate-limiter" class="link-primary"> Enable rate limiter </a>
<a href="#increase-the-open-file-descriptors-limit" class="link-primary"> Increase the open file descriptors limit </a>
<a href="#set-gomemlimit" class="link-primary"> Set GOMEMLIMIT </a>
<a href="#enable-settings-encryption" class="link-primary"> Enable settings encryption </a>
One of the best PocketBase features is that it's completely portable. This means that it doesn't require
any external dependency and
<strong>could be deployed by just uploading the executable on your server</strong>.
Here is an example of starting a production HTTPS server (auto managed TLS with Let's Encrypt) on a clean
Ubuntu 22.04 installation.
Consider the following app directory structure:
Upload the binary and anything else required by your application to your remote server, for
example using
<strong>rsync</strong>:
Start a SSH session with your server:
Start the executable (specifying a domain name will issue a Let's encrypt certificate for it)
Notice that in the above example we are logged in as <strong>root</strong> which allows us to
bind to the
<strong>privileged 80 and 443 ports</strong>.
<br>
For <strong>non-root</strong> users usually you'll need special privileges to be able to do
that. You have several options depending on your OS - <code>authbind</code>,
<code>setcap</code>,
<code>iptables</code>, <code>sysctl</code>, etc. Here is an example using <code>setcap</code>:
(Optional) Systemd service
You can skip step 3 and create a <strong>Systemd service</strong>
to allow your application to start/restart on its own.
<br>
Here is an example service file (usually created in
<code>/lib/systemd/system/pocketbase.service</code>):
After that we just have to enable it and start the service using <code>systemctl</code>:
You can find a link to the Web UI installer in the <code>/root/pb/std.log</code>, but
alternatively you can also create the first superuser explicitly via the
<code>superuser</code> PocketBase command:
If you plan on hosting multiple applications on a single server or need finer network controls, you can
always put PocketBase behind a reverse proxy such as
<em>NGINX</em>, <em>Apache</em>, <em>Caddy</em>, etc.
<br> <em>Just note that when using a reverse proxy you may need to set up the "User IP proxy headers" in the
PocketBase settings so that the application can extract and log the actual visitor/client IP (the
headers are usually <code>X-Real-IP</code>, <code>X-Forwarded-For</code>).</em>
Here is a minimal <em>NGINX</em> example configuration:
Corresponding <em>Caddy</em> configuration is:
Some hosts (e.g. <a href="https://fly.io" target="_blank" rel="noopener noreferrer">fly.io</a>) use Docker
for deployments. PocketBase doesn't have an official Docker image, but you could use the below minimal
Dockerfile as an example:
To persist your data you need to mount a volume at <code>/pb/pb_data</code>.
<em>For a full example you could check the
<a href="https://github.com/pocketbase/pocketbase/discussions/537" target="_blank" rel="noopener noreferrer">"Host for free on Fly.io"</a>
guide.</em>
To backup/restore your application it is enough to manually copy/replace your <code>pb_data</code>
directory
<em>(for transactional safety make sure that the application is not running)</em>.
To make things slightly easier, PocketBase v0.16+ comes with builtin backups and restore APIs that could
be accessed from the Dashboard (
<em data-svelte-h="svelte-5h5n3z">Settings</em> > <em data-svelte-h="svelte-1gmx8n3">Backups</em>
):
Backups can be stored locally (default) or in a S3 compatible storage (<em>it is recommended to use a separate bucket only for the backups</em>). The generated backup represents a full snapshot as ZIP archive of your <code>pb_data</code> directory (including
the locally stored uploaded files but excluding any local backups or files uploaded to S3).
During the backup's ZIP generation the application will be temporary set in read-only mode.
Depending on the size of your <code>pb_data</code> this could be a very slow operation and it is
advised in case of large <code>pb_data</code> (e.g. 2GB+) to consider a different backup strategy
<em class="txt-sm">(see an example
<a href="https://github.com/pocketbase/pocketbase/discussions/4254#backups" target="_blank" rel="noopener noreferrer">backup.sh script</a>
that combines <code>sqlite3 .backup</code> + <code>rsync</code>)
</em>.
By default, PocketBase uses the internal Unix <code>sendmail</code> command for sending emails.
<br>
While it's OK for development, it's not very useful for production, because your emails most likely will get
marked as spam or even fail to deliver.
To avoid deliverability issues, consider using a local SMTP server or an external mail service like
<a href="https://www.mailersend.com/" target="_blank" rel="noreferrer noopener">MailerSend</a>,
<a href="https://www.brevo.com/" target="_blank" rel="noreferrer noopener">Brevo</a>,
<a href="https://sendgrid.com/" target="_blank" rel="noreferrer noopener">SendGrid</a>,
<a href="https://www.mailgun.com/" target="_blank" rel="noreferrer noopener">Mailgun</a>,
<a href="https://aws.amazon.com/ses/" target="_blank" rel="noreferrer noopener">AWS SES</a>, etc.
Once you've decided on a mail service, you could configure the PocketBase SMTP settings from the
<em>Dashboard > Settings > Mail settings </em>:
As an additional layer of security you can enable the MFA and OTP options for the <code>_superusers</code>
collection, which will enforce an additional one-time password (email code) requirement when authenticating
as superuser.
In case of email deliverability issues, you can also generate an OTP manually using the
<code>./pocketbase superuser otp yoursuperuser@example.com</code> command.
To minimize the risk of API abuse (e.g. excessive auth or record create requests) it is recommended to set
up a rate limiter.
PocketBase v0.23.0+ comes with a simple builtin rate limiter that should cover most of the cases but you
are also free to use any external one via reverse proxy if you need more advanced options.
You can configure the builtin rate limiter from the
<em>Dashboard > Settings > Application:</em>
The below instructions are for Linux but other operating systems have similar mechanism.
Unix uses <em>"file descriptors"</em> also for network connections and most systems have a default limit
of ~ 1024.
<br>
If your application has a lot of concurrent realtime connections, it is possible that at some point you would
get an error such as: <code>Too many open files</code>.
One way to mitigate this is to check your current account resource limits by running
<code>ulimit -a</code> and find the parameter you want to change. For example, if you want to increase the
open files limit (<em>-n</em>), you could run
<code>ulimit -n 4096</code> before starting PocketBase.
If you are running in a memory constrained environment, defining the
<a href="https://pkg.go.dev/runtime#hdr-Environment_Variables" target="_blank" rel="noopener"><code>GOMEMLIMIT</code></a>
environment variable could help preventing out-of-memory (OOM) termination of your process. It is a "soft limit"
meaning that the memory usage could still exceed it in some situations, but it instructs the GC to be more
"aggressive" and run more often if needed. For example: <code>GOMEMLIMIT=512MiB</code>.
If after <code>GOMEMLIMIT</code> you are still experiencing OOM errors, you can try to enable swap
partitioning (if not already) or open a
<a href="https://github.com/pocketbase/pocketbase/discussions" target="_blank" rel="noopener">Q&A discussion</a>
with some steps to reproduce the error in case it is something that we can improve in PocketBase.
It is fine to ignore the below if you are not sure whether you need it.
By default, PocketBase stores the applications settings in the database as plain JSON text, including the
SMTP password and S3 storage credentials.
While this is not a security issue on its own (PocketBase applications live entirely on a single server
and it is expected only authorized users to have access to your server and application data), in some
situations it may be a good idea to store the settings encrypted in case someone get their hands on your
database file (e.g. from an external stored backup).
To store your PocketBase settings encrypted:
<p data-svelte-h="svelte-r5oc0s">Consider the following app directory structure:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->myapp/
pb_migrations/
pb_hooks/
pocketbase<!-- HTML_TAG_END --></code> </div>
<p data-svelte-h="svelte-qiypfw">Upload the binary and anything else required by your application to your remote server, for
example using
<strong>rsync</strong>:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->rsync <span class="token operator">-</span>avz <span class="token operator">-</span>e ssh <span class="token operator">/</span>local<span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span>myapp root@<span class="token constant">YOUR_SERVER_IP</span><span class="token operator">:</span><span class="token operator">/</span>root<span class="token operator">/</span>pb<!-- HTML_TAG_END --></code> </div>
<p data-svelte-h="svelte-a9mlxl">Start a SSH session with your server:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->ssh root@<span class="token constant">YOUR_SERVER_IP</span><!-- HTML_TAG_END --></code> </div>
<p data-svelte-h="svelte-edfwua">Start the executable (specifying a domain name will issue a Let's encrypt certificate for it)</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token punctuation">[</span>root@dev <span class="token operator">~</span><span class="token punctuation">]</span>$ <span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>pocketbase serve yourdomain<span class="token punctuation">.</span>com<!-- HTML_TAG_END --></code> </div> <blockquote><p data-svelte-h="svelte-h6xbpg">Notice that in the above example we are logged in as <strong>root</strong> which allows us to
bind to the
<strong>privileged 80 and 443 ports</strong>.
<br>
For <strong>non-root</strong> users usually you'll need special privileges to be able to do
that. You have several options depending on your OS - <code>authbind</code>,
<code>setcap</code>,
<code>iptables</code>, <code>sysctl</code>, etc. Here is an example using <code>setcap</code>:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token punctuation">[</span>myuser@dev <span class="token operator">~</span><span class="token punctuation">]</span>$ sudo setcap <span class="token string">'cap_net_bind_service=+ep'</span> <span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>pocketbase<!-- HTML_TAG_END --></code> </div></blockquote>
<p data-svelte-h="svelte-1bafj7x">(Optional) Systemd service</p> <p data-svelte-h="svelte-119pyzh">You can skip step 3 and create a <strong>Systemd service</strong>
to allow your application to start/restart on its own.
<br>
Here is an example service file (usually created in
<code>/lib/systemd/system/pocketbase.service</code>):</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
Description <span class="token operator">=</span> pocketbase
<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
Type             <span class="token operator">=</span> simple
User             <span class="token operator">=</span> root
Group            <span class="token operator">=</span> root
LimitNOFILE      <span class="token operator">=</span> <span class="token number">4096</span>
Restart          <span class="token operator">=</span> always
RestartSec       <span class="token operator">=</span> 5s
StandardOutput   <span class="token operator">=</span> append<span class="token operator">:</span><span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>std<span class="token punctuation">.</span>log
StandardError    <span class="token operator">=</span> append<span class="token operator">:</span><span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>std<span class="token punctuation">.</span>log
WorkingDirectory <span class="token operator">=</span> <span class="token operator">/</span>root<span class="token operator">/</span>pb
ExecStart        <span class="token operator">=</span> <span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>pocketbase serve yourdomain<span class="token punctuation">.</span>com
<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy <span class="token operator">=</span> multi<span class="token operator">-</span>user<span class="token punctuation">.</span>target<!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-xrof42">After that we just have to enable it and start the service using <code>systemctl</code>:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token punctuation">[</span>root@dev <span class="token operator">~</span><span class="token punctuation">]</span>$ systemctl enable pocketbase<span class="token punctuation">.</span>service
<span class="token punctuation">[</span>root@dev <span class="token operator">~</span><span class="token punctuation">]</span>$ systemctl start pocketbase<!-- HTML_TAG_END --></code> </div> <blockquote><p data-svelte-h="svelte-1nv9bc5">You can find a link to the Web UI installer in the <code>/root/pb/std.log</code>, but
alternatively you can also create the first superuser explicitly via the
<code>superuser</code> PocketBase command:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token punctuation">[</span>root@dev <span class="token operator">~</span><span class="token punctuation">]</span>$ <span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>pocketbase superuser create <span class="token constant">EMAIL</span> <span class="token constant">PASS</span><!-- HTML_TAG_END --></code> </div></blockquote>
Create a new environment variable and <strong data-svelte-h="svelte-1wjp855">set a random 32 characters</strong> string as its value.
<br> <span class="txt-hint">e.g. add
<code>export PB_ENCRYPTION_KEY="mqnMUCRxQ9BHLB1QIzpsFxzX6IxWtkEU"</code>
in your shell profile file</span>
Start the application with <code>--encryptionEnv=YOUR_ENV_VAR</code> flag.
<br> <span class="txt-hint">e.g. <code>pocketbase serve --encryptionEnv=PB_ENCRYPTION_KEY</code></span>
<p data-svelte-h="svelte-h6xbpg">Notice that in the above example we are logged in as <strong>root</strong> which allows us to
bind to the
<strong>privileged 80 and 443 ports</strong>.
<br>
For <strong>non-root</strong> users usually you'll need special privileges to be able to do
that. You have several options depending on your OS - <code>authbind</code>,
<code>setcap</code>,
<code>iptables</code>, <code>sysctl</code>, etc. Here is an example using <code>setcap</code>:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token punctuation">[</span>myuser@dev <span class="token operator">~</span><span class="token punctuation">]</span>$ sudo setcap <span class="token string">'cap_net_bind_service=+ep'</span> <span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>pocketbase<!-- HTML_TAG_END --></code> </div>
<p data-svelte-h="svelte-1nv9bc5">You can find a link to the Web UI installer in the <code>/root/pb/std.log</code>, but
alternatively you can also create the first superuser explicitly via the
<code>superuser</code> PocketBase command:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token punctuation">[</span>root@dev <span class="token operator">~</span><span class="token punctuation">]</span>$ <span class="token operator">/</span>root<span class="token operator">/</span>pb<span class="token operator">/</span>pocketbase superuser create <span class="token constant">EMAIL</span> <span class="token constant">PASS</span><!-- HTML_TAG_END --></code> </div>
Collection operations
Collection operations
Sending HTTP requests
Deployment strategies
One of the best PocketBase features is that it's completely portable. This means that it doesn't require
any external dependency and
could be deployed by just uploading the executable on your server
Here is an example of starting a production HTTPS server (auto managed TLS with Let's Encrypt) on a clean
Ubuntu 22.04 installation.
Consider the following app directory structure:
myapp/
pb_migrations/
pb_hooks/
pocketbase
Upload the binary and anything else required by your application to your remote server, for
example using
Start a SSH session with your server:
Start the executable (specifying a domain name will issue a Let's encrypt certificate for it)
pocketbase serve yourdomain
Notice that in the above example we are logged in as
which allows us to
bind to the
privileged 80 and 443 ports
users usually you'll need special privileges to be able to do
that. You have several options depending on your OS -
, etc. Here is an example using
'cap_net_bind_service=+ep'
(Optional) Systemd service
You can skip step 3 and create a
to allow your application to start/restart on its own.
Here is an example service file (usually created in
/lib/systemd/system/pocketbase.service
pocketbase serve yourdomain
After that we just have to enable it and start the service using
$ systemctl enable pocketbase
$ systemctl start pocketbase
You can find a link to the Web UI installer in the
, but
alternatively you can also create the first superuser explicitly via the
pocketbase superuser create
If you plan on hosting multiple applications on a single server or need finer network controls, you can
always put PocketBase behind a reverse proxy such as
Just note that when using a reverse proxy you may need to set up the "User IP proxy headers" in the
PocketBase settings so that the application can extract and log the actual visitor/client IP (the
headers are usually
example configuration:
server {
listen 80;
server_name example.com;
client_max_body_size 10M;
location / {
# check http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive
proxy_set_header Connection '';
proxy_http_version 1.1;
proxy_read_timeout 360s;
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
# enable if you are serving under a subpath location
# rewrite /yourSubpath/(.*) /$1  break;
proxy_pass http://127.0.0.1:8090;
example.com {
request_body {
max_size 10MB
reverse_proxy 127.0.0.1:8090 {
transport http {
read_timeout 360s
) use Docker
for deployments. PocketBase doesn't have an official Docker image, but you could use the below minimal
Dockerfile as an example:
FROM alpine:latest
ARG PB_VERSION=0.30.2
RUN apk add --no-cache \
unzip \
ca-certificates
# download and unzip PocketBase
ADD https://github.com/pocketbase/pocketbase/releases/download/v${PB_VERSION}/pocketbase_${PB_VERSION}_linux_amd64.zip /tmp/pb.zip
RUN unzip /tmp/pb.zip -d /pb/
# uncomment to copy the local pb_migrations dir into the image
# COPY ./pb_migrations /pb/pb_migrations
# uncomment to copy the local pb_hooks dir into the image
# COPY ./pb_hooks /pb/pb_hooks
EXPOSE 8080
# start PocketBase
CMD ["/pb/pocketbase", "serve", "--http=0.0.0.0:8080"]
To persist your data you need to mount a volume at
For a full example you could check the
"Host for free on Fly.io"
To backup/restore your application it is enough to manually copy/replace your
(for transactional safety make sure that the application is not running)
To make things slightly easier, PocketBase v0.16+ comes with builtin backups and restore APIs that could
be accessed from the Dashboard (
Backups can be stored locally (default) or in a S3 compatible storage (
it is recommended to use a separate bucket only for the backups
). The generated backup represents a full snapshot as ZIP archive of your
directory (including
the locally stored uploaded files but excluding any local backups or files uploaded to S3).
During the backup's ZIP generation the application will be temporary set in read-only mode.
Depending on the size of your
this could be a very slow operation and it is
advised in case of large
(e.g. 2GB+) to consider a different backup strategy
By default, PocketBase uses the internal Unix
command for sending emails.
While it's OK for development, it's not very useful for production, because your emails most likely will get
marked as spam or even fail to deliver.
To avoid deliverability issues, consider using a local SMTP server or an external mail service like
Once you've decided on a mail service, you could configure the PocketBase SMTP settings from the
Dashboard > Settings > Mail settings
Enable MFA for superusers
As an additional layer of security you can enable the MFA and OTP options for the
collection, which will enforce an additional one-time password (email code) requirement when authenticating
as superuser.
In case of email deliverability issues, you can also generate an OTP manually using the
./pocketbase superuser otp yoursuperuser@example.com
To minimize the risk of API abuse (e.g. excessive auth or record create requests) it is recommended to set
up a rate limiter.
PocketBase v0.23.0+ comes with a simple builtin rate limiter that should cover most of the cases but you
are also free to use any external one via reverse proxy if you need more advanced options.
You can configure the builtin rate limiter from the
Dashboard > Settings > Application:
The below instructions are for Linux but other operating systems have similar mechanism.
also for network connections and most systems have a default limit
of ~ 1024.
If your application has a lot of concurrent realtime connections, it is possible that at some point you would
get an error such as:
One way to mitigate this is to check your current account resource limits by running
and find the parameter you want to change. For example, if you want to increase the
open files limit (
before starting PocketBase.
If you are running in a memory constrained environment, defining the
environment variable could help preventing out-of-memory (OOM) termination of your process. It is a "soft limit"
meaning that the memory usage could still exceed it in some situations, but it instructs the GC to be more
"aggressive" and run more often if needed. For example:
you are still experiencing OOM errors, you can try to enable swap
partitioning (if not already) or open a
with some steps to reproduce the error in case it is something that we can improve in PocketBase.
Enable settings encryption
It is fine to ignore the below if you are not sure whether you need it.
By default, PocketBase stores the applications settings in the database as plain JSON text, including the
SMTP password and S3 storage credentials.
While this is not a security issue on its own (PocketBase applications live entirely on a single server
and it is expected only authorized users to have access to your server and application data), in some
situations it may be a good idea to store the settings encrypted in case someone get their hands on your
database file (e.g. from an external stored backup).
To store your PocketBase settings encrypted:
Create a new environment variable and
set a random 32 characters
export PB_ENCRYPTION_KEY="mqnMUCRxQ9BHLB1QIzpsFxzX6IxWtkEU"
in your shell profile file
Start the application with
--encryptionEnv=YOUR_ENV_VAR
pocketbase serve --encryptionEnv=PB_ENCRYPTION_KEY


--------------------------------------------------------------------------------

[10] pb-deployer - PocketBase Production Deployment
URL: https://raw.githubusercontent.com/magooney-loon/pb-deployer/main/README.md
Category: setup

Content:
<div align="center">
  <img src="frontend/static/favicon.svg" alt="Logo" width="200">
  <h1 align="center">pb-deployer</h1>
  <h3 align="center">Automates the lifecycle of deploying PocketBase apps to production</h3>
  <a href="https://github.com/magooney-loon/pb-deployer/stargazers"><img src="https://img.shields.io/github/stars/magooney-loon/pb-deployer?style=for-the-badge&color=blue" alt="Stargazers"></a>
  <a href="https://github.com/magooney-loon/pb-deployer/graphs/contributors"><img src="https://img.shields.io/github/contributors/magooney-loon/pb-deployer?style=for-the-badge&color=blue" alt="Contributors"></a>
  <a href="https://github.com/magooney-loon/pb-deployer/blob/main/LICENSE"><img src="https://img.shields.io/github/license/magooney-loon/pb-deployer?style=for-the-badge&color=blue" alt="AGPL-3.0"></a>
  <br>
  <img src="frontend/static/deployer.png" alt="Screenshot" width="100%">
  <h5 align="center">**WARNING**HOBBY PROJECT**</h5>
  <a target="_blank" href="https://magooney.org/">Web Demo UI</a>
</div>

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/magooney-loon/pb-deployer)

## üöÄ Quick Start

```bash
git clone https://github.com/magooney-loon/pb-deployer
cd pb-deployer
go run cmd/scripts/main.go --install
```

## Core Workflow

1. **Server Registration**: Add remote host connection details
2. **Server Setup**: Automated user creation and directory structure
3. **Security Lockdown**: Firewall, fail2ban, disable root SSH (Optional)
4. **App Deployment**: Upload prod dist, systemd service creation
5. **Version Management**: Rollback support with file storage

## Directory Structure

```
/opt/pocketbase/
‚îú‚îÄ‚îÄ apps/           # Application deployments (per app directory)
‚îú‚îÄ‚îÄ backups/        # Deployment backups (timestamped)
‚îú‚îÄ‚îÄ logs/           # Application logs
‚îî‚îÄ‚îÄ staging/        # Temporary staging during deployments
```

## Deployment Steps

1. **Downloading and staging deployment package**
2. **Checking service status**
3. **Stopping existing service**
4. **Creating backup of current deployment**
5. **Preparing deployment directory**
6. **Installing new version**
7. **Creating/updating systemd service**
8. **Creating superuser (if initial deployment)**
9. **Starting service**
10. **Verifying & finalizing deployment**

<div align="center">
  <img src="frontend/static/deployer2.png" alt="Logo" width="100%">
</div>

See `**/*/README.md` for detailed docs.

Make sure you loaded your SSH keys, check with `ssh-add -l`

## Contribution
PRs are encouraged, but consider opening a discussion first for minor/major changelogs.

--------------------------------------------------------------------------------

[11] Introduction - Collections
URL: https://pocketbase.io/docs/collections/
Category: database
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Introduction - Collections

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#overview" class="link-primary"> Overview </a>
<a href="#fields" class="link-primary"> Fields </a>
<a href="#base-collection" class="link-primary"> Base collection </a>
<a href="#view-collection" class="link-primary"> View collection </a>
<a href="#auth-collection" class="link-primary"> Auth collection </a>
<strong>Collections</strong> represent your application data. Under the hood they are backed by plain
SQLite tables that are generated automatically with the collection
<strong>name</strong> and <strong>fields</strong> (columns).
Single entry of a collection is called <strong>record</strong> (a single row in the SQL table).
You can manage your <strong>collections</strong> from the Dashboard, with the Web APIs using the
<a href="/docs/how-to-use/">client-side SDKs</a>
(<em>superusers only</em>) or programmatically via the
<a href="/docs/go-migrations/">Go</a>/<a href="/docs/js-migrations/">JavaScript</a>
migrations.
Similarly, you can manage your <strong>records</strong> from the Dashboard, with the Web APIs using the
<a href="/docs/how-to-use/">client-side SDKs</a>
or programmatically via the
<a href="/docs/go-records/">Go</a>/<a href="/docs/js-records/">JavaScript</a>
Record operations.
Here is what a collection edit panel looks like in the Dashboard:
Currently there are 3 collection types: <strong>Base</strong>, <strong>View</strong> and
<strong>Auth</strong>.
<strong>Base collection</strong> is the default collection type and it could be used to store any application
data (articles, products, posts, etc.).
<strong>View collection</strong> is a read-only collection type where the data is populated from a plain
SQL <code>SELECT</code> statement, allowing users to perform aggregations or any other custom queries in
general.
<br>
For example, the following query will create a read-only collection with 3 <em>posts</em>
fields - <em>id</em>, <em>name</em> and <em>totalComments</em>:
<strong>Auth collection</strong> has everything from the <strong>Base collection</strong> but with some additional
special fields to help you manage your app users and also provide various authentication options.
Each Auth collection has the following special system fields:
<code>email</code>, <code>emailVisibility</code>, <code>verified</code>,
<code>password</code> and <code>tokenKey</code>.
<br>
They cannot be renamed or deleted but can be configured using their specific field options. For example you
can make the user email required or optional.
You can have as many Auth collections as you want (users, managers, staffs, members, clients, etc.) each
with their own set of fields, separate login and records managing endpoints.
You can build all sort of different access controls:
All collection fields <em>(with exception of the <code>JSONField</code>)</em> are
<strong>non-nullable and use a zero-default</strong> for their respective type as fallback value
when missing (empty string for <code>text</code>, 0 for <code>number</code>, etc.).
All field specific modifiers are supported both in the Web APIs and via the record Get/Set
methods.
BoolField defines <code>bool</code> type field to store a single <code>false</code>
(default) or <code>true</code> value.
NumberField defines <code>number</code> type field for storing numeric/float64 value:
<code>0</code> (default), <code>2</code>, <code>-1</code>, <code>1.5</code>.
The following additional set modifiers are available:
TextField defines <code>text</code> type field for storing string values:
<code>""</code> (default), <code>"example"</code>.
The following additional set modifiers are available:
EmailField defines <code>email</code> type field for storing a single email string address:
<code>""</code> (default), <code>"john@example.com"</code>.
URLField defines <code>url</code> type field for storing a single URL string value:
<code>""</code> (default), <code>"https://example.com"</code>.
EditorField defines <code data-svelte-h="svelte-jgibi1">editor</code> type field to store HTML formatted text:
<code data-svelte-h="svelte-1ou5050">""</code> (default), <code><p>example</p></code>.
DateField defines <code>date</code> type field to store a single datetime string value:
<code>""</code> (default), <code>"2022-01-01 00:00:00.000Z"</code>.
All PocketBase dates at the moment follows the RFC3399 format <code>Y-m-d H:i:s.uZ</code>
(e.g. <code>2024-11-10 18:45:27.123Z</code>).
Dates are compared as strings, meaning that when using the filters with a date field you'll
have to specify the full datetime string format. For example to target a single day (e.g.
November 19, 2024) you can use something like:
<code>created >= '2024-11-19 00:00:00.000Z' && created <= '2024-11-19 23:59:59.999Z'</code>
AutodateField defines an <code>autodate</code> type field and it is similar to the DateField but
its value is auto set on record create/update.
This field is usually used for defining timestamp fields like "created" and "updated".
SelectField defines <code>select</code> type field for storing single or multiple string values
from a predefined list.
It is usually intended for handling enums-like values such as
<code>pending/public/private</code>
statuses, simple <code>client/staff/manager/admin</code> roles, etc.
For <strong data-svelte-h="svelte-qt0iik">single</strong> <code data-svelte-h="svelte-12g42lo">select</code> <em>(the <code data-svelte-h="svelte-1bh2wqg">MaxSelect</code> option is <= 1)</em>
the field value is a string:
<code data-svelte-h="svelte-1ou5050">""</code>, <code data-svelte-h="svelte-1758eu6">"optionA"</code>.
For <strong data-svelte-h="svelte-or1mw4">multiple</strong> <code data-svelte-h="svelte-12g42lo">select</code> <em>(the <code data-svelte-h="svelte-1bh2wqg">MaxSelect</code> option is >= 2)</em>
the field value is an array:
<code data-svelte-h="svelte-1ps12l4">[]</code>, <code data-svelte-h="svelte-wyfki1">["optionA", "optionB"]</code>.
The following additional set modifiers are available:
For example: <code>{"permissions+": "optionA", "roles-": ["staff", "editor"]}</code>
FileField defines <code>file</code> type field for managing record file(s).
PocketBase stores in the database only the file name. The file itself is stored either on the
local disk or in S3, depending on your application storage settings.
For <strong data-svelte-h="svelte-qt0iik">single</strong> <code data-svelte-h="svelte-1vzkat2">file</code> <em>(the <code data-svelte-h="svelte-1bh2wqg">MaxSelect</code> option is <= 1)</em>
the stored value is a string:
<code data-svelte-h="svelte-1ou5050">""</code>, <code data-svelte-h="svelte-1e3docm">"file1_Ab24ZjL.png"</code>.
For <strong data-svelte-h="svelte-or1mw4">multiple</strong> <code data-svelte-h="svelte-1vzkat2">file</code> <em>(the <code data-svelte-h="svelte-1bh2wqg">MaxSelect</code> option is >= 2)</em>
the stored value is an array:
<code data-svelte-h="svelte-1ps12l4">[]</code>, <code data-svelte-h="svelte-46o06k">["file1_Ab24ZjL.png", "file2_Frq24ZjL.txt"]</code>.
The following additional set modifiers are available:
For example:
<code>{"documents+": new File(...), "documents-": ["file1_Ab24ZjL.txt", "file2_Frq24ZjL.txt"]}</code>
You can find more detailed information in the
<a href="/docs/files-handling/">Files upload and handling</a> guide.
RelationField defines <code>relation</code> type field for storing single or multiple collection
record references.
For <strong data-svelte-h="svelte-qt0iik">single</strong> <code data-svelte-h="svelte-orhvg">relation</code> <em>(the <code data-svelte-h="svelte-1bh2wqg">MaxSelect</code> option is <= 1)</em>
the field value is a string:
<code data-svelte-h="svelte-1ou5050">""</code>, <code data-svelte-h="svelte-13syb51">"RECORD_ID"</code>.
For <strong data-svelte-h="svelte-or1mw4">multiple</strong> <code data-svelte-h="svelte-orhvg">relation</code> <em>(the <code data-svelte-h="svelte-1bh2wqg">MaxSelect</code> option is >= 2)</em>
the field value is an array:
<code data-svelte-h="svelte-1ps12l4">[]</code>, <code data-svelte-h="svelte-1axkr11">["RECORD_ID1", "RECORD_ID2"]</code>.
The following additional set modifiers are available:
For example: <code>{"users+": "USER_ID", "categories-": ["CAT_ID1", "CAT_ID2"]}</code>
JSONField defines <code>json</code> type field for storing any serialized JSON value,
including <code>null</code> (default).
GeoPoint defines <code data-svelte-h="svelte-1cgmqn5">geoPoint</code> type field for storing geographic coordinates
(longitude, latitude) as a serialized json object. For example:
<code>{"lon":12.34,"lat":56.78}</code>.
The default/zero value of a <code data-svelte-h="svelte-1cgmqn5">geoPoint</code> is the "Null Island", aka.
<code>{"lon":0,"lat":0}</code>.
When extending PocketBase with Go/JSVM, the <code>geoPoint</code> field value could be set as
<code>types.GeoPoint</code> instance or a regular map with <code>lon</code> and
<code>lat</code> keys:
<strong>Role (Group)</strong> <br> <em>For example, you could attach a "role" <code>select</code> field to your Auth collection with the
following options: "employee" and "staff". And then in some of your other collections you could
define the following rule to allow only "staff":
<br> <code>@request.auth.role = "staff"</code></em>
<strong>Relation (Ownership)</strong> <br> <em>Let's say that you have 2 collections - "posts" base collection and "users" auth collection. In
your "posts" collection you can create "author"
<code>relation</code> field pointing to the "users" collection. To allow access to only the
"author" of the record(s), you could use a rule like:
<code>@request.auth.id != "" && author = @request.auth.id</code> <br>
Nested relation fields look ups, including back-relations, are also supported, for example:
<code>someRelField.anotherRelField.author = @request.auth.id</code></em>
<strong>Managed</strong> <br> <em>In addition to the default "List", "View", "Create", "Update", "Delete" API rules, Auth
collections have also a special "Manage" API rule that could be used to allow one user (it could
be even from a different collection) to be able to fully manage the data of another user (e.g.
changing their email, password, etc.).</em>
<strong>Mixed</strong> <br> <em>You can build a mixed approach based on your unique use-case. Multiple rules can be grouped with
parenthesis <code>()</code> and combined with <code>&&</code>
(AND) and <code>||</code> (OR) operators:
<br> <code>@request.auth.id != "" && (@request.auth.role = "staff" || author = @request.auth.id)</code></em>
<code>fieldName<strong>+</strong></code>
adds number to the already existing record value.
<code>fieldName<strong>-</strong></code>
subtracts number from the already existing record value.
<code data-svelte-h="svelte-ag2dx4">fieldName<strong>:autogenerate</strong></code>
autogenerate a field value if the <code data-svelte-h="svelte-1iq7un0">AutogeneratePattern</code> field option is set.
<br>
For example, submitting:
<code>{"slug:autogenerate":"abc-"}</code> will result in <code data-svelte-h="svelte-1na6qj2">"abc-[random]"</code> <code data-svelte-h="svelte-10goi53">slug</code> field value.
<code>fieldName<strong>+</strong></code>
appends one or more values to the existing one.
<code><strong>+</strong>fieldName</code>
prepends one or more values to the existing one.
<code>fieldName<strong>-</strong></code>
subtracts/removes one or more values from the existing one.
<code>fieldName<strong>+</strong></code>
appends one or more files to the existing field value.
<code><strong>+</strong>fieldName</code>
prepends one or more files to the existing field value.
<code>fieldName<strong>-</strong></code>
deletes one or more files from the existing field value.
<code>fieldName<strong>+</strong></code>
appends one or more ids to the existing one.
<code><strong>+</strong>fieldName</code>
prepends one or more ids to the existing one.
<code>fieldName<strong>-</strong></code>
subtracts/removes one or more ids from the existing one.
How to use PocketBase
API rules and filters
Files upload and handling
Working with relations
Collection operations
Collection operations
Sending HTTP requests
Introduction - Collections
represent your application data. Under the hood they are backed by plain
SQLite tables that are generated automatically with the collection
Single entry of a collection is called
(a single row in the SQL table).
from the Dashboard, with the Web APIs using the
) or programmatically via the
Similarly, you can manage your
from the Dashboard, with the Web APIs using the
or programmatically via the
Here is what a collection edit panel looks like in the Dashboard:
Currently there are 3 collection types:
is the default collection type and it could be used to store any application
data (articles, products, posts, etc.).
is a read-only collection type where the data is populated from a plain
SQL
statement, allowing users to perform aggregations or any other custom queries in
general.
For example, the following query will create a read-only collection with 3
View collections don't receive realtime events because they don't have create/update/delete
operations.
has everything from the
but with some additional
special fields to help you manage your app users and also provide various authentication options.
Each Auth collection has the following special system fields:
They cannot be renamed or deleted but can be configured using their specific field options. For example you
can make the user email required or optional.
You can have as many Auth collections as you want (users, managers, staffs, members, clients, etc.) each
with their own set of fields, separate login and records managing endpoints.
You can build all sort of different access controls:
For example, you could attach a "role"
field to your Auth collection with the
following options: "employee" and "staff". And then in some of your other collections you could
define the following rule to allow only "staff":
@request.auth.role = "staff"
Let's say that you have 2 collections - "posts" base collection and "users" auth collection. In
your "posts" collection you can create "author"
field pointing to the "users" collection. To allow access to only the
"author" of the record(s), you could use a rule like:
@request.auth.id != "" && author = @request.auth.id
Nested relation fields look ups, including back-relations, are also supported, for example:
someRelField.anotherRelField.author = @request.auth.id
In addition to the default "List", "View", "Create", "Update", "Delete" API rules, Auth
collections have also a special "Manage" API rule that could be used to allow one user (it could
be even from a different collection) to be able to fully manage the data of another user (e.g.
changing their email, password, etc.).
You can build a mixed approach based on your unique use-case. Multiple rules can be grouped with
parenthesis
@request.auth.id != "" && (@request.auth.role = "staff" || author = @request.auth.id)
All collection fields
(with exception of the
non-nullable and use a zero-default
for their respective type as fallback value
when missing (empty string for
All field specific modifiers are supported both in the Web APIs and via the record Get/Set
methods.
type field to store a single
type field for storing numeric/float64 value:
The following additional set modifiers are available:
adds number to the already existing record value.
subtracts number from the already existing record value.
type field for storing string values:
The following additional set modifiers are available:
autogenerate a field value if the
For example, submitting:
{"slug:autogenerate":"abc-"}
type field for storing a single email string address:
type field for storing a single URL string value:
"https://example.com"
type field to store HTML formatted text:
type field to store a single datetime string value:
"2022-01-01 00:00:00.000Z"
All PocketBase dates at the moment follows the RFC3399 format
2024-11-10 18:45:27.123Z
Dates are compared as strings, meaning that when using the filters with a date field you'll
have to specify the full datetime string format. For example to target a single day (e.g.
November 19, 2024) you can use something like:
created >= '2024-11-19 00:00:00.000Z' && created <= '2024-11-19 23:59:59.999Z'
AutodateField defines an
type field and it is similar to the DateField but
its value is auto set on record create/update.
This field is usually used for defining timestamp fields like "created" and "updated".
type field for storing single or multiple string values
from a predefined list.
It is usually intended for handling enums-like values such as
pending/public/private
client/staff/manager/admin
the field value is a string:
the field value is an array:
["optionA", "optionB"]
The following additional set modifiers are available:
appends one or more values to the existing one.
prepends one or more values to the existing one.
subtracts/removes one or more values from the existing one.
{"permissions+": "optionA", "roles-": ["staff", "editor"]}
type field for managing record file(s).
PocketBase stores in the database only the file name. The file itself is stored either on the
local disk or in S3, depending on your application storage settings.
the stored value is a string:
the stored value is an array:
["file1_Ab24ZjL.png", "file2_Frq24ZjL.txt"]
The following additional set modifiers are available:
appends one or more files to the existing field value.
prepends one or more files to the existing field value.
deletes one or more files from the existing field value.
{"documents+": new File(...), "documents-": ["file1_Ab24ZjL.txt", "file2_Frq24ZjL.txt"]}
You can find more detailed information in the
Files upload and handling
RelationField defines
type field for storing single or multiple collection
record references.
the field value is a string:
the field value is an array:
["RECORD_ID1", "RECORD_ID2"]
The following additional set modifiers are available:
appends one or more ids to the existing one.
prepends one or more ids to the existing one.
subtracts/removes one or more ids from the existing one.
{"users+": "USER_ID", "categories-": ["CAT_ID1", "CAT_ID2"]}
type field for storing any serialized JSON value,
including
type field for storing geographic coordinates
(longitude, latitude) as a serialized json object. For example:
{"lon":12.34,"lat":56.78}
The default/zero value of a
is the "Null Island", aka.
When extending PocketBase with Go/JSVM, the
field value could be set as
instance or a regular map with
// set types.GeoPoint
// set map[string]any
// retrieve the field value as types.GeoPoint struct
Prev: How to use PocketBase
Next: API rules and filters


--------------------------------------------------------------------------------

[12] Introduction - API rules and filters
URL: https://pocketbase.io/docs/api-rules-and-filters/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Introduction - API rules and filters

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#api-rules" class="link-primary"> API rules </a>
<a href="#filters-syntax" class="link-primary"> Filters syntax </a>
<a href="#special-identifiers-and-modifiers" class="link-primary"> Special identifiers and modifiers </a>
<a href="#examples" class="link-primary"> Examples </a>
<a href="#-macros" class="link-primary"> @ macros </a>
<a href="#isset-modifier" class="link-primary"> :isset modifier </a>
<a href="#length-modifier" class="link-primary"> :length modifier </a>
<a href="#each-modifier" class="link-primary"> :each modifier </a>
<a href="#lower-modifier" class="link-primary"> :lower modifier </a>
<a href="#geodistancelona-lata-lonb-latb" class="link-primary"> geoDistance(lonA, latA, lonB, latB) </a>
<strong>API Rules</strong> are your collection access controls and data filters.
Each collection has <strong>5 rules</strong>, corresponding to the specific API action:
Auth collections have an additional <code>options.manageRule</code> used to allow one user (it could be even
from a different collection) to be able to fully manage the data of another user (ex. changing their email,
password, etc.).
Each rule could be set to:
<strong>PocketBase API Rules act also as records filter!</strong> <br>
Or in other words, you could for example allow listing only the "active" records of your collection,
by using a simple filter expression such as:
<code>status = "active"</code>
(where "status" is a field defined in your Collection).
Because of the above, the API will return 200 empty items response in case a request doesn't
satisfy a <code>listRule</code>, 400 for unsatisfied <code>createRule</code> and 404 for
unsatisfied <code>viewRule</code>, <code>updateRule</code> and <code>deleteRule</code>.
<br>
All rules will return 403 in case they were "locked" (aka. superuser only) and the request client is
not a superuser.
The API Rules are ignored when the action is performed by an authorized superuser (<strong>superusers can access everything</strong>)!
You can find information about the available fields in your collection API rules tab:
There is autocomplete to help guide you while typing the rule filter expression, but in general you have
access to <strong>3 groups of fields</strong>:
This filter could be used to target other collections that are not directly related to the current
one (aka. there is no relation field pointing to it) but both shares a common field value, like
for example a category id:
In case you want to join the same collection multiple times but based on different criteria, you
can define an alias by appending <code>:alias</code> suffix to the collection name.
The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:
To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.
Single line comments are also supported: <code>// Example comment</code>.
The following datetime macros are available and can be used as part of the filter expression:
For example:
The <code>:isset</code> field modifier is available only for the <code>@request.*</code> fields and can be
used to check whether the client submitted a specific data with the request. Here is for example a rule that
disallows changing a "role" field:
<small class="txt-hint">Note that <code class="txt-sm">@request.body.*:isset</code> at the moment doesn't support checking for
new uploaded files because they are evaluated separately and cannot be serialized (<em>this behavior may change in the future</em>).</small>
The <code>:length</code> field modifier could be used to check the number of items in an array field
(multiple <code>file</code>, <code>select</code>, <code>relation</code>).
<br>
Could be used with both the collection schema fields and the <code>@request.body.*</code> fields. For example:
<small class="txt-hint">Note that <code class="txt-sm">@request.body.*:length</code> at the moment doesn't support checking
for new uploaded files because they are evaluated separately and cannot be serialized (<em>this behavior may change in the future</em>).</small>
The <code>:each</code> field modifier works only with multiple <code>select</code>, <code>file</code> and
<code>relation</code>
type fields. It could be used to apply a condition on each item from the field array. For example:
<small class="txt-hint">Note that <code class="txt-sm">@request.body.*:each</code> at the moment doesn't support checking for
new uploaded files because they are evaluated separately and cannot be serialized (<em>this behavior may change in the future</em>).</small>
The <code>:lower</code> field modifier could be used to perform lower-case string comparisons. For example:
<small class="txt-hint">Under the hood it uses the
<a href="https://www.sqlite.org/lang_corefunc.html#lower" target="_blank" rel="noopener noreferrer">SQLite <code>LOWER</code> scalar function</a>
and by default works only for ASCII characters, unless the ICU extension is loaded.</small>
The <code>geoDistance(lonA, latA, lonB, latB)</code> function could be used to calculate the Haversine distance
between 2 geographic points in kilometres.
The function is intended to be used primarily with the <code>geoPoint</code> field type, but the accepted
arguments could be any plain number or collection field identifier. If the identifier cannot be resolved
and converted to a numeric value, it resolves to <code>null</code>. Note that the
<code>geoDistance</code> function always results in a single row/record value meaning that "any/at-least-one-of"
type of constraint will be applied even if some of its arguments originate from a multiple relation field.
For example:
<code>listRule</code>
<code>viewRule</code>
<code>createRule</code>
<code>updateRule</code>
<code>deleteRule</code>
<strong>"locked"</strong> - aka. <code>null</code>, which means that the action could be performed
only by an authorized superuser
(<strong>this is the default</strong>)
<strong>Empty string</strong> - anyone will be able to perform the action (superusers, authorized users
and guests)
<strong>Non-empty string</strong> - only users (authorized or not) that satisfy the rule filter expression
will be able to perform this action
<strong>Your Collection schema fields</strong> <br>
This includes all nested relation fields too, ex.
<code>someRelField.status != "pending"</code>
<code><strong>@request.*</strong></code> <br>
Used to access the current request data, such as query parameters, body/form fields, authorized user state,
etc.
<ul><li><code>@request.context</code> - the context where the rule is used (ex.
<code>@request.context != "oauth2"</code>)
<br> <small class="txt-hint">The currently supported context values are
<code>default</code>,
<code>oauth2</code>,
<code>otp</code>,
<code>password</code>,
<code>realtime</code>,
<code>protectedFile</code>.</small>
<code>@request.method</code> - the HTTP request method (ex.
<code>@request.method = "GET"</code>)
<code>@request.headers.*</code> - the request headers as string values (ex.
<code>@request.headers.x_token = "test"</code>)
<br> <small class="txt-hint">Note: All header keys are normalized to lowercase and "-" is replaced with "_" (for
example "X-Token" is "x_token").</small>
<code>@request.query.*</code> - the request query parameters as string values (ex.
<code>@request.query.page = "1"</code>)
<code>@request.auth.*</code> - the current authenticated model (ex.
<code>@request.auth.id != ""</code>)
<code>@request.body.*</code> - the submitted body parameters (ex.
<code>@request.body.title != ""</code>)
<br> <small class="txt-hint">Note: Uploaded files are not part of the <code class="txt-sm">@request.body</code>
because they are evaluated separately (<em>this behavior may change in the future</em>).</small>
<code data-svelte-h="svelte-r2wdg3"><strong>@collection.*</strong></code> <p data-svelte-h="svelte-li3lyk">This filter could be used to target other collections that are not directly related to the current
one (aka. there is no relation field pointing to it) but both shares a common field value, like
for example a category id:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->@collection<span class="token punctuation">.</span>news<span class="token punctuation">.</span>categoryId <span class="token operator">?</span><span class="token operator">=</span> categoryId <span class="token operator">&&</span> @collection<span class="token punctuation">.</span>news<span class="token punctuation">.</span>author <span class="token operator">?</span><span class="token operator">=</span> @request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id<!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-aej0yo">In case you want to join the same collection multiple times but based on different criteria, you
can define an alias by appending <code>:alias</code> suffix to the collection name.</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// see https://github.com/pocketbase/pocketbase/discussions/3805#discussioncomment-7634791</span>
@request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token string">""</span> <span class="token operator">&&</span>
@collection<span class="token punctuation">.</span>courseRegistrations<span class="token punctuation">.</span>user <span class="token operator">?</span><span class="token operator">=</span> id <span class="token operator">&&</span>
@collection<span class="token punctuation">.</span>courseRegistrations<span class="token operator">:</span>auth<span class="token punctuation">.</span>user <span class="token operator">?</span><span class="token operator">=</span> @request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id <span class="token operator">&&</span>
@collection<span class="token punctuation">.</span>courseRegistrations<span class="token punctuation">.</span>courseGroup <span class="token operator">?</span><span class="token operator">=</span> @collection<span class="token punctuation">.</span>courseRegistrations<span class="token operator">:</span>auth<span class="token punctuation">.</span>courseGroup<!-- HTML_TAG_END --></code> </div>
<code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false
<code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
Allow only registered users:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->@request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token string">""</span><!-- HTML_TAG_END --></code> </div>
Allow only registered users and return records that are either "active" or "pending":
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->@request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token string">""</span> <span class="token operator">&&</span> <span class="token punctuation">(</span>status <span class="token operator">=</span> <span class="token string">"active"</span> <span class="token operator">||</span> status <span class="token operator">=</span> <span class="token string">"pending"</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
Allow only registered users who are listed in an <em data-svelte-h="svelte-1mselnj">allowed_users</em> multi-relation field value:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->@request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token string">""</span> <span class="token operator">&&</span> allowed_users<span class="token punctuation">.</span>id <span class="token operator">?</span><span class="token operator">=</span> @request<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id<!-- HTML_TAG_END --></code> </div>
Allow access by anyone and return only the records where the <em data-svelte-h="svelte-kefzks">title</em> field value starts with
"Lorem" (ex. "Lorem ipsum"):
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->title <span class="token operator">~</span> <span class="token string">"Lorem%"</span><!-- HTML_TAG_END --></code> </div>
How to use PocketBase
API rules and filters
Files upload and handling
Working with relations
Collection operations
Collection operations
Sending HTTP requests
Introduction - API rules and filters
API rules and filters
are your collection access controls and data filters.
, corresponding to the specific API action:
Auth collections have an additional
used to allow one user (it could be even
from a different collection) to be able to fully manage the data of another user (ex. changing their email,
password, etc.).
Each rule could be set to:
, which means that the action could be performed
only by an authorized superuser
- anyone will be able to perform the action (superusers, authorized users
and guests)
- only users (authorized or not) that satisfy the rule filter expression
will be able to perform this action
PocketBase API Rules act also as records filter!
Or in other words, you could for example allow listing only the "active" records of your collection,
by using a simple filter expression such as:
(where "status" is a field defined in your Collection).
Because of the above, the API will return 200 empty items response in case a request doesn't
satisfy a
, 400 for unsatisfied
and 404 for
unsatisfied
All rules will return 403 in case they were "locked" (aka. superuser only) and the request client is
not a superuser.
The API Rules are ignored when the action is performed by an authorized superuser (
superusers can access everything
You can find information about the available fields in your collection API rules tab:
There is autocomplete to help guide you while typing the rule filter expression, but in general you have
access to
Your Collection schema fields
This includes all nested relation fields too, ex.
someRelField.status != "pending"
Used to access the current request data, such as query parameters, body/form fields, authorized user state,
etc.
- the context where the rule is used (ex.
@request.context != "oauth2"
The currently supported context values are
- the HTTP request method (ex.
@request.method = "GET"
- the request headers as string values (ex.
@request.headers.x_token = "test"
Note: All header keys are normalized to lowercase and "-" is replaced with "_" (for
example "X-Token" is "x_token").
- the request query parameters as string values (ex.
@request.query.page = "1"
- the current authenticated model (ex.
@request.auth.id != ""
- the submitted body parameters (ex.
@request.body.title != ""
Note: Uploaded files are not part of the
because they are evaluated separately (
this behavior may change in the future
This filter could be used to target other collections that are not directly related to the current
one (aka. there is no relation field pointing to it) but both shares a common field value, like
for example a category id:
In case you want to join the same collection multiple times but based on different criteria, you
can define an alias by appending
suffix to the collection name.
// see https://github.com/pocketbase/pocketbase/discussions/3805#discussioncomment-7634791
The syntax basically follows the format
- could be any field literal, string (single or double quoted),
number, null, true, false
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
To group and combine several expressions you can use parenthesis
Single line comments are also supported:
Special identifiers and modifiers
The following datetime macros are available and can be used as part of the filter expression:
// all macros are UTC based
@now        - the current datetime as string
@second     - @now second number (0-59)
@minute     - @now minute number (0-59)
@hour       - @now hour number (0-23)
@weekday    - @now weekday number (0-6)
@day        - @now day number
@month      - @now month number
@year       - @now year number
@yesterday  - the yesterday datetime relative to @now as string
@tomorrow   - the tomorrow datetime relative to @now as string
@todayStart - beginning of the current day as datetime string
@todayEnd   - end of the current day as datetime string
@monthStart - beginning of the current month as datetime string
@monthEnd   - end of the current month as datetime string
@yearStart  - beginning of the current year as datetime string
@yearEnd    - end of the current year as datetime string
field modifier is available only for the
fields and can be
used to check whether the client submitted a specific data with the request. Here is for example a rule that
disallows changing a "role" field:
@request.body.*:isset
at the moment doesn't support checking for
new uploaded files because they are evaluated separately and cannot be serialized (
this behavior may change in the future
field modifier could be used to check the number of items in an array field
(multiple
Could be used with both the collection schema fields and the
// check example submitted data: {"someSelectField": ["val1", "val2"]}
// check existing record field length
@request.body.*:length
at the moment doesn't support checking
for new uploaded files because they are evaluated separately and cannot be serialized (
this behavior may change in the future
field modifier works only with multiple
type fields. It could be used to apply a condition on each item from the field array. For example:
// check if all submitted select options contain the "create" text
// check if all existing someSelectField has "pb_" prefix
at the moment doesn't support checking for
new uploaded files because they are evaluated separately and cannot be serialized (
this behavior may change in the future
field modifier could be used to perform lower-case string comparisons. For example:
// check if the submitted lower-cased body "title" field is equal to "test" ("Test", "tEsT", etc.)
// match existing records with lower-cased "title" equal to "test" ("Test", "tEsT", etc.)
Under the hood it uses the
and by default works only for ASCII characters, unless the ICU extension is loaded.
geoDistance(lonA, latA, lonB, latB)
geoDistance(lonA, latA, lonB, latB)
function could be used to calculate the Haversine distance
between 2 geographic points in kilometres.
The function is intended to be used primarily with the
field type, but the accepted
arguments could be any plain number or collection field identifier. If the identifier cannot be resolved
and converted to a numeric value, it resolves to
function always results in a single row/record value meaning that "any/at-least-one-of"
type of constraint will be applied even if some of its arguments originate from a multiple relation field.
// offices that are less than 25km from my location (address is a geoPoint field in the offices collection)
Allow only registered users:
Allow only registered users and return records that are either "active" or "pending":
Allow only registered users who are listed in an
multi-relation field value:
Allow access by anyone and return only the records where the
field value starts with
"Lorem" (ex. "Lorem ipsum"):


--------------------------------------------------------------------------------

[13] Introduction - Working with relations
URL: https://pocketbase.io/docs/working-with-relations/
Category: database
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Introduction - Working with relations

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#overview" class="link-primary"> Overview </a>
<a href="#prependappend-to-multiple-relation" class="link-primary"> Prepend/Append to multiple relation </a>
<a href="#remove-from-multiple-relation" class="link-primary"> Remove from multiple relation </a>
<a href="#expanding-relations" class="link-primary"> Expanding relations </a>
<a href="#back-relations" class="link-primary"> Back-relations </a>
<a href="#back-relation-caveats" class="link-primary"> Back-relation caveats </a>
Let's assume that we have the following collections structure:
The <code>relation</code> fields follow the same rules as any other collection field and can be set/modified
by directly updating the field value - with a record id or array of ids, in case a multiple relation is used.
Below is an example that shows creating a new <strong>posts</strong> record with 2 assigned tags.
To prepend/append a single or multiple relation id(s) to an existing value you can use the
<code class="txt-bold">+</code> field modifier:
To remove a single or multiple relation id(s) from an existing value you can use the
<code class="txt-bold">-</code> field modifier:
You can also expand record relation fields directly in the returned response without making additional
requests by using the <code>expand</code> query parameter, e.g. <code>?expand=user,post.tags</code>
Only the relations that the request client can <strong>View</strong> (aka. satisfies the relation
collection's <strong>View API Rule</strong>) will be expanded.
Nested relation references in <code>expand</code>, <code>filter</code> or <code>sort</code> are supported
via dot-notation and up to 6-levels depth.
For example, to list all <strong>comments</strong> with their <strong>user</strong> relation expanded, we can
do the following:
PocketBase supports also <code>filter</code>, <code>sort</code> and <code>expand</code> for
<strong>back-relations</strong>
- relations where the associated <code>relation</code> field is not in the main collection.
The following notation is used: <code>referenceCollection<strong>_via_</strong>relField</code> (ex.
<code>comments_via_post</code>).
For example, let's list the <strong>posts</strong> that have at least one <strong>comments</strong> record
containing the word <em>"hello"</em>:
By default the back-relation reference is resolved as a dynamic
<em>multiple</em> relation field, even when the back-relation field itself is marked as
<em>single</em>.
<br>
This is because the main record could have more than one <em>single</em>
back-relation reference (see in the above example that the <code>comments_via_post</code>
expand is returned as array, although the original <code>comments.post</code> field is a
<em>single</em> relation).
<br>
The only case where the back-relation will be treated as a <em>single</em>
relation field is when there is
<code>UNIQUE</code> index constraint defined on the relation field.
Back-relation <code>expand</code> is limited to max 1000 records per relation field. If you
need to fetch larger number of back-related records a better approach could be to send a
separate paginated <code>getList()</code> request to the back-related collection to avoid transferring
large JSON payloads and to reduce the memory usage.
How to use PocketBase
API rules and filters
Files upload and handling
Working with relations
Collection operations
Collection operations
Sending HTTP requests
Introduction - Working with relations
Working with relations
Let's assume that we have the following collections structure:
fields follow the same rules as any other collection field and can be set/modified
by directly updating the field value - with a record id or array of ids, in case a multiple relation is used.
Below is an example that shows creating a new
record with 2 assigned tags.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Prepend/Append to multiple relation
To prepend/append a single or multiple relation id(s) to an existing value you can use the
'http://127.0.0.1:8090'
// prepend single tag
// append multiple tags at once
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// prepend single tag
// append multiple tags at once
Remove from multiple relation
To remove a single or multiple relation id(s) from an existing value you can use the
'http://127.0.0.1:8090'
// remove multiple tags at once
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// remove multiple tags at once
You can also expand record relation fields directly in the returned response without making additional
requests by using the
query parameter, e.g.
?expand=user,post.tags
Only the relations that the request client can
(aka. satisfies the relation
collection's
Nested relation references in
are supported
via dot-notation and up to 6-levels depth.
For example, to list all
relation expanded, we can
do the following:
"2022-01-01 01:00:00.456Z"
"2022-01-01 02:15:00.456Z"
"2022-01-01 00:00:00.000Z"
"2022-01-01 00:00:00.000Z"
PocketBase supports also
- relations where the associated
field is not in the main collection.
The following notation is used:
For example, let's list the
that have at least one
record
containing the word
"comments_via_post.message ?~ 'hello'"
"comments_via_post.user"
"comments_via_post.message ?~ 'hello'"
"comments_via_post.user"
"2022-01-01 01:00:00.456Z"
"2022-01-01 02:15:00.456Z"
"Lorem ipsum dolor sit..."
"2022-01-01 01:00:00.456Z"
"2022-01-01 02:15:00.456Z"
"2022-01-01 00:00:00.000Z"
"2022-01-01 00:00:00.000Z"
"2022-01-01 01:10:00.123Z"
"2022-01-01 02:39:00.456Z"
"2022-01-01 00:00:00.000Z"
"2022-01-01 00:00:00.000Z"
Back-relation caveats
By default the back-relation reference is resolved as a dynamic
relation field, even when the back-relation field itself is marked as
This is because the main record could have more than one
back-relation reference (see in the above example that the
expand is returned as array, although the original
The only case where the back-relation will be treated as a
relation field is when there is
index constraint defined on the relation field.
is limited to max 1000 records per relation field. If you
need to fetch larger number of back-related records a better approach could be to send a
separate paginated
request to the back-related collection to avoid transferring
large JSON payloads and to reduce the memory usage.
Prev: Files upload and handling
Next: Extending PocketBase


--------------------------------------------------------------------------------

[14] Introduction - Authentication
URL: https://pocketbase.io/docs/authentication/
Category: auth
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Introduction - Authentication

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#overview" class="link-primary"> Overview </a>
<a href="#authenticate-with-password" class="link-primary"> Authenticate with password </a>
<a href="#authenticate-with-otp" class="link-primary"> Authenticate with OTP </a>
<a href="#authenticate-with-oauth2" class="link-primary"> Authenticate with OAuth2 </a>
<a href="#multi-factor-authentication" class="link-primary"> Multi-factor authentication </a>
<a href="#users-impersonation" class="link-primary"> Users impersonation </a>
<a href="#api-keys" class="link-primary"> API keys </a>
<a href="#auth-token-verification" class="link-primary"> Auth token verification </a>
A single client is considered authenticated as long as it sends valid
<code>Authorization:YOUR_AUTH_TOKEN</code> header with the request.
The PocketBase Web APIs are fully stateless and there are no sessions in the traditional sense (even the
tokens are not stored in the database).
Because there are no sessions and we don't store the tokens on the server there is also no logout
endpoint. To "logout" a user you can simply disregard the token from your local state (aka.
<code>pb.authStore.clear()</code> if you use the SDKs).
The auth token could be generated either through the specific auth collection Web APIs or programmatically
via Go/JS.
All allowed auth collection methods can be configured individually from the specific auth collection
options.
Note that PocketBase admins (aka. <code>_superusers</code>) are similar to the regular auth
collection records with 2 caveats:
To authenticate with password you must enable the <em>Identity/Password</em> auth collection option
<em>(see also
<a href="/docs/api-records/#auth-with-password" target="_blank" class="txt-sm">Web API reference</a>
</em>.
The default identity field is the <code>email</code> but you can configure any other unique field like
"username" (it must have a UNIQUE index).
To authenticate with email code you must enable the <em>One-time password (OTP)</em>
auth collection option
<em>(see also
<a href="/docs/api-records/#auth-with-otp" target="_blank" class="txt-sm">Web API reference</a>
</em>.
The usual flow is the user typing manually the received password from their email but you can also
adjust the default email template from the collection options and add a url containing the OTP and its
id as query parameters
<em>(you have access to <code>{OTP}</code> and <code>{OTP_ID}</code> placeholders)
</em>.
Note that when requesting an OTP we return an <code>otpId</code> even if a user with the provided email
doesn't exist as a very rudimentary enumeration protection (it doesn't create or send anything).
On successful OTP validation, by default the related user email will be automatically marked as
"verified".
Keep in mind that OTP as a standalone authentication method could be less secure compared to the
other methods because the generated password is usually 0-9 digits and there is a risk of it being
guessed or enumerated (especially when a longer duration time is configured).
For security critical applications OTP is recommended to be used in combination with the other
auth methods and the <a href="#multi-factor-authentication">Multi-factor authentication</a> option.
You can also authenticate your users with an OAuth2 provider (Google, GitHub, Microsoft, etc.). See the
section below for example integrations.
Before starting, you'll need to create an OAuth2 app in the provider's dashboard in order to get a
<strong data-svelte-h="svelte-tpvj0y">Client Id</strong> and <strong data-svelte-h="svelte-1ozazg1">Client Secret</strong>, and register a redirect URL
<i class="ri-question-line link-hint"></i>.
Once you have obtained the <strong data-svelte-h="svelte-tpvj0y">Client Id</strong> and <strong data-svelte-h="svelte-1ozazg1">Client Secret</strong>, you can
enable and configure the provider from your PocketBase auth collection options (<em class="txt-sm">PocketBase > Collections > {YOUR_COLLECTION} > Edit collection (settings cogwheel) > Options
> OAuth2</em>).
This method handles everything within a single call without having to define custom redirects,
deeplinks or even page reload.
<strong>When creating your OAuth2 app, for a callback/redirect URL you have to use the
<code class="txt-bold">https://yourdomain.com/api/oauth2-redirect</code></strong>
(<em>or when testing locally - <code>http://127.0.0.1:8090/api/oauth2-redirect</code> </em>).
When authenticating manually with OAuth2 code you'll need 2 endpoints:
Here is a simple web example:
<strong>Links page</strong>
(e.g. https://127.0.0.1:8090 serving <code>pb_public/index.html</code>):
<strong>Redirect handler page</strong>
(e.g. https://127.0.0.1:8090/redirect.html serving
<code>pb_public/redirect.html</code>):
When using the "Manual code exchange" flow for sign-in with Apple your redirect
handler must accept <code>POST</code> requests in order to receive the name and the
email of the Apple user. If you just need the Apple user id, you can keep the redirect
handler <code>GET</code> but you'll need to replace in the Apple authorization url
<code>response_mode=form_post</code> with <code>response_mode=query</code>.
PocketBase v0.23+ introduced optional Multi-factor authentication (MFA).
If enabled, it requires the user to authenticate with any 2 different auth methods from above (the
order doesn't matter).
<br>
The expected flow is:
Below is an example for email/password + OTP authentication:
Superusers have the option to generate tokens and authenticate as anyone else via the
<a href="/docs/api-records#impersonate">Impersonate endpoint</a>
<strong>The generated impersonate auth tokens can have custom duration but are not renewable!</strong>
For convenience the official SDKs creates and returns a standalone client that keeps the token state
in memory, aka. only for the duration of the impersonate client instance.
While PocketBase doesn't have "API keys" in the traditional sense, as a side effect of the support for
users impersonation, for such cases you can use instead the generated nonrenewable
<code data-svelte-h="svelte-cvtvia">_superusers</code> impersonate auth token.
<br>
You can generate such token via the above impersonate API or from the
<em>Dashboard > Collections > _superusers > {select superuser} > "Impersonate" dropdown option</em>:
Because of the security implications (superusers can execute, access and modify anything), use the
generated <code>_superusers</code> tokens with extreme care and only for internal
<strong>server-to-server</strong> communication.
To invalidate already issued tokens, you need to change the individual superuser account password
(or if you want to reset the tokens for all superusers - change the shared auth token secret from
the <code>_superusers</code> collection options).
PocketBase doesn't have a dedicated token verification endpoint, but if you want to verify an existing
auth token from a 3rd party app you can send an
<a href="/docs/api-records/#auth-refresh">Auth refresh</a>
call, aka. <code>pb.collection("users").authRefresh()</code>.
On valid token - it returns a new token with refreshed <code>exp</code> claim and the latest user data.
Otherwise - returns an error response.
Note that calling <code>authRefresh</code> doesn't invalidate previously issued tokens and you can safely disregard
the new one if you don't need it (as mentioned in the beginning - PocketBase doesn't store the tokens on the
server).
Performance wise, the used <code>HS256</code> algorithm for generating the JWT has very little to no
impact and it is essentially the same in terms of response time as calling
<code>getOne("USER_ID")</code> <em>(see
<a href="https://github.com/pocketbase/benchmarks/blob/master/results/hetzner_cax11.md#user-auth-refresh" target="_blank" rel="noopener noreferrer">benchmarks
</a>)
</em>.
OAuth2 is not supported as auth method for the <code>_superusers</code> collection
Superusers can access and modify anything (collection API rules are ignored)
somewhere to show the "Login with ..." links
somewhere to handle the provider's redirect in order to exchange the auth code for token
<p data-svelte-h="svelte-1y3fri6"><strong>Links page</strong>
(e.g. https://127.0.0.1:8090 serving <code>pb_public/index.html</code>):</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token doctype"><span class="token punctuation"><!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>title</span><span class="token punctuation">></span></span>OAuth2 links page<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://code.jquery.com/jquery-3.7.1.slim.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation"></</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>li</span><span class="token punctuation">></span></span>Loading OAuth2 providers...<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>ul</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> PocketBase <span class="token keyword">from</span> <span class="token string">"https://cdn.jsdelivr.net/gh/pocketbase/js-sdk@master/dist/pocketbase.es.mjs"</span>
<span class="token keyword">const</span> pb          <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PocketBase</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8090"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> redirectURL <span class="token operator">=</span> <span class="token string">"http://127.0.0.1:8090/redirect.html"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> authMethods <span class="token operator">=</span> <span class="token keyword">await</span> pb<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listAuthMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> providers   <span class="token operator">=</span> authMethods<span class="token punctuation">.</span>oauth2<span class="token operator">?.</span>providers <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listItems   <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> provider <span class="token keyword">of</span> providers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> $li <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><li><a>Login with </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>provider<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></a></li></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$li<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> provider<span class="token punctuation">.</span>authURL <span class="token operator">+</span> redirectURL<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"provider"</span><span class="token punctuation">,</span> provider<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// store provider's data on click for verification in the redirect page</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"provider"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"provider"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
listItems<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>$li<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>listItems<span class="token punctuation">.</span>length <span class="token operator">?</span> listItems <span class="token operator">:</span> <span class="token string">"<li>No OAuth2 providers.</li>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation"></</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>html</span><span class="token punctuation">></span></span><!-- HTML_TAG_END --></code> </div>
<p data-svelte-h="svelte-1ldf0c7"><strong>Redirect handler page</strong>
(e.g. https://127.0.0.1:8090/redirect.html serving
<code>pb_public/redirect.html</code>):</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token doctype"><span class="token punctuation"><!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>title</span><span class="token punctuation">></span></span>OAuth2 redirect page<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>pre</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Authenticating...<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>pre</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> PocketBase <span class="token keyword">from</span> <span class="token string">"https://cdn.jsdelivr.net/gh/pocketbase/js-sdk@master/dist/pocketbase.es.mjs"</span>
<span class="token keyword">const</span> pb          <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PocketBase</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8090"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> redirectURL <span class="token operator">=</span> <span class="token string">"http://127.0.0.1:8090/redirect.html"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contentEl   <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// parse the query parameters from the redirected url</span>
<span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>searchParams<span class="token punctuation">;</span>
<span class="token comment">// load the previously stored provider's data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"provider"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// compare the redirect's state param and the stored provider's one</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>provider<span class="token punctuation">.</span>state <span class="token operator">!==</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
contentEl<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"State parameters don't match."</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
<span class="token comment">// authenticate</span>
pb<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authWithOAuth2Code</span><span class="token punctuation">(</span>
provider<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
provider<span class="token punctuation">.</span>codeVerifier<span class="token punctuation">,</span>
redirectURL<span class="token punctuation">,</span>
<span class="token comment">// pass any optional user create data</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">emailVisibility</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">authData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
contentEl<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>authData<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
contentEl<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"Failed to exchange code.\n"</span> <span class="token operator">+</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation"></</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation"></</span>html</span><span class="token punctuation">></span></span><!-- HTML_TAG_END --></code> </div>
User authenticates with "Auth method A".
On success, a 401 response is sent with <code>{"mfaId": "..."}</code> as JSON body (the MFA
"session" is stored in the <code data-svelte-h="svelte-1xjaodk">_mfas</code> system collection).
User authenticates with "Auth method B" as usual
<strong>but adds the <code>mfaId</code> from the previous step as body or query parameter</strong>.
On success, a regular auth response is returned, aka. token + auth record data.
How to use PocketBase
API rules and filters
Files upload and handling
Working with relations
Collection operations
Collection operations
Sending HTTP requests
Introduction - Authentication
A single client is considered authenticated as long as it sends valid
Authorization:YOUR_AUTH_TOKEN
header with the request.
The PocketBase Web APIs are fully stateless and there are no sessions in the traditional sense (even the
tokens are not stored in the database).
Because there are no sessions and we don't store the tokens on the server there is also no logout
endpoint. To "logout" a user you can simply disregard the token from your local state (aka.
if you use the SDKs).
The auth token could be generated either through the specific auth collection Web APIs or programmatically
via Go/JS.
All allowed auth collection methods can be configured individually from the specific auth collection
options.
Note that PocketBase admins (aka.
) are similar to the regular auth
collection records with 2 caveats:
OAuth2 is not supported as auth method for the
Superusers can access and modify anything (collection API rules are ignored)
Authenticate with password
To authenticate with password you must enable the
auth collection option
The default identity field is the
but you can configure any other unique field like
"username" (it must have a UNIQUE index).
'http://127.0.0.1:8090'
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
Authenticate with OTP
To authenticate with email code you must enable the
One-time password (OTP)
auth collection option
The usual flow is the user typing manually the received password from their email but you can also
adjust the default email template from the collection options and add a url containing the OTP and its
id as query parameters
Note that when requesting an OTP we return an
even if a user with the provided email
doesn't exist as a very rudimentary enumeration protection (it doesn't create or send anything).
On successful OTP validation, by default the related user email will be automatically marked as
"verified".
Keep in mind that OTP as a standalone authentication method could be less secure compared to the
other methods because the generated password is usually 0-9 digits and there is a risk of it being
guessed or enumerated (especially when a longer duration time is configured).
For security critical applications OTP is recommended to be used in combination with the other
auth methods and the
Multi-factor authentication
'http://127.0.0.1:8090'
// send OTP email to the provided auth record
// ... show a screen/popup to enter the password from the email ...
// authenticate with the requested OTP id and the email password
// after the above you can also access the auth data from the authStore
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// send OTP email to the provided auth record
// ... show a screen/popup to enter the password from the email ...
// authenticate with the requested OTP id and the email password
// after the above you can also access the auth data from the authStore
Authenticate with OAuth2
You can also authenticate your users with an OAuth2 provider (Google, GitHub, Microsoft, etc.). See the
section below for example integrations.
Before starting, you'll need to create an OAuth2 app in the provider's dashboard in order to get a
, and register a redirect URL
Once you have obtained the
, you can
enable and configure the provider from your PocketBase auth collection options (
PocketBase > Collections > {YOUR_COLLECTION} > Edit collection (settings cogwheel) > Options
> OAuth2
This method handles everything within a single call without having to define custom redirects,
deeplinks or even page reload.
When creating your OAuth2 app, for a callback/redirect URL you have to use the
https://yourdomain.com/api/oauth2-redirect
or when testing locally -
http://127.0.0.1:8090/api/oauth2-redirect
'https://pocketbase.io'
// open a popup window with the OAuth2 vendor page to authenticate.
// Once the external OAuth2 sign-in/sign-up flow is completed, the popup
// window will be automatically closed and the OAuth2 data sent back
// to the user through the previously established realtime connection.
// If the popup is being blocked on Safari, make sure that your click handler is not using async/await.
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
'package:pocketbase/pocketbase.dart'
'package:url_launcher/url_launcher.dart'
'https://pocketbase.io'
// call the provided urlCallback with the OAuth2 vendor url to authenticate.
// Once the external OAuth2 sign-in/sign-up flow is completed, the browser
// window will be automatically closed and the OAuth2 data sent back
// to the user through the previously established realtime connection.
// Note that it requires the app and realtime connection to remain active in the background!
// For Android 15+ check the note in https://github.com/pocketbase/dart-sdk#oauth2-and-android-15.
// or use flutter_custom_tabs to make the transitions between native and web content more seamless
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
When authenticating manually with OAuth2 code you'll need 2 endpoints:
somewhere to show the "Login with ..." links
somewhere to handle the provider's redirect in order to exchange the auth code for token
Here is a simple web example:
(e.g. https://127.0.0.1:8090 serving
width=device-width, initial-scale=1
https://code.jquery.com/jquery-3.7.1.slim.min.js
Loading OAuth2 providers...
"https://cdn.jsdelivr.net/gh/pocketbase/js-sdk@master/dist/pocketbase.es.mjs"
"http://127.0.0.1:8090"
"http://127.0.0.1:8090/redirect.html"
// store provider's data on click for verification in the redirect page
"<li>No OAuth2 providers.</li>"
Redirect handler page
(e.g. https://127.0.0.1:8090/redirect.html serving
pb_public/redirect.html
"https://cdn.jsdelivr.net/gh/pocketbase/js-sdk@master/dist/pocketbase.es.mjs"
"http://127.0.0.1:8090"
"http://127.0.0.1:8090/redirect.html"
// parse the query parameters from the redirected url
// load the previously stored provider's data
// compare the redirect's state param and the stored provider's one
"State parameters don't match."
// pass any optional user create data
"Failed to exchange code.\n"
When using the "Manual code exchange" flow for sign-in with Apple your redirect
handler must accept
requests in order to receive the name and the
email of the Apple user. If you just need the Apple user id, you can keep the redirect
handler
but you'll need to replace in the Apple authorization url
response_mode=form_post
Multi-factor authentication
PocketBase v0.23+ introduced optional Multi-factor authentication (MFA).
If enabled, it requires the user to authenticate with any 2 different auth methods from above (the
order doesn't matter).
The expected flow is:
User authenticates with "Auth method A".
On success, a 401 response is sent with
as JSON body (the MFA
"session" is stored in the
User authenticates with "Auth method B" as usual
from the previous step as body or query parameter
On success, a regular auth response is returned, aka. token + auth record data.
Below is an example for email/password + OTP authentication:
'http://127.0.0.1:8090'
// not mfa -> rethrow
// the user needs to authenticate again with another auth method, for example OTP
// ... show a modal for users to check their email and to enter the received code ...
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// not mfa -> rethrow
// the user needs to authenticate again with another auth method, for example OTP
// ... show a modal for users to check their email and to enter the received code ...
Superusers have the option to generate tokens and authenticate as anyone else via the
The generated impersonate auth tokens can have custom duration but are not renewable!
For convenience the official SDKs creates and returns a standalone client that keeps the token state
in memory, aka. only for the duration of the impersonate client instance.
'http://127.0.0.1:8090'
// authenticate as superuser
// (the custom token duration is in seconds and it is optional)
// log the impersonate token and user data
// send requests as the impersonated user
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// authenticate as superuser
// (the custom token duration is in seconds and it is optional)
// log the impersonate token and user data
// send requests as the impersonated user
While PocketBase doesn't have "API keys" in the traditional sense, as a side effect of the support for
users impersonation, for such cases you can use instead the generated nonrenewable
impersonate auth token.
You can generate such token via the above impersonate API or from the
Dashboard > Collections > _superusers > {select superuser} > "Impersonate" dropdown option
Because of the security implications (superusers can execute, access and modify anything), use the
generated
tokens with extreme care and only for internal
To invalidate already issued tokens, you need to change the individual superuser account password
(or if you want to reset the tokens for all superusers - change the shared auth token secret from
the
Auth token verification
PocketBase doesn't have a dedicated token verification endpoint, but if you want to verify an existing
auth token from a 3rd party app you can send an
pb.collection("users").authRefresh()
On valid token - it returns a new token with refreshed
claim and the latest user data.
Otherwise - returns an error response.
doesn't invalidate previously issued tokens and you can safely disregard
the new one if you don't need it (as mentioned in the beginning - PocketBase doesn't store the tokens on the
server).
Performance wise, the used
algorithm for generating the JWT has very little to no
impact and it is essentially the same in terms of response time as calling
Prev: API rules and filters
Next: Files upload and handling


--------------------------------------------------------------------------------

[15] Introduction - Files upload and handling
URL: https://pocketbase.io/docs/files-handling/
Category: files
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Introduction - Files upload and handling

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#uploading-files" class="link-primary"> Uploading files </a>
<a href="#deleting-files" class="link-primary"> Deleting files </a>
<a href="#file-url" class="link-primary"> File URL </a>
<a href="#protected-files" class="link-primary"> Protected files </a>
<a href="#storage-options" class="link-primary"> Storage options </a>
To upload files, you must first add a <code>file</code> field to your collection:
Once added, you could create/update a Record and upload "documents" files by sending a
<code>multipart/form-data</code> request using the <em>Records create/update APIs</em>.
Each uploaded file will be stored with the original filename (sanitized) and suffixed with a
random part (usually 10 characters). For example <code>test_52iwbgds7l.png</code>.
The max allowed size of a single file currently is limited to ~8GB (<small>2<sup>53</sup>-1 bytes</small>).
Here is an example how to create a new record and upload multiple files to the example "documents"
<code>file</code> field using the SDKs:
If your <code>file</code> field supports uploading multiple files (aka.
<strong>Max Files option is >= 2</strong>) you can use the <code>+</code> prefix/suffix field name modifier
to respectively prepend/append new files alongside the already uploaded ones. For example:
To delete uploaded file(s), you could either edit the Record from the Dashboard, or use the API and set
the file field to a zero-value <br> (empty string, <code>[]</code>).
If you want to <strong>delete individual file(s) from a multiple file upload field</strong>, you could
suffix the field name with <code>-</code> and specify the filename(s) you want to delete. Here are some examples
using the SDKs:
The above examples use the JSON object data format, but you could also use <code>FormData</code> instance
for <em>multipart/form-data</em> requests. If using
<code>FormData</code> set the file field to an empty string.
Each uploaded file could be accessed by requesting its file url:
<br>  <code class="txt-bold">http://127.0.0.1:8090/api/files/<span class="txt-danger">COLLECTION_ID_OR_NAME</span>/<span class="txt-info">RECORD_ID</span>/<span class="txt-success">FILENAME</span></code>
If your file field has the <strong>Thumb sizes</strong> option, you can get a thumb of the image file by
adding the <code>thumb</code>
query parameter to the url like this:
<code>http://127.0.0.1:8090/api/files/<span class="txt-danger">COLLECTION_ID_OR_NAME</span>/<span class="txt-info">RECORD_ID</span>/<span class="txt-success">FILENAME</span><strong>?thumb=100x300</strong></code> <br> <em>Currently limited to jpg, png, gif (its first frame) and partially webp (stored as png).</em>
The following thumb formats are currently supported:
The original file would be returned, if the requested thumb size is not found or the file is not an image!
If you already have a Record model instance, the SDKs provide a convenient method to generate a file url
by its name.
Additionally, to instruct the browser to always download the file instead of showing a preview when
accessed directly, you can append the <code>?download=1</code> query parameter to the file url.
By default all files are publicly accessible if you know their full url.
For most applications this is fine and reasonably safe because all files have a random part appended to
their name, but in some cases you may want an extra security to prevent unauthorized access to sensitive
files like ID card or Passport copies, contracts, etc.
To do this you can mark the <code>file</code> field as <em>Protected</em> from its field options in the
Dashboard and then request the file with a special <strong>short-lived file token</strong>.
Only requests that satisfy the <strong>View API rule</strong> of the record collection will be able
to access or download the protected file(s).
By default PocketBase stores uploaded files in the <code>pb_data/storage</code> directory on the local file
system. For the majority of cases this is usually the recommended storage option because it is very fast, easy
to work with and backup.
But if you have limited disk space you could switch to an external S3 compatible storage (AWS S3, MinIO,
Wasabi, DigitalOcean Spaces, Vultr Object Storage, etc.). The easiest way to set up the connection
settings is from the <em>Dashboard</em> > <em>Settings</em> > <em>Files storage</em>:
<strong>WxH</strong>
(e.g. 100x300) - crop to WxH viewbox (from center)
<strong>WxHt</strong>
(e.g. 100x300t) - crop to WxH viewbox (from top)
<strong>WxHb</strong>
(e.g. 100x300b) - crop to WxH viewbox (from bottom)
<strong>WxHf</strong>
(e.g. 100x300f) - fit inside a WxH viewbox (without cropping)
<strong>0xH</strong>
(e.g. 0x300) - resize to H height preserving the aspect ratio
<strong>Wx0</strong>
(e.g. 100x0) - resize to W width preserving the aspect ratio
How to use PocketBase
API rules and filters
Files upload and handling
Working with relations
Collection operations
Collection operations
Sending HTTP requests
Introduction - Files upload and handling
Files upload and handling
To upload files, you must first add a
field to your collection:
Once added, you could create/update a Record and upload "documents" files by sending a
Records create/update APIs
Each uploaded file will be stored with the original filename (sanitized) and suffixed with a
random part (usually 10 characters). For example
The max allowed size of a single file currently is limited to ~8GB (
Here is an example how to create a new record and upload multiple files to the example "documents"
field using the SDKs:
'http://127.0.0.1:8090'
// create a new record and upload multiple files
// (files must be Blob or File instances)
// regular text field
// -----------------------------------------------------------
// Alternative FormData + plain HTML file input example
// <input type="file" id="fileInput" />
// -----------------------------------------------------------
// set regular text field
// listen to file input changes and add the selected files to the form data
// upload and create new record
'package:pocketbase/pocketbase.dart'
'package:http/http.dart'
'http://127.0.0.1:8090'
// create a new record and upload multiple files
// regular text field
'example content 1...'
'example content 2...'
field supports uploading multiple files (aka.
Max Files option is >= 2
prefix/suffix field name modifier
to respectively prepend/append new files alongside the already uploaded ones. For example:
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'package:http/http.dart'
'http://127.0.0.1:8090'
'example content 3...'
To delete uploaded file(s), you could either edit the Record from the Dashboard, or use the API and set
the file field to a zero-value
delete individual file(s) from a multiple file upload field
, you could
suffix the field name with
and specify the filename(s) you want to delete. Here are some examples
using the SDKs:
'http://127.0.0.1:8090'
// delete all "documents" files
// delete individual files
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// delete all "documents" files
// delete individual files
The above examples use the JSON object data format, but you could also use
set the file field to an empty string.
Each uploaded file could be accessed by requesting its file url:
http://127.0.0.1:8090/api/files/
COLLECTION_ID_OR_NAME
If your file field has the
option, you can get a thumb of the image file by
adding the
query parameter to the url like this:
http://127.0.0.1:8090/api/files/
COLLECTION_ID_OR_NAME
Currently limited to jpg, png, gif (its first frame) and partially webp (stored as png).
The following thumb formats are currently supported:
(e.g. 100x300) - crop to WxH viewbox (from center)
(e.g. 100x300t) - crop to WxH viewbox (from top)
(e.g. 100x300b) - crop to WxH viewbox (from bottom)
(e.g. 100x300f) - fit inside a WxH viewbox (without cropping)
(e.g. 0x300) - resize to H height preserving the aspect ratio
(e.g. 100x0) - resize to W width preserving the aspect ratio
The original file would be returned, if the requested thumb size is not found or the file is not an image!
If you already have a Record model instance, the SDKs provide a convenient method to generate a file url
by its name.
'http://127.0.0.1:8090'
// get only the first filename from "documents"
// "documents" is an array of filenames because
// the "documents" field was created with "Max Files" option > 1;
// if "Max Files" was 1, then the result property would be just a string
// returns something like:
// http://127.0.0.1:8090/api/files/example/kfzjt5oy8r34hvn/test_52iWbGinWd.png?thumb=100x250
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// get only the first filename from "documents"
// "documents" is an array of filenames because
// the "documents" field was created with "Max Files" option > 1;
// if "Max Files" was 1, then the result property would be just a string
// returns something like:
// http://127.0.0.1:8090/api/files/example/kfzjt5oy8r34hvn/test_52iWbGinWd.png?thumb=100x250
Additionally, to instruct the browser to always download the file instead of showing a preview when
accessed directly, you can append the
query parameter to the file url.
By default all files are publicly accessible if you know their full url.
For most applications this is fine and reasonably safe because all files have a random part appended to
their name, but in some cases you may want an extra security to prevent unauthorized access to sensitive
files like ID card or Passport copies, contracts, etc.
To do this you can mark the
from its field options in the
Dashboard and then request the file with a special
short-lived file token
Only requests that satisfy the
of the record collection will be able
to access or download the protected file(s).
'http://127.0.0.1:8090'
// generate a file token
// retrieve an example protected file url (will be valid ~2min)
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// generate a file token
// retrieve an example protected file url (will be valid ~2min)
By default PocketBase stores uploaded files in the
directory on the local file
system. For the majority of cases this is usually the recommended storage option because it is very fast, easy
to work with and backup.
But if you have limited disk space you could switch to an external S3 compatible storage (AWS S3, MinIO,
Wasabi, DigitalOcean Spaces, Vultr Object Storage, etc.). The easiest way to set up the connection
settings is from the
Next: Working with relations


--------------------------------------------------------------------------------

[16] Web APIs reference - API Collections
URL: https://pocketbase.io/docs/api-collections/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- page (Number): The page (aka. offset) of the paginated list (default to 1).
- perPage (Number): The max returned collections per page (default to 30).
- sort (String): Specify the ORDER BY fields. Add - / + (default) in front of the attribute for DESC /
ASC order, e.g.: // DESC by created and ASC by id
?sort=-created,id  Supported collection sort fields:  @random, id, created,
updated, name, type,
system
- filter (String): Filter expression to filter/search the returned collections list, e.g.: ?filter=(name~'abc' && created>'2022-01-01')  Supported collection filter fields:  id, created, updated,
name, type, system The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- skipTotal (Boolean): If it is set the total counts query will be skipped and the response fields
totalItems and totalPages will have -1 value.
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
For optimization purposes, it is set by default for the
getFirstListItem()
and
getFullList() SDKs methods.
- collectionIdOrName (String): ID or name of the collection to view.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the collection to view.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the collection to view.
- collectionIdOrName (String): ID or name of the collection to truncate.
- Required collections (Array<Collection>): List of collections to import (replace and create).
- Optional deleteMissing (Boolean): If true all existing collections and schema fields that are not present in the
imported configuration will be deleted, including their related records
data (default to
false).

Content:
# Web APIs reference - API Collections

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Parameters

- **page** (Number): The page (aka. offset) of the paginated list (default to 1).
- **perPage** (Number): The max returned collections per page (default to 30).
- **sort** (String): Specify the ORDER BY fields. Add - / + (default) in front of the attribute for DESC /
ASC order, e.g.: // DESC by created and ASC by id
?sort=-created,id  Supported collection sort fields:  @random, id, created,
updated, name, type,
system
- **filter** (String): Filter expression to filter/search the returned collections list, e.g.: ?filter=(name~'abc' && created>'2022-01-01')  Supported collection filter fields:  id, created, updated,
name, type, system The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **skipTotal** (Boolean): If it is set the total counts query will be skipped and the response fields
totalItems and totalPages will have -1 value.
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
For optimization purposes, it is set by default for the
getFirstListItem()
and
getFullList() SDKs methods.
- **collectionIdOrName** (String): ID or name of the collection to view.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the collection to view.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the collection to view.
- **collectionIdOrName** (String): ID or name of the collection to truncate.
- **Required collections** (Array<Collection>): List of collections to import (replace and create).
- **Optional deleteMissing** (Boolean): If true all existing collections and schema fields that are not present in the
imported configuration will be deleted, including their related records
data (default to
false).

## Content

API details
API details
API details
API details
API details
API details
API details
API details
Returns a paginated Collections list.
Only superusers can perform this action.
Specify the <em>ORDER BY</em> fields.
Add <code>-</code> / <code>+</code> (default) in front of the attribute for DESC /
ASC order, e.g.:
<strong>Supported collection sort fields:</strong> <br> <code>@random</code>, <code>id</code>, <code>created</code>,
<code>updated</code>, <code>name</code>, <code>type</code>,
<code>system</code>
Filter expression to filter/search the returned collections list, e.g.:
<strong>Supported collection filter fields:</strong> <br> <code>id</code>, <code>created</code>, <code>updated</code>,
<code>name</code>, <code>type</code>, <code>system</code>
The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:
To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.
Single line comments are also supported: <code>// Example comment</code>.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Returns a single Collection by its ID or name.
Only superusers can perform this action.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Creates a new Collection.
Only superusers can perform this action.
Body parameters could be sent as <em>JSON</em> or <em>multipart/form-data</em>.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Updates a single Collection by its ID or name.
Only superusers can perform this action.
Body parameters could be sent as <em>JSON</em> or <em>multipart/form-data</em>.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Deletes a single Collection by its ID or name.
Only superusers can perform this action.
Deletes all the records of a single collection (including their related files and cascade delete
enabled relations).
Only superusers can perform this action.
Bulk imports the provided <em>Collections</em> configuration.
Only superusers can perform this action.
Returns an object will all of the collection types and their default fields
<em>(used primarily in the Dashboard UI)</em>.
Only superusers can perform this action.
<code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false
<code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<span class="label">Number</span>
The page (aka. offset) of the paginated list (<em>default to 1</em>).
<span class="label">Number</span>
The max returned collections per page (<em>default to 30</em>).
<span class="label">String</span>
<div class="content"><p data-svelte-h="svelte-fsqjhd">Specify the <em>ORDER BY</em> fields.</p> <p data-svelte-h="svelte-enjd8e">Add <code>-</code> / <code>+</code> (default) in front of the attribute for DESC /
ASC order, e.g.:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// DESC by created and ASC by id</span>
<span class="token operator">?</span>sort<span class="token operator">=</span><span class="token operator">-</span>created<span class="token punctuation">,</span>id<!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-pqi2k5"><strong>Supported collection sort fields:</strong> <br> <code>@random</code>, <code>id</code>, <code>created</code>,
<code>updated</code>, <code>name</code>, <code>type</code>,
<code>system</code></p></div>
<span class="label">String</span>
<div class="content"><p data-svelte-h="svelte-1pionnt">Filter expression to filter/search the returned collections list, e.g.:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>filter<span class="token operator">=</span><span class="token punctuation">(</span>name<span class="token operator">~</span><span class="token string">'abc'</span> <span class="token operator">&&</span> created<span class="token operator">></span><span class="token string">'2022-01-01'</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-167lf77"><strong>Supported collection filter fields:</strong> <br> <code>id</code>, <code>created</code>, <code>updated</code>,
<code>name</code>, <code>type</code>, <code>system</code></p> <p data-svelte-h="svelte-jz4nkm">The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:</p> <ul><li data-svelte-h="svelte-wi187q"><code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false</li> <li><code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li></ul></li></ul> <p class="txt-bold" data-svelte-h="svelte-1hh5whd">To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.</p> <p data-svelte-h="svelte-1bcgelt">Single line comments are also supported: <code>// Example comment</code>.</p></div>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<span class="label">Boolean</span>
If it is set the total counts query will be skipped and the response fields
<code>totalItems</code> and <code>totalPages</code> will have <code>-1</code> value.
<br>
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
<br>
For optimization purposes, it is set by default for the
<code>getFirstListItem()</code>
and
<code>getFullList()</code> SDKs methods.
collectionIdOrName
<span class="label">String</span>
ID or name of the collection to view.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the collection to view.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the collection to view.
collectionIdOrName
<span class="label">String</span>
ID or name of the collection to truncate.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">collections</span></div>
<span class="label">Array<Collection></span>
List of collections to import (replace and create).
<div class="inline-flex"><span class="label label-warning">Optional</span> <span class="txt">deleteMissing</span></div>
<span class="label">Boolean</span>
If <em>true</em> all existing collections and schema fields that are not present in the
imported configuration <strong>will be deleted</strong>, including their related records
data (default to
<em>false</em>).
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Collections
Returns a paginated Collections list.
Only superusers can perform this action.
'http://127.0.0.1:8090'
// fetch a paginated collections list
'created >= "2022-01-01 00:00:00"'
// you can also fetch all collections at once via getFullList
// or fetch only the first collection that matches the specified filter
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// fetch a paginated collections list
'created >= "2022-01-01 00:00:00"'
// you can also fetch all collections at once via getFullList
// or fetch only the first collection that matches the specified filter
The page (aka. offset) of the paginated list (
The max returned collections per page (
(default) in front of the attribute for DESC /
ASC order, e.g.:
// DESC by created and ASC by id
Supported collection sort fields:
Filter expression to filter/search the returned collections list, e.g.:
Supported collection filter fields:
The syntax basically follows the format
- could be any field literal, string (single or double quoted),
number, null, true, false
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
To group and combine several expressions you can use parenthesis
Single line comments are also supported:
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
If it is set the total counts query will be skipped and the response fields
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
For optimization purposes, it is set by default for the
"autogeneratePattern"
"autogeneratePattern"
"autogeneratePattern"
"CREATE UNIQUE INDEX `idx_tokenKey__pbc_344172009` ON `users` (`tokenKey`)"
"CREATE UNIQUE INDEX `idx_email__pbc_344172009` ON `users` (`email`) WHERE `email` != ''"
"Login from a new location"
"verificationTemplate"
"Verify your {APP_NAME} email"
"resetPasswordTemplate"
"Reset your {APP_NAME} password"
"confirmEmailChangeTemplate"
"Confirm your {APP_NAME} new email address"
"autogeneratePattern"
"autogeneratePattern"
"Something went wrong while processing your request. Invalid filter."
"The request requires valid record authorization token."
"Only superusers can perform this action."
Returns a single Collection by its ID or name.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID or name of the collection to view.
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"autogeneratePattern"
"autogeneratePattern"
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
"The requested resource wasn't found."
Creates a new Collection.
Only superusers can perform this action.
'http://127.0.0.1:8090'
// create base collection
// create auth collection
'id = @request.auth.id'
'id = @request.auth.id'
'id = @request.auth.id'
// create view collection
'@request.auth.id != ""'
// the schema will be autogenerated from the below query
'SELECT id, name from posts'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// create base collection
// create auth collection
'id = @request.auth.id'
'id = @request.auth.id'
'id = @request.auth.id'
// create view collection
'@request.auth.id != ""'
// the schema will be autogenerated from the below query
'SELECT id, name from posts'
Body parameters could be sent as
// 15 characters string to store as collection ID.
// If not set, it will be auto generated.
// Unique collection name (used as a table name for the records table).
// Type of the collection.
// If not set, the collection type will be "base" by default.
// List with the collection fields.
// This field is optional and autopopulated for "view" collections based on the viewQuery.
// The collection indexes and unique constraints.
// Note that "view" collections don't support indexes.
// Marks the collection as "system" to prevent being renamed, deleted or modify its API rules.
// -------------------------------------------------------
// -------------------------------------------------------
// -------------------------------------------------------
// -------------------------------------------------------
// API rule that gives admin-like permissions to allow fully managing the auth record(s),
// e.g. changing the password without requiring to enter the old one, directly updating the
// verified state or email, etc. This rule is executed in addition to the createRule and updateRule.
// API rule that could be used to specify additional record constraints applied after record
// authentication and right before returning the auth token response to the client.
// For example, to allow only verified users you could set it to "verified = true".
// Set it to empty string to allow any Auth collection record to authenticate.
// Set it to null to disallow authentication altogether for the collection.
// AuthAlert defines options related to the auth alerts on new device login.
// OAuth2 specifies whether OAuth2 auth is enabled for the collection
// and which OAuth2 providers are allowed.
// PasswordAuth defines options related to the collection password authentication.
// MFA defines options related to the Multi-factor authentication (MFA).
// OTP defines options related to the One-time password authentication (OTP).
// Token configurations.
// Default email templates.
resetPasswordTemplate
confirmEmailChangeTemplate
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"autogeneratePattern"
"autogeneratePattern"
"An error occurred while submitting the form."
"validation_required"
"Missing required value."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Updates a single Collection by its ID or name.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'created > "2022-01-01 00:00:00"'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
'created > "2022-01-01 00:00:00"'
ID or name of the collection to view.
Body parameters could be sent as
// Unique collection name (used as a table name for the records table).
// List with the collection fields.
// This field is optional and autopopulated for "view" collections based on the viewQuery.
// The collection indexes and unique constriants.
// Note that "view" collections don't support indexes.
// Marks the collection as "system" to prevent being renamed, deleted or modify its API rules.
// -------------------------------------------------------
// -------------------------------------------------------
// -------------------------------------------------------
// -------------------------------------------------------
// API rule that gives admin-like permissions to allow fully managing the auth record(s),
// e.g. changing the password without requiring to enter the old one, directly updating the
// verified state or email, etc. This rule is executed in addition to the createRule and updateRule.
// API rule that could be used to specify additional record constraints applied after record
// authentication and right before returning the auth token response to the client.
// For example, to allow only verified users you could set it to "verified = true".
// Set it to empty string to allow any Auth collection record to authenticate.
// Set it to null to disallow authentication altogether for the collection.
// AuthAlert defines options related to the auth alerts on new device login.
// OAuth2 specifies whether OAuth2 auth is enabled for the collection
// and which OAuth2 providers are allowed.
// PasswordAuth defines options related to the collection password authentication.
// MFA defines options related to the Multi-factor authentication (MFA).
// OTP defines options related to the One-time password authentication (OTP).
// Token configurations.
// Default email templates.
resetPasswordTemplate
confirmEmailChangeTemplate
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"autogeneratePattern"
"autogeneratePattern"
"An error occurred while submitting the form."
"validation_required"
"Missing required value."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Deletes a single Collection by its ID or name.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID or name of the collection to view.
"Failed to delete collection. Make sure that the collection is not referenced by other collections."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
"The requested resource wasn't found."
Deletes all the records of a single collection (including their related files and cascade delete
enabled relations).
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID or name of the collection to truncate.
"Failed to truncate collection (most likely due to required cascade delete record references)."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
"The requested resource wasn't found."
Bulk imports the provided
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
/api/collections/import
List of collections to import (replace and create).
all existing collections and schema fields that are not present in the
imported configuration
, including their related records
data (default to
Body parameters could be sent as
"An error occurred while submitting the form."
"collections_import_failure"
"Failed to import the collections configuration."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Returns an object will all of the collection types and their default fields
(used primarily in the Dashboard UI)
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
/api/collections/meta/scaffolds
"autogeneratePattern"
"autogeneratePattern"
"CREATE UNIQUE INDEX `idx_tokenKey_hclGvwhtqG` ON `test` (`tokenKey`)"
"CREATE UNIQUE INDEX `idx_email_eyxYyd3gp1` ON `test` (`email`) WHERE `email` != ''"
"Login from a new location"
"verificationTemplate"
"Verify your {APP_NAME} email"
"resetPasswordTemplate"
"Reset your {APP_NAME} password"
"confirmEmailChangeTemplate"
"Confirm your {APP_NAME} new email address"
"autogeneratePattern"
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
"The requested resource wasn't found."


--------------------------------------------------------------------------------

[17] Web APIs reference - API Records
URL: https://pocketbase.io/docs/api-records/
Category: api
API Endpoint: POST /api/collections/{collection}/records
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- collectionIdOrName (String): ID or name of the records' collection.
- page (Number): The page (aka. offset) of the paginated list (default to 1).
- perPage (Number): The max returned records per page (default to 30).
- sort (String): Specify the ORDER BY fields. Add - / + (default) in front of the attribute for DESC /
ASC order, eg.: // DESC by created and ASC by id
?sort=-created,id  Supported record sort fields:  @random, @rowid, id,
and any other collection field.
- filter (String): Filter expression to filter/search the returned records list (in addition to the
collection's listRule), e.g.: ?filter=(title~'abc' && created>'2022-01-01')  Supported record filter fields:  id, + any field from the collection schema. The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- skipTotal (Boolean): If it is set the total counts query will be skipped and the response fields
totalItems and totalPages will have -1 value.
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
For optimization purposes, it is set by default for the
getFirstListItem()
and
getFullList() SDKs methods.
- collectionIdOrName (String): ID or name of the record's collection.
- recordId (String): ID of the record to view.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the record's collection.
- Optional id (String): 15 characters string to store as record ID.
If not set, it will be auto generated.
- Required password (String): Auth record password.
- Required passwordConfirm (String): Auth record password confirmation.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the record's collection.
- recordId (String): ID of the record to update.
- Optional oldPassword (String) (required): Old auth record password.
This field is required only when changing the record password. Superusers and auth records
with "Manage" access can skip this field.
- Optional password (String): New auth record password.
- Optional passwordConfirm (String): New auth record password confirmation.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the record's collection.
- recordId (String): ID of the record to delete.
- Required requests (Array<Request> - List of the requests to process.
The supported batch request actions are: record create - POST /api/collections/{collection}/records record update -
PATCH /api/collections/{collection}/records/{id} record upsert - PUT /api/collections/{collection}/records  (the body must have id field) record delete -
DELETE /api/collections/{collection}/records/{id} Each batch Request element have the following properties: url path (could include query parameters) method (GET, POST, PUT, PATCH, DELETE) headers  (custom per-request Authorization header is not supported at the moment,
aka. all batch requests have the same auth state) body NB! When the batch request is send as
multipart/form-data, the regular batch action fields are expected to be
submitted as serialized json under the @jsonPayload field and file keys
need to follow the pattern requests.N.fileField or
requests[N].fileField (this is usually handled transparently by the SDKs when their specific object
notation is used)
If you don't use the SDKs or prefer manually to construct the FormData
body, then it could look something like:
const formData = new FormData();
formData.append("@jsonPayload", JSON.stringify({
requests: [
method: "POST",
url: "/api/collections/example/records?expand=user",
body: { title: "test1" },
},
method: "PATCH",
url: "/api/collections/example/records/RECORD_ID",
body: { title: "test2" },
},
method: "DELETE",
url: "/api/collections/example/records/RECORD_ID",
},
}))
// file for the first request
formData.append("requests.0.document", new File(...))
// file for the second request
formData.append("requests.1.document", new File(...))): 
- collectionIdOrName (String): ID or name of the auth collection.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the auth collection.
- Required identity (String): Auth record username or email address.
- Required password (String): Auth record password.
- Optional identityField (String): A specific identity field to use (by default fallbacks to the first matching one).
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the auth collection.
- Required provider (String): The name of the OAuth2 client provider (e.g. "google").
- Required code (String): The authorization code returned from the initial request.
- Required codeVerifier (String): The code verifier sent with the initial request as part of the code_challenge.
- Required redirectUrl (String): The redirect url sent with the initial request.
- Optional createData (Object): Optional data that will be used when creating the auth record on OAuth2 sign-up. The created auth record must comply with the same requirements and validations in the
regular create action.
The data can only be in json, aka. multipart/form-data and
files upload currently are not supported during OAuth2 sign-ups.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the auth collection.
- Required email (String): The auth record email address to send the OTP request (if exists).
- collectionIdOrName (String): ID or name of the auth collection.
- Required otpId (String): The id of the OTP request.
- Required password (String): The one-time password.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- collectionIdOrName (String): ID or name of the auth collection.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- Required email (String): The auth record email address to send the verification request (if exists).
- Required token (String): The token from the verification request email.
- Required email (String): The auth record email address to send the password reset request (if exists).
- Required token (String): The token from the password reset request email.
- Required password (String): The new password to set.
- Required passwordConfirm (String): The new password confirmation.
- Required newEmail (String): The new email address to send the change email request.
- Required token (String): The token from the change email request email.
- Required password (String): The account password to confirm the email change.
- collectionIdOrName (String): ID or name of the auth collection.
- id (String): ID of the auth record to impersonate.
- Optional duration (Number): Optional custom JWT duration for the exp claim (in seconds).
If not set or 0, it fallbacks to the default collection auth token duration option.
- expand (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)

Content:
# Web APIs reference - API Records

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

**API Endpoint:** `POST /api/collections/{collection}/records`

## Parameters

- **collectionIdOrName** (String): ID or name of the records' collection.
- **page** (Number): The page (aka. offset) of the paginated list (default to 1).
- **perPage** (Number): The max returned records per page (default to 30).
- **sort** (String): Specify the ORDER BY fields. Add - / + (default) in front of the attribute for DESC /
ASC order, eg.: // DESC by created and ASC by id
?sort=-created,id  Supported record sort fields:  @random, @rowid, id,
and any other collection field.
- **filter** (String): Filter expression to filter/search the returned records list (in addition to the
collection's listRule), e.g.: ?filter=(title~'abc' && created>'2022-01-01')  Supported record filter fields:  id, + any field from the collection schema. The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **skipTotal** (Boolean): If it is set the total counts query will be skipped and the response fields
totalItems and totalPages will have -1 value.
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
For optimization purposes, it is set by default for the
getFirstListItem()
and
getFullList() SDKs methods.
- **collectionIdOrName** (String): ID or name of the record's collection.
- **recordId** (String): ID of the record to view.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the record's collection.
- **Optional id** (String): 15 characters string to store as record ID.
If not set, it will be auto generated.
- **Required password** (String): Auth record password.
- **Required passwordConfirm** (String): Auth record password confirmation.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the record's collection.
- **recordId** (String): ID of the record to update.
- **Optional oldPassword** (String) (required): Old auth record password.
This field is required only when changing the record password. Superusers and auth records
with "Manage" access can skip this field.
- **Optional password** (String): New auth record password.
- **Optional passwordConfirm** (String): New auth record password confirmation.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the record's collection.
- **recordId** (String): ID of the record to delete.
- **Required requests** (Array<Request> - List of the requests to process.
The supported batch request actions are: record create - POST /api/collections/{collection}/records record update -
PATCH /api/collections/{collection}/records/{id} record upsert - PUT /api/collections/{collection}/records  (the body must have id field) record delete -
DELETE /api/collections/{collection}/records/{id} Each batch Request element have the following properties: url path (could include query parameters) method (GET, POST, PUT, PATCH, DELETE) headers  (custom per-request Authorization header is not supported at the moment,
aka. all batch requests have the same auth state) body NB! When the batch request is send as
multipart/form-data, the regular batch action fields are expected to be
submitted as serialized json under the @jsonPayload field and file keys
need to follow the pattern requests.N.fileField or
requests[N].fileField (this is usually handled transparently by the SDKs when their specific object
notation is used)
If you don't use the SDKs or prefer manually to construct the FormData
body, then it could look something like:
const formData = new FormData();
formData.append("@jsonPayload", JSON.stringify({
requests: [
method: "POST",
url: "/api/collections/example/records?expand=user",
body: { title: "test1" },
},
method: "PATCH",
url: "/api/collections/example/records/RECORD_ID",
body: { title: "test2" },
},
method: "DELETE",
url: "/api/collections/example/records/RECORD_ID",
},
}))
// file for the first request
formData.append("requests.0.document", new File(...))
// file for the second request
formData.append("requests.1.document", new File(...))): 
- **collectionIdOrName** (String): ID or name of the auth collection.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the auth collection.
- **Required identity** (String): Auth record username or email address.
- **Required password** (String): Auth record password.
- **Optional identityField** (String): A specific identity field to use (by default fallbacks to the first matching one).
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the auth collection.
- **Required provider** (String): The name of the OAuth2 client provider (e.g. "google").
- **Required code** (String): The authorization code returned from the initial request.
- **Required codeVerifier** (String): The code verifier sent with the initial request as part of the code_challenge.
- **Required redirectUrl** (String): The redirect url sent with the initial request.
- **Optional createData** (Object): Optional data that will be used when creating the auth record on OAuth2 sign-up. The created auth record must comply with the same requirements and validations in the
regular create action.
The data can only be in json, aka. multipart/form-data and
files upload currently are not supported during OAuth2 sign-ups.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the auth collection.
- **Required email** (String): The auth record email address to send the OTP request (if exists).
- **collectionIdOrName** (String): ID or name of the auth collection.
- **Required otpId** (String): The id of the OTP request.
- **Required password** (String): The one-time password.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- **collectionIdOrName** (String): ID or name of the auth collection.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)
- **Required email** (String): The auth record email address to send the verification request (if exists).
- **Required token** (String): The token from the verification request email.
- **Required email** (String): The auth record email address to send the password reset request (if exists).
- **Required token** (String): The token from the password reset request email.
- **Required password** (String): The new password to set.
- **Required passwordConfirm** (String): The new password confirmation.
- **Required newEmail** (String): The new email address to send the change email request.
- **Required token** (String): The token from the change email request email.
- **Required password** (String): The account password to confirm the email change.
- **collectionIdOrName** (String): ID or name of the auth collection.
- **id** (String): ID of the auth record to impersonate.
- **Optional duration** (Number): Optional custom JWT duration for the exp claim (in seconds).
If not set or 0, it fallbacks to the default collection auth token duration option.
- **expand** (String): Auto expand record relations. Ex.:
?expand=relField1,relField2.subRelField
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
expand property (e.g. "expand": {"relField1": {...}, ...}).
Only the relations to which the request user has permissions to view will be expanded.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,record.expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,record.description:excerpt(200,true)

## Content

<a href="#crud-actions" class="link-primary"> CRUD actions </a>
<a href="#auth-record-actions" class="link-primary"> Auth record actions </a>
API details
API details
API details
API details
API details
API details
API details
API details
API details
API details
API details
API details
API details
API details
API details
Returns a paginated records list, supporting sorting and filtering.
Depending on the collection's <code>listRule</code> value, the access to this action may or may not
have been restricted.
<em>You could find individual generated records API documentation in the "Dashboard > Collections
> API Preview".</em>
Specify the <em>ORDER BY</em> fields.
Add <code>-</code> / <code>+</code> (default) in front of the attribute for DESC /
ASC order, eg.:
<strong>Supported record sort fields:</strong> <br> <code>@random</code>, <code>@rowid</code>, <code>id</code>,
<strong>and any other collection field</strong>.
Filter expression to filter/search the returned records list (in addition to the
collection's <code>listRule</code>), e.g.:
<strong>Supported record filter fields:</strong> <br> <code>id</code>, <strong>+ any field from the collection schema</strong>.
The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:
To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.
Single line comments are also supported: <code>// Example comment</code>.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Returns a single collection record by its ID.
Depending on the collection's <code>viewRule</code> value, the access to this action may or may not
have been restricted.
<em>You could find individual generated records API documentation in the "Dashboard > Collections
> API Preview".</em>
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Creates a new collection <em>Record</em>.
Depending on the collection's <code>createRule</code> value, the access to this action may or may not
have been restricted.
<em>You could find individual generated records API documentation from the Dashboard.</em>
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Updates an existing collection <em>Record</em>.
Depending on the collection's <code>updateRule</code> value, the access to this action may or may not
have been restricted.
<em>You could find individual generated records API documentation from the Dashboard.</em>
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Deletes a single collection <em>Record</em> by its ID.
Depending on the collection's <code>deleteRule</code> value, the access to this action may or may not
have been restricted.
<em>You could find individual generated records API documentation from the Dashboard.</em>
Batch and transactional create/update/upsert/delete of multiple records in a single request.
The batch Web API need to be explicitly enabled and configured from the
<em>Dashboard > Settings > Application</em>.
Because this endpoint processes the requests in a single read&write transaction, other queries
may queue up and it could degrade the performance of your application if not used with proper
care and configuration
<em>(some recommendations: prefer using the smallest possible max processing time and body
size limits; avoid large file uploads over slow S3 networks and custom hooks that
communicate with slow external APIs)</em>.
Body parameters could be sent as <em>application/json</em> or <em>multipart/form-data</em>.
<br>
File upload is supported only via <em>multipart/form-data</em> (see below for more details).
The supported batch request actions are:
Each batch Request element have the following properties:
<strong data-svelte-h="svelte-xib1lb">NB!</strong> When the batch request is send as
<code data-svelte-h="svelte-1cwtelc">multipart/form-data</code>, the regular batch action fields are expected to be
submitted as serialized json under the <code data-svelte-h="svelte-ayz09k">@jsonPayload</code> field and file keys
need to follow the pattern <code data-svelte-h="svelte-6opb32">requests.N.fileField</code> or
<code data-svelte-h="svelte-8e6og0">requests[N].fileField</code> <em data-svelte-h="svelte-v3c4jm">(this is usually handled transparently by the SDKs when their specific object
notation is used)
</em>.
<br>
If you don't use the SDKs or prefer manually to construct the <code data-svelte-h="svelte-1siaka">FormData</code>
body, then it could look something like:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"@jsonPayload"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token literal-property property">requests</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"/api/collections/example/records?expand=user"</span><span class="token punctuation">,</span>
<span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"test1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"PATCH"</span><span class="token punctuation">,</span>
<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"/api/collections/example/records/RECORD_ID"</span><span class="token punctuation">,</span>
<span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"test2"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"DELETE"</span><span class="token punctuation">,</span>
<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"/api/collections/example/records/RECORD_ID"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// file for the first request</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"requests.0.document"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// file for the second request</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"requests.1.document"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
Returns a public list with the allowed collection authentication methods.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Authenticate a single auth record by combination of a password and a unique identity field (e.g.
email).
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Authenticate with an OAuth2 provider and returns a new auth token and record data.
This action usually should be called right after the provider login page redirect.
You could also check the
<a href="/docs/authentication#web-oauth2-integration">OAuth2 web integration example</a>.
Optional data that will be used when creating the auth record on OAuth2 sign-up.
The created auth record must comply with the same requirements and validations in the
regular <strong>create</strong> action.
<br> <em>The data can only be in <code>json</code>, aka. <code>multipart/form-data</code> and
files upload currently are not supported during OAuth2 sign-ups.</em>
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Authenticate a single auth record with an one-time password (OTP).
Note that when requesting an OTP we return an <code>otpId</code> even if a user with the provided email
doesn't exist as a very basic enumeration protection.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Returns a new auth response (token and user data) for already authenticated auth record.
<em>This method is usually called by users on page/screen reload to ensure that the previously
stored data in <code>pb.authStore</code> is still valid and up-to-date.</em>
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Sends auth record email verification request.
Sends auth record password reset email request.
On successful password reset all previously issued auth tokens for the specific record will be
automatically invalidated.
Sends auth record email change request.
On successful email change all previously issued auth tokens for the specific record will be
automatically invalidated.
Requires <code>Authorization:TOKEN</code>
Impersonate allows you to authenticate as a different user by generating a
<strong>nonrefreshable</strong> auth token.
Only superusers can perform this action.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
<code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false
<code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
record create - <code>POST /api/collections/{collection}/records</code>
record update -
<code>PATCH /api/collections/{collection}/records/{id}</code>
record upsert - <code>PUT /api/collections/{collection}/records</code> <br> <small class="txt-hint" data-svelte-h="svelte-zx9uhm">(the body must have <code class="txt-sm">id</code> field)</small>
record delete -
<code>DELETE /api/collections/{collection}/records/{id}</code>
<code>url path</code> <em>(could include query parameters)</em>
<code>method</code> <em>(GET, POST, PUT, PATCH, DELETE)</em>
<code>headers</code> <br> <em>(custom per-request <code>Authorization</code> header is not supported at the moment,
aka. all batch requests have the same auth state)</em>
<code>body</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code>
collectionIdOrName
<span class="label">String</span>
ID or name of the records' collection.
<span class="label">Number</span>
The page (aka. offset) of the paginated list (<em>default to 1</em>).
<span class="label">Number</span>
The max returned records per page (<em>default to 30</em>).
<span class="label">String</span>
<div class="content"><p data-svelte-h="svelte-fsqjhd">Specify the <em>ORDER BY</em> fields.</p> <p data-svelte-h="svelte-178z8vi">Add <code>-</code> / <code>+</code> (default) in front of the attribute for DESC /
ASC order, eg.:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// DESC by created and ASC by id</span>
<span class="token operator">?</span>sort<span class="token operator">=</span><span class="token operator">-</span>created<span class="token punctuation">,</span>id<!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-m7lslc"><strong>Supported record sort fields:</strong> <br> <code>@random</code>, <code>@rowid</code>, <code>id</code>,
<strong>and any other collection field</strong>.</p></div>
<span class="label">String</span>
<div class="content"><p data-svelte-h="svelte-btqbyx">Filter expression to filter/search the returned records list (in addition to the
collection's <code>listRule</code>), e.g.:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>filter<span class="token operator">=</span><span class="token punctuation">(</span>title<span class="token operator">~</span><span class="token string">'abc'</span> <span class="token operator">&&</span> created<span class="token operator">></span><span class="token string">'2022-01-01'</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-ozj8se"><strong>Supported record filter fields:</strong> <br> <code>id</code>, <strong>+ any field from the collection schema</strong>.</p> <p data-svelte-h="svelte-jz4nkm">The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:</p> <ul><li data-svelte-h="svelte-wi187q"><code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false</li> <li><code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li></ul></li></ul> <p class="txt-bold" data-svelte-h="svelte-1hh5whd">To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.</p> <p data-svelte-h="svelte-1bcgelt">Single line comments are also supported: <code>// Example comment</code>.</p></div>
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<span class="label">Boolean</span>
If it is set the total counts query will be skipped and the response fields
<code>totalItems</code> and <code>totalPages</code> will have <code>-1</code> value.
<br>
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
<br>
For optimization purposes, it is set by default for the
<code>getFirstListItem()</code>
and
<code>getFullList()</code> SDKs methods.
collectionIdOrName
<span class="label">String</span>
ID or name of the record's collection.
<span class="label">String</span>
ID of the record to view.
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the record's collection.
<div class="inline-flex"><span class="label label-warning">Optional</span> <span>id</span></div>
<span class="label">String</span>
<strong>15 characters string</strong> to store as record ID.
<br>
If not set, it will be auto generated.
Schema fields
<strong>Any field from the collection's schema.</strong>
Additional auth record fields
<div class="inline-flex"><span class="label label-success">Required</span> <span>password</span></div>
<span class="label">String</span>
Auth record password.
<div class="inline-flex"><span class="label label-success">Required</span> <span>passwordConfirm</span></div>
<span class="label">String</span>
Auth record password confirmation.
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the record's collection.
<span class="label">String</span>
ID of the record to update.
Schema fields
<strong>Any field from the collection's schema.</strong>
Additional auth record fields
<div class="inline-flex"><span class="label label-warning">Optional</span> <span>oldPassword</span></div>
<span class="label">String</span>
Old auth record password.
<br>
This field is required only when changing the record password. Superusers and auth records
with "Manage" access can skip this field.
<div class="inline-flex"><span class="label label-warning">Optional</span> <span>password</span></div>
<span class="label">String</span>
New auth record password.
<div class="inline-flex"><span class="label label-warning">Optional</span> <span>passwordConfirm</span></div>
<span class="label">String</span>
New auth record password confirmation.
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the record's collection.
<span class="label">String</span>
ID of the record to delete.
<div class="flex txt-nowrap"><span class="label label-success">Required</span> <span>requests</span></div>
<span class="label">Array<Request></span> - List of the requests to process.
<p data-svelte-h="svelte-nmvnpf">The supported batch request actions are:</p> <ul><li>record create - <code>POST /api/collections/{collection}/records</code></li> <li>record update -
<code>PATCH /api/collections/{collection}/records/{id}</code></li> <li>record upsert - <code>PUT /api/collections/{collection}/records</code> <br> <small class="txt-hint" data-svelte-h="svelte-zx9uhm">(the body must have <code class="txt-sm">id</code> field)</small></li> <li>record delete -
<code>DELETE /api/collections/{collection}/records/{id}</code></li></ul> <p data-svelte-h="svelte-1uaoefr">Each batch Request element have the following properties:</p> <ul data-svelte-h="svelte-1s0a3t5"><li><code>url path</code> <em>(could include query parameters)</em></li> <li><code>method</code> <em>(GET, POST, PUT, PATCH, DELETE)</em></li> <li><code>headers</code> <br> <em>(custom per-request <code>Authorization</code> header is not supported at the moment,
aka. all batch requests have the same auth state)</em></li> <li><code>body</code></li></ul> <p><strong data-svelte-h="svelte-xib1lb">NB!</strong> When the batch request is send as
<code data-svelte-h="svelte-1cwtelc">multipart/form-data</code>, the regular batch action fields are expected to be
submitted as serialized json under the <code data-svelte-h="svelte-ayz09k">@jsonPayload</code> field and file keys
need to follow the pattern <code data-svelte-h="svelte-6opb32">requests.N.fileField</code> or
<code data-svelte-h="svelte-8e6og0">requests[N].fileField</code> <em data-svelte-h="svelte-v3c4jm">(this is usually handled transparently by the SDKs when their specific object
notation is used)
</em>.
<br>
If you don't use the SDKs or prefer manually to construct the <code data-svelte-h="svelte-1siaka">FormData</code>
body, then it could look something like:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"@jsonPayload"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token literal-property property">requests</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"/api/collections/example/records?expand=user"</span><span class="token punctuation">,</span>
<span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"test1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"PATCH"</span><span class="token punctuation">,</span>
<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"/api/collections/example/records/RECORD_ID"</span><span class="token punctuation">,</span>
<span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"test2"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"DELETE"</span><span class="token punctuation">,</span>
<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"/api/collections/example/records/RECORD_ID"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// file for the first request</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"requests.0.document"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// file for the second request</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"requests.1.document"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div></p>
collectionIdOrName
<span class="label">String</span>
ID or name of the auth collection.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the auth collection.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">identity</span></div>
<span class="label">String</span>
Auth record username or email address.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">password</span></div>
<span class="label">String</span>
Auth record password.
<div class="inline-flex"><span class="label label-warning">Optional</span> <span class="txt">identityField</span></div>
<span class="label">String</span>
A specific identity field to use (by default fallbacks to the first matching one).
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the auth collection.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">provider</span></div>
<span class="label">String</span>
The name of the OAuth2 client provider (e.g. "google").
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">code</span></div>
<span class="label">String</span>
The authorization code returned from the initial request.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">codeVerifier</span></div>
<span class="label">String</span>
The code verifier sent with the initial request as part of the code_challenge.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">redirectUrl</span></div>
<span class="label">String</span>
The redirect url sent with the initial request.
<div class="inline-flex"><span class="label label-warning">Optional</span> <span>createData</span></div>
<span class="label">Object</span>
<p>Optional data that will be used when creating the auth record on OAuth2 sign-up.</p> <p>The created auth record must comply with the same requirements and validations in the
regular <strong>create</strong> action.
<br> <em>The data can only be in <code>json</code>, aka. <code>multipart/form-data</code> and
files upload currently are not supported during OAuth2 sign-ups.</em></p>
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the auth collection.
<div class="inline-flex"><span class="label label-success">Required</span> <span>email</span></div>
<span class="label">String</span>
The auth record email address to send the OTP request (if exists).
collectionIdOrName
<span class="label">String</span>
ID or name of the auth collection.
<div class="inline-flex"><span class="label label-success">Required</span> <span>otpId</span></div>
<span class="label">String</span>
The id of the OTP request.
<div class="inline-flex"><span class="label label-success">Required</span> <span>password</span></div>
<span class="label">String</span>
The one-time password.
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code></li></ul>
collectionIdOrName
<span class="label">String</span>
ID or name of the auth collection.
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code></li></ul>
<div class="inline-flex"><span class="label label-success">Required</span> <span>email</span></div>
<span class="label">String</span>
The auth record email address to send the verification request (if exists).
<div class="inline-flex"><span class="label label-success">Required</span> <span>token</span></div>
<span class="label">String</span>
The token from the verification request email.
<div class="inline-flex"><span class="label label-success">Required</span> <span>email</span></div>
<span class="label">String</span>
The auth record email address to send the password reset request (if exists).
<div class="inline-flex"><span class="label label-success">Required</span> <span>token</span></div>
<span class="label">String</span>
The token from the password reset request email.
<div class="inline-flex"><span class="label label-success">Required</span> <span>password</span></div>
<span class="label">String</span>
The new password to set.
<div class="inline-flex"><span class="label label-success">Required</span> <span>passwordConfirm</span></div>
<span class="label">String</span>
The new password confirmation.
<div class="inline-flex"><span class="label label-success">Required</span> <span>newEmail</span></div>
<span class="label">String</span>
The new email address to send the change email request.
<div class="inline-flex"><span class="label label-success">Required</span> <span>token</span></div>
<span class="label">String</span>
The token from the change email request email.
<div class="inline-flex"><span class="label label-success">Required</span> <span>password</span></div>
<span class="label">String</span>
The account password to confirm the email change.
collectionIdOrName
<span class="label">String</span>
ID or name of the auth collection.
<span class="label">String</span>
ID of the auth record to impersonate.
<div class="inline-flex"><span class="label label-warning">Optional</span> <span class="txt">duration</span></div>
<span class="label">Number</span>
Optional custom JWT duration for the <code>exp</code> claim (in seconds).
<br>
If not set or 0, it fallbacks to the default collection auth token duration option.
<span class="label">String</span>
Auto expand record relations. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>expand<span class="token operator">=</span>relField1<span class="token punctuation">,</span>relField2<span class="token punctuation">.</span>subRelField<!-- HTML_TAG_END --></code> </div>
Supports up to 6-levels depth nested relations expansion. <br>
The expanded relations will be appended to the record under the
<code data-svelte-h="svelte-1xwpa24">expand</code> property (e.g. <code>"expand": {"relField1": {...}, ...}</code>).
<br>
Only the relations to which the request user has permissions to <strong data-svelte-h="svelte-1jqgael">view</strong> will be expanded.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>record<span class="token punctuation">.</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,record.description:excerpt(200,true)</code></li></ul>
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Records
Returns a paginated records list, supporting sorting and filtering.
Depending on the collection's
value, the access to this action may or may not
have been restricted.
You could find individual generated records API documentation in the "Dashboard > Collections
> API Preview".
'http://127.0.0.1:8090'
// fetch a paginated records list
'created >= "2022-01-01 00:00:00" && someField1 != someField2'
// you can also fetch all records at once via getFullList
// or fetch only the first record that matches the specified filter
'relField1,relField2.subRelField'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// fetch a paginated records list
'created >= "2022-01-01 00:00:00" && someField1 != someField2'
// you can also fetch all records at once via getFullList
// or fetch only the first record that matches the specified filter
'relField1,relField2.subRelField'
ID or name of the records' collection.
The page (aka. offset) of the paginated list (
The max returned records per page (
(default) in front of the attribute for DESC /
ASC order, eg.:
// DESC by created and ASC by id
Supported record sort fields:
and any other collection field
Filter expression to filter/search the returned records list (in addition to the
collection's
Supported record filter fields:
+ any field from the collection schema
The syntax basically follows the format
- could be any field literal, string (single or double quoted),
number, null, true, false
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
To group and combine several expressions you can use parenthesis
Single line comments are also supported:
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
If it is set the total counts query will be skipped and the response fields
This could drastically speed up the search queries when the total counters are not needed or cursor based
pagination is used.
For optimization purposes, it is set by default for the
"2022-06-25 11:03:50.052"
"2022-06-25 11:03:35.163"
"2022-06-25 11:03:45.876"
"2022-06-25 11:03:45.876"
"Something went wrong while processing your request. Invalid filter."
"Only superusers can filter by '@collection.*'"
Returns a single collection record by its ID.
Depending on the collection's
value, the access to this action may or may not
have been restricted.
You could find individual generated records API documentation in the "Dashboard > Collections
> API Preview".
'http://127.0.0.1:8090'
'relField1,relField2.subRelField'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
'relField1,relField2.subRelField'
ID or name of the record's collection.
ID of the record to view.
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"2022-06-25 11:03:50.052"
"2022-06-25 11:03:35.163"
"Only superusers can perform this action."
"The requested resource wasn't found."
Creates a new collection
Depending on the collection's
value, the access to this action may or may not
have been restricted.
You could find individual generated records API documentation from the Dashboard.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID or name of the record's collection.
to store as record ID.
If not set, it will be auto generated.
Any field from the collection's schema.
Additional auth record fields
Auth record password.
Auth record password confirmation.
Body parameters could be sent as
File upload is supported only through
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"2022-06-25 11:03:50.052"
"2022-06-25 11:03:35.163"
"Failed to create record."
"validation_required"
"Missing required value."
"Only superusers can perform this action."
"The requested resource wasn't found. Missing collection context."
Updates an existing collection
Depending on the collection's
value, the access to this action may or may not
have been restricted.
You could find individual generated records API documentation from the Dashboard.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID or name of the record's collection.
ID of the record to update.
Any field from the collection's schema.
Additional auth record fields
Old auth record password.
This field is required only when changing the record password. Superusers and auth records
with "Manage" access can skip this field.
New auth record password.
New auth record password confirmation.
Body parameters could be sent as
File upload is supported only through
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"2022-06-25 11:03:50.052"
"2022-06-25 11:03:35.163"
"Failed to create record."
"validation_required"
"Missing required value."
"Only superusers can perform this action."
"The requested resource wasn't found. Missing collection context."
Deletes a single collection
Depending on the collection's
value, the access to this action may or may not
have been restricted.
You could find individual generated records API documentation from the Dashboard.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID or name of the record's collection.
ID of the record to delete.
"Failed to delete record. Make sure that the record is not part of a required relation reference."
"Only superusers can perform this action."
"The requested resource wasn't found."
Batch create/update/upsert/delete records
Batch and transactional create/update/upsert/delete of multiple records in a single request.
The batch Web API need to be explicitly enabled and configured from the
Dashboard > Settings > Application
Because this endpoint processes the requests in a single read&write transaction, other queries
may queue up and it could degrade the performance of your application if not used with proper
care and configuration
(some recommendations: prefer using the smallest possible max processing time and body
size limits; avoid large file uploads over slow S3 networks and custom hooks that
communicate with slow external APIs)
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Body parameters could be sent as
File upload is supported only via
(see below for more details).
- List of the requests to process.
The supported batch request actions are:
POST /api/collections/{collection}/records
PATCH /api/collections/{collection}/records/{id}
PUT /api/collections/{collection}/records
DELETE /api/collections/{collection}/records/{id}
Each batch Request element have the following properties:
(could include query parameters)
(GET, POST, PUT, PATCH, DELETE)
header is not supported at the moment,
aka. all batch requests have the same auth state)
When the batch request is send as
, the regular batch action fields are expected to be
submitted as serialized json under the
field and file keys
need to follow the pattern
requests[N].fileField
(this is usually handled transparently by the SDKs when their specific object
notation is used)
If you don't use the SDKs or prefer manually to construct the
body, then it could look something like:
"/api/collections/example/records?expand=user"
"/api/collections/example/records/RECORD_ID"
"/api/collections/example/records/RECORD_ID"
// file for the first request
"requests.0.document"
// file for the second request
"requests.1.document"
"2022-06-25 11:03:50.052"
"2022-06-25 11:03:35.163"
"2022-06-25 11:03:50.052"
"2022-06-25 11:03:35.163"
"Batch transaction failed."
"batch_request_failed"
"Batch request failed."
"Failed to create record."
"validation_min_text_constraint"
"Must be at least 3 character(s)."
"Batch requests are not allowed."
Returns a public list with the allowed collection authentication methods.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID or name of the auth collection.
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"nT7SLxzXKAVMeRQJtxSYj9kvnJAvGk"
"https://github.com/login/oauth/authorize?client_id=test&code_challenge=fcf8WAhNI6uCLJYgJubLyWXHvfs8xghoLe3zksBvxjE&code_challenge_method=S256&response_type=code&scope=read%3Auser+user%3Aemail&state=nT7SLxzXKAVMeRQJtxSYj9kvnJAvGk&redirect_uri="
"PwBG5OKR2IyQ7siLrrcgWHFwLLLAeUrz7PS1nY4AneG"
"fcf8WAhNI6uCLJYgJubLyWXHvfs8xghoLe3zksBvxjE"
"codeChallengeMethod"
Authenticate a single auth record by combination of a password and a unique identity field (e.g.
email).
'http://127.0.0.1:8090'
'YOUR_USERNAME_OR_EMAIL'
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
'YOUR_USERNAME_OR_EMAIL'
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
ID or name of the auth collection.
Auth record username or email address.
Auth record password.
A specific identity field to use (by default fallbacks to the first matching one).
Body parameters could be sent as
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"eyJhbGciOiJIUzI1NiJ9.eyJpZCI6IjRxMXhsY2xtZmxva3UzMyIsInR5cGUiOiJhdXRoUmVjb3JkIiwiY29sbGVjdGlvbklkIjoiX3BiX3VzZXJzX2F1dGhfIiwiZXhwIjoyMjA4OTg1MjYxfQ.UwD8JvkbQtXpymT09d7J6fdA0aP9g4FJ1GPh_ggEkzc"
"2022-06-24 06:24:18.434Z"
"2022-06-24 06:24:18.889Z"
"An error occurred while submitting the form."
"validation_required"
"Missing required value."
Authenticate with an OAuth2 provider and returns a new auth token and record data.
This action usually should be called right after the provider login page redirect.
You could also check the
OAuth2 web integration example
'http://127.0.0.1:8090'
// optional data that will be used for the new account on OAuth2 sign-up
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// optional data that will be used for the new account on OAuth2 sign-up
// after the above you can also access the auth data from the authStore
// "logout" the last authenticated record
ID or name of the auth collection.
The name of the OAuth2 client provider (e.g. "google").
The authorization code returned from the initial request.
The code verifier sent with the initial request as part of the code_challenge.
The redirect url sent with the initial request.
Optional data that will be used when creating the auth record on OAuth2 sign-up.
The created auth record must comply with the same requirements and validations in the
regular
The data can only be in
and
files upload currently are not supported during OAuth2 sign-ups.
Body parameters could be sent as
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"eyJhbGciOiJIUzI1NiJ9.eyJpZCI6IjRxMXhsY2xtZmxva3UzMyIsInR5cGUiOiJhdXRoUmVjb3JkIiwiY29sbGVjdGlvbklkIjoiX3BiX3VzZXJzX2F1dGhfIiwiZXhwIjoyMjA4OTg1MjYxfQ.UwD8JvkbQtXpymT09d7J6fdA0aP9g4FJ1GPh_ggEkzc"
"2022-06-24 06:24:18.434Z"
"2022-06-24 06:24:18.889Z"
"https://example.com/avatar.png"
"An error occurred while submitting the form."
"validation_required"
"Missing required value."
Authenticate a single auth record with an one-time password (OTP).
Note that when requesting an OTP we return an
even if a user with the provided email
doesn't exist as a very basic enumeration protection.
'http://127.0.0.1:8090'
// send OTP email to the provided auth record
// ... show a screen/popup to enter the password from the email ...
// authenticate with the requested OTP id and the email password
// after the above you can also access the auth data from the authStore
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// send OTP email to the provided auth record
// ... show a screen/popup to enter the password from the email ...
// authenticate with the requested OTP id and the email password
// after the above you can also access the auth data from the authStore
ID or name of the auth collection.
The auth record email address to send the OTP request (if exists).
"An error occurred while validating the submitted data."
"validation_is_email"
"Must be a valid email address."
"You've send too many OTP requests, please try again later."
ID or name of the auth collection.
The id of the OTP request.
The one-time password.
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"eyJhbGciOiJIUzI1NiJ9.eyJpZCI6IjRxMXhsY2xtZmxva3UzMyIsInR5cGUiOiJhdXRoUmVjb3JkIiwiY29sbGVjdGlvbklkIjoiX3BiX3VzZXJzX2F1dGhfIiwiZXhwIjoyMjA4OTg1MjYxfQ.UwD8JvkbQtXpymT09d7J6fdA0aP9g4FJ1GPh_ggEkzc"
"2022-06-24 06:24:18.434Z"
"2022-06-24 06:24:18.889Z"
"Failed to authenticate."
"validation_required"
"Missing required value."
Returns a new auth response (token and user data) for already authenticated auth record.
This method is usually called by users on page/screen reload to ensure that the previously
stored data in
is still valid and up-to-date.
'http://127.0.0.1:8090'
// after the above you can also access the refreshed auth data from the authStore
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// after the above you can also access the refreshed auth data from the authStore
ID or name of the auth collection.
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"eyJhbGciOiJIUzI1NiJ9.eyJpZCI6IjRxMXhsY2xtZmxva3UzMyIsInR5cGUiOiJhdXRoUmVjb3JkIiwiY29sbGVjdGlvbklkIjoiX3BiX3VzZXJzX2F1dGhfIiwiZXhwIjoyMjA4OTg1MjYxfQ.UwD8JvkbQtXpymT09d7J6fdA0aP9g4FJ1GPh_ggEkzc"
"2022-06-24 06:24:18.434Z"
"2022-06-24 06:24:18.889Z"
"The request requires valid record authorization token to be set."
"The authorized record model is not allowed to perform this action."
"Missing auth record context."
Sends auth record email verification request.
'http://127.0.0.1:8090'
// (optional) in your custom confirmation page:
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// (optional) in your custom confirmation page:
/request-verification
The auth record email address to send the verification request (if exists).
"An error occurred while validating the submitted data."
"validation_required"
"Missing required value."
/confirm-verification
The token from the verification request email.
"An error occurred while validating the submitted data."
"validation_required"
"Missing required value."
Sends auth record password reset email request.
On successful password reset all previously issued auth tokens for the specific record will be
automatically invalidated.
'http://127.0.0.1:8090'
// (optional) in your custom confirmation page:
// note: after this call all previously issued auth tokens are invalidated
'NEW_PASSWORD_CONFIRM'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// (optional) in your custom confirmation page:
// note: after this call all previously issued auth tokens are invalidated
'NEW_PASSWORD_CONFIRM'
Request password reset
Confirm password reset
/request-password-reset
The auth record email address to send the password reset request (if exists).
"An error occurred while validating the submitted data."
"validation_required"
"Missing required value."
/confirm-password-reset
The token from the password reset request email.
The new password to set.
The new password confirmation.
"An error occurred while validating the submitted data."
"validation_required"
"Missing required value."
Sends auth record email change request.
On successful email change all previously issued auth tokens for the specific record will be
automatically invalidated.
'http://127.0.0.1:8090'
// (optional) in your custom confirmation page:
// note: after this call all previously issued auth tokens are invalidated
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// (optional) in your custom confirmation page:
// note: after this call all previously issued auth tokens are invalidated
/request-email-change
The new email address to send the change email request.
"An error occurred while validating the submitted data."
"validation_required"
"Missing required value."
"The request requires valid record authorization token to be set."
"The authorized record model is not allowed to perform this action."
/confirm-email-change
The token from the change email request email.
The account password to confirm the email change.
"An error occurred while validating the submitted data."
"validation_required"
"Missing required value."
Impersonate allows you to authenticate as a different user by generating a
Only superusers can perform this action.
'http://127.0.0.1:8090'
// authenticate as superuser
// (the custom token duration is optional and must be in seconds)
// log the impersonate token and user data
// send requests as the impersonated user
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// authenticate as superuser
// (the custom token duration is optional and must be in seconds)
// log the impersonate token and user data
// send requests as the impersonated user
ID or name of the auth collection.
ID of the auth record to impersonate.
Optional custom JWT duration for the
If not set or 0, it fallbacks to the default collection auth token duration option.
Body parameters could be sent as
Auto expand record relations. Ex.:
Supports up to 6-levels depth nested relations expansion.
The expanded relations will be appended to the record under the
"expand": {"relField1": {...}, ...}
Only the relations to which the request user has permissions to
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjb2xsZWN0aW9uSWQiOiJfcGJjX2MwcHdrZXNjcXMiLCJleHAiOjE3MzAzNjgxMTUsImlkIjoicXkwMmMxdDBueDBvanFuIiwicmVmcmVzaGFibGUiOmZhbHNlLCJ0eXBlIjoiYXV0aCJ9.1JOaE54TyPdDLf0mb0T6roIYeh8Y1HfJvDlYZADMN4U"
"2022-06-24 06:24:18.434Z"
"2022-06-24 06:24:18.889Z"
"The request requires valid record authorization token to be set."
"validation_min_greater_equal_than_required"
"Must be no less than 0."
"An error occurred while validating the submitted data."
"The authorized record model is not allowed to perform this action."
"The requested resource wasn't found."


--------------------------------------------------------------------------------

[18] Web APIs reference - API Realtime
URL: https://pocketbase.io/docs/api-realtime/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- Required clientId (String): ID of the SSE client connection.
- Optional subscriptions (Array<String>): The new client subscriptions to set in the format:
COLLECTION_ID_OR_NAME or
COLLECTION_ID_OR_NAME/RECORD_ID. You can also attach optional query and header parameters as serialized json to a
single topic using the options
query parameter, e.g.:
COLLECTION_ID_OR_NAME/RECORD_ID?options={"query": {"abc": "123"}, "headers": {"x-token": "..."}}  Leave empty to unsubscribe from everything.

Content:
# Web APIs reference - API Realtime

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Parameters

- **Required clientId** (String): ID of the SSE client connection.
- **Optional subscriptions** (Array<String>): The new client subscriptions to set in the format:
COLLECTION_ID_OR_NAME or
COLLECTION_ID_OR_NAME/RECORD_ID. You can also attach optional query and header parameters as serialized json to a
single topic using the options
query parameter, e.g.:
COLLECTION_ID_OR_NAME/RECORD_ID?options={"query": {"abc": "123"}, "headers": {"x-token": "..."}}  Leave empty to unsubscribe from everything.

## Content

The Realtime API is implemented via Server-Sent Events (SSE). Generally, it consists of 2 operations:
SSE events are sent for <strong>create</strong>, <strong>update</strong>
and <strong>delete</strong> record operations.
<strong>You could subscribe to a single record or to an entire collection.</strong>
When you subscribe to a <strong>single record</strong>, the collection's
<strong>ViewRule</strong> will be used to determine whether the subscriber has access to receive the
event message.
When you subscribe to an <strong>entire collection</strong>, the collection's
<strong>ListRule</strong> will be used to determine whether the subscriber has access to receive the
event message.
Establishes a new SSE connection and immediately sends a <code>PB_CONNECT</code> SSE event with the
created client ID.
<strong>NB!</strong> The user/superuser authorization happens during the first
<a href="/docs/api-realtime#set-subscriptions">Set subscriptions</a>
call.
If the connected client doesn't receive any new messages for 5 minutes, the server will send a
disconnect signal (this is to prevent forgotten/leaked connections). The connection will be
automatically reestablished if the client is still active (e.g. the browser tab is still open).
Sets new active client's subscriptions (and auto unsubscribes from the previous ones).
If <code>Authorization</code> header is set, will authorize the client SSE connection with the
associated user or superuser.
The new client subscriptions to set in the format:
<br> <code>COLLECTION_ID_OR_NAME</code> or
<code>COLLECTION_ID_OR_NAME/RECORD_ID</code>.
You can also attach optional query and header parameters as serialized json to a
single topic using the <code data-svelte-h="svelte-b8vks4">options</code>
query parameter, e.g.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token constant">COLLECTION_ID_OR_NAME</span><span class="token operator">/</span><span class="token constant">RECORD_ID</span><span class="token operator">?</span>options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string-property property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">"abc"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string-property property">"headers"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">"x-token"</span><span class="token operator">:</span> <span class="token string">"..."</span><span class="token punctuation">}</span><span class="token punctuation">}</span><!-- HTML_TAG_END --></code> </div>
Leave empty to unsubscribe from everything.
All of this is seamlessly handled by the SDKs using just the <code>subscribe</code> and
<code>unsubscribe</code> methods:
establish SSE connection
submit client subscriptions
<div class="inline-flex"><span class="label label-success">Required</span> <span>clientId</span></div>
<span class="label">String</span>
ID of the SSE client connection.
<div class="inline-flex"><span class="label label-warning">Optional</span> <span>subscriptions</span></div>
<span class="label">Array<String></span>
<p data-svelte-h="svelte-1tz5oi2">The new client subscriptions to set in the format:
<br> <code>COLLECTION_ID_OR_NAME</code> or
<code>COLLECTION_ID_OR_NAME/RECORD_ID</code>.</p> <p>You can also attach optional query and header parameters as serialized json to a
single topic using the <code data-svelte-h="svelte-b8vks4">options</code>
query parameter, e.g.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token constant">COLLECTION_ID_OR_NAME</span><span class="token operator">/</span><span class="token constant">RECORD_ID</span><span class="token operator">?</span>options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string-property property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">"abc"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string-property property">"headers"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">"x-token"</span><span class="token operator">:</span> <span class="token string">"..."</span><span class="token punctuation">}</span><span class="token punctuation">}</span><!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-711bu3">Leave empty to unsubscribe from everything.</p>
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Realtime
The Realtime API is implemented via Server-Sent Events (SSE). Generally, it consists of 2 operations:
establish SSE connection
SSE events are sent for
You could subscribe to a single record or to an entire collection.
When you subscribe to a
will be used to determine whether the subscriber has access to receive the
event message.
When you subscribe to an
will be used to determine whether the subscriber has access to receive the
event message.
Establishes a new SSE connection and immediately sends a
SSE event with the
created client ID.
The user/superuser authorization happens during the first
If the connected client doesn't receive any new messages for 5 minutes, the server will send a
disconnect signal (this is to prevent forgotten/leaked connections). The connection will be
automatically reestablished if the client is still active (e.g. the browser tab is still open).
header is set, will authorize the client SSE connection with the
associated user or superuser.
ID of the SSE client connection.
COLLECTION_ID_OR_NAME
COLLECTION_ID_OR_NAME/RECORD_ID
You can also attach optional query and header parameters as serialized json to a
single topic using the
query parameter, e.g.:
COLLECTION_ID_OR_NAME
Leave empty to unsubscribe from everything.
Body parameters could be sent as
"Something went wrong while processing your request."
"validation_required"
"Missing required value."
"The current and the previous request authorization don't match."
"Missing or invalid client id."
All of this is seamlessly handled by the SDKs using just the
'http://127.0.0.1:8090'
// (Optionally) authenticate
// Subscribe to changes in any record in the collection
/* other options like expand, custom headers, etc. */
// Subscribe to changes only in the specified record
/* other options like expand, custom headers, etc. */
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
// (Optionally) authenticate
// Subscribe to changes in any record in the collection
/* other options like expand, custom headers, etc. */
// Subscribe to changes only in the specified record
/* other options like expand, custom headers, etc. */


--------------------------------------------------------------------------------

[19] Web APIs reference - API Files
URL: https://pocketbase.io/docs/api-files/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- collectionIdOrName (String): ID or name of the collection whose record model contains the file resource.
- recordId (String): ID of the record model that contains the file resource.
- filename (String): Name of the file resource.
- thumb (String): Get the thumb of the requested file.
The following thumb formats are currently supported: WxH
(e.g. 100x300) - crop to WxH viewbox (from center) WxHt
(e.g. 100x300t) - crop to WxH viewbox (from top) WxHb
(e.g. 100x300b) - crop to WxH viewbox (from bottom) WxHf
(e.g. 100x300f) - fit inside a WxH viewbox (without cropping) 0xH
(e.g. 0x300) - resize to H height preserving the aspect ratio Wx0
(e.g. 100x0) - resize to W width preserving the aspect ratio
If the thumb size is not defined in the file schema field options or the file resource is not
an image (jpg, png, gif, webp), then the original file resource is returned unmodified.
- token (String): Optional file token for granting access to
protected file(s).
For an example, you can check
"Files upload and handling".
- download (Boolean): If it is set to a truthy value (1, t, true) the file will be
served with Content-Disposition: attachment header instructing the browser to
ignore the file preview for pdf, images, videos, etc. and to directly download the file.

Content:
# Web APIs reference - API Files

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Parameters

- **collectionIdOrName** (String): ID or name of the collection whose record model contains the file resource.
- **recordId** (String): ID of the record model that contains the file resource.
- **filename** (String): Name of the file resource.
- **thumb** (String): Get the thumb of the requested file.
The following thumb formats are currently supported: WxH
(e.g. 100x300) - crop to WxH viewbox (from center) WxHt
(e.g. 100x300t) - crop to WxH viewbox (from top) WxHb
(e.g. 100x300b) - crop to WxH viewbox (from bottom) WxHf
(e.g. 100x300f) - fit inside a WxH viewbox (without cropping) 0xH
(e.g. 0x300) - resize to H height preserving the aspect ratio Wx0
(e.g. 100x0) - resize to W width preserving the aspect ratio
If the thumb size is not defined in the file schema field options or the file resource is not
an image (jpg, png, gif, webp), then the original file resource is returned unmodified.
- **token** (String): Optional file token for granting access to
protected file(s).
For an example, you can check
"Files upload and handling".
- **download** (Boolean): If it is set to a truthy value (1, t, true) the file will be
served with Content-Disposition: attachment header instructing the browser to
ignore the file preview for pdf, images, videos, etc. and to directly download the file.

## Content

API details
API details
Files are uploaded, updated or deleted via the
<a href="/docs/api-records">Records API</a>.
The File API is usually used to fetch/download a file resource (with support for basic image
manipulations, like generating thumbs).
Downloads a single file resource (aka. the URL address to the file). Example:
The following thumb formats are currently supported:
Generates a <strong>short-lived file token</strong> for accessing
<strong>protected file(s)</strong>.
The client must be superuser or auth record authenticated (aka. have regular authorization token
sent with the request).
<strong>WxH</strong>
(e.g. 100x300) - crop to WxH viewbox (from center)
<strong>WxHt</strong>
(e.g. 100x300t) - crop to WxH viewbox (from top)
<strong>WxHb</strong>
(e.g. 100x300b) - crop to WxH viewbox (from bottom)
<strong>WxHf</strong>
(e.g. 100x300f) - fit inside a WxH viewbox (without cropping)
<strong>0xH</strong>
(e.g. 0x300) - resize to H height preserving the aspect ratio
<strong>Wx0</strong>
(e.g. 100x0) - resize to W width preserving the aspect ratio
collectionIdOrName
<span class="label">String</span>
ID or name of the collection whose record model contains the file resource.
<span class="label">String</span>
ID of the record model that contains the file resource.
<span class="label">String</span>
Name of the file resource.
<span class="label">String</span>
Get the thumb of the requested file.
<p data-svelte-h="svelte-fit164">The following thumb formats are currently supported:</p> <ul data-svelte-h="svelte-1rx8tbr"><li><strong>WxH</strong>
(e.g. 100x300) - crop to WxH viewbox (from center)</li> <li><strong>WxHt</strong>
(e.g. 100x300t) - crop to WxH viewbox (from top)</li> <li><strong>WxHb</strong>
(e.g. 100x300b) - crop to WxH viewbox (from bottom)</li> <li><strong>WxHf</strong>
(e.g. 100x300f) - fit inside a WxH viewbox (without cropping)</li> <li><strong>0xH</strong>
(e.g. 0x300) - resize to H height preserving the aspect ratio</li> <li><strong>Wx0</strong>
(e.g. 100x0) - resize to W width preserving the aspect ratio</li></ul>
If the thumb size is not defined in the file schema field options or the file resource is not
an image (jpg, png, gif, webp), then the original file resource is returned unmodified.
<span class="label">String</span>
Optional <strong>file token</strong> for granting access to
<strong>protected file(s)</strong>.
<br>
For an example, you can check
<a href="/docs/files-handling/#protected-files">"Files upload and handling"</a>.
<span class="label">Boolean</span>
If it is set to a truthy value (<em>1</em>, <em>t</em>, <em>true</em>) the file will be
served with <code>Content-Disposition: attachment</code> header instructing the browser to
ignore the file preview for pdf, images, videos, etc. and to directly download the file.
<tr><th>Param
Description
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Files
Files are uploaded, updated or deleted via the
The File API is usually used to fetch/download a file resource (with support for basic image
manipulations, like generating thumbs).
Download / Fetch file
Downloads a single file resource (aka. the URL address to the file). Example:
http://example.com/api/files/demo/1234abcd/test.png
ID or name of the collection whose record model contains the file resource.
ID of the record model that contains the file resource.
Name of the file resource.
Get the thumb of the requested file.
The following thumb formats are currently supported:
(e.g. 100x300) - crop to WxH viewbox (from center)
(e.g. 100x300t) - crop to WxH viewbox (from top)
(e.g. 100x300b) - crop to WxH viewbox (from bottom)
(e.g. 100x300f) - fit inside a WxH viewbox (without cropping)
(e.g. 0x300) - resize to H height preserving the aspect ratio
(e.g. 100x0) - resize to W width preserving the aspect ratio
If the thumb size is not defined in the file schema field options or the file resource is not
an image (jpg, png, gif, webp), then the original file resource is returned unmodified.
for granting access to
For an example, you can check
"Files upload and handling"
If it is set to a truthy value (
) the file will be
served with
Content-Disposition: attachment
header instructing the browser to
ignore the file preview for pdf, images, videos, etc. and to directly download the file.
"Filesystem initialization failure."
"The requested resource wasn't found."
Generate protected file token
short-lived file token
The client must be superuser or auth record authenticated (aka. have regular authorization token
sent with the request).
"Failed to generate file token."
Next: API Collections


--------------------------------------------------------------------------------

[20] Web APIs reference - API Crons
URL: https://pocketbase.io/docs/api-crons/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- jobId (String): The identifier of the cron job to run.

Content:
# Web APIs reference - API Crons

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Parameters

- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **jobId** (String): The identifier of the cron job to run.

## Content

API details
API details
Returns list with all registered app level cron jobs.
Only superusers can perform this action.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Triggers a single cron job by its id.
Only superusers can perform this action.
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<span class="label">String</span>
The identifier of the cron job to run.
<tr><th>Param
Description
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Crons
Returns list with all registered app level cron jobs.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"Failed to load backups filesystem."
"The request requires valid record authorization token."
"Only superusers can perform this action."
Triggers a single cron job by its id.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
The identifier of the cron job to run.
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
"Missing or invalid cron job."


--------------------------------------------------------------------------------

[21] Web APIs reference - API Settings
URL: https://pocketbase.io/docs/api-settings/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- ‚îú‚îÄ Required appName (String): The app name.
- ‚îú‚îÄ Required appUrl (String): The app public absolute url.
- ‚îú‚îÄ Optional hideControls (Boolean): Hides the collection create and update controls from the Dashboard.
Useful to prevent making accidental schema changes when in production environment.
- ‚îú‚îÄ Required senderName (String): Transactional mails sender name.
- ‚îú‚îÄ Required senderAddress (String): Transactional mails sender address.
- ‚îî‚îÄ Optional maxDays (Number): Max retention period. Set to 0 for no logs.
- ‚îî‚îÄ Optional minLevel (Number): Specifies the minimum log persistent level.
The default log levels are:
-4: DEBUG 0: INFO 4: WARN 8: ERROR
- ‚îî‚îÄ Optional logIP (Boolean): If enabled includes the client IP in the activity request logs.
- ‚îî‚îÄ Optional logAuthId (Boolean): If enabled includes the authenticated record id in the activity request logs.
- ‚îú‚îÄ Optional cron (String): Cron expression to schedule auto backups, e.g. 0 0 * * *.
- ‚îú‚îÄ Optional cronMaxKeep (Number): The max number of cron generated backups to keep before removing older entries.
- ‚îî‚îÄ Optional s3 (Object): S3 configuration (the same fields as for the S3 file storage settings).
- ‚îú‚îÄ Optional enabled (Boolean): Enable the use of the SMTP mail server for sending emails.
- ‚îú‚îÄ Required host (String) (required): Mail server host (required if SMTP is enabled).
- ‚îú‚îÄ Required port (Number) (required): Mail server port (required if SMTP is enabled).
- ‚îú‚îÄ Optional username (String): Mail server username.
- ‚îú‚îÄ Optional password (String): Mail server password.
- ‚îú‚îÄ Optional tls (Boolean): Whether to enforce TLS connection encryption.
When false StartTLS command is send, leaving the server to decide whether
to upgrade the connection or not).
- ‚îú‚îÄ Optional authMethod (String): The SMTP AUTH method to use - PLAIN or LOGIN (used mainly by Microsoft).
Default to PLAIN if empty.
- ‚îî‚îÄ Optional localName (String): Optional domain name or (IP address) to use for the initial EHLO/HELO exchange.
If not explicitly set, localhost will be used.
Note that some SMTP providers, such as Gmail SMTP-relay, requires a proper domain name and
and will reject attempts to use localhost.
- ‚îú‚îÄ Optional enabled (Boolean): Enable the use of a S3 compatible storage.
- ‚îú‚îÄ Required bucket (String) (required): S3 storage bucket (required if enabled).
- ‚îú‚îÄ Required region (String) (required): S3 storage region (required if enabled).
- ‚îú‚îÄ Required endpoint (String) (required): S3 storage public endpoint (required if enabled).
- ‚îú‚îÄ Required accessKey (String) (required): S3 storage access key (required if enabled).
- ‚îú‚îÄ Required secret (String) (required): S3 storage secret (required if enabled).
- ‚îî‚îÄ Optional forcePathStyle (Boolean): Forces the S3 request to use path-style addressing, e.g.
"https://s3.amazonaws.com/BUCKET/KEY" instead of the default
"https://BUCKET.s3.amazonaws.com/KEY".
- ‚îú‚îÄ Optional enabled (Boolean): Enable the batch Web APIs.
- ‚îú‚îÄ Required maxRequests (Number): The maximum allowed batch request to execute.
- ‚îú‚îÄ Required timeout (Number): The max duration in seconds to wait before cancelling the batch transaction.
- ‚îî‚îÄ Optional maxBodySize (Number): The maximum allowed batch request body size in bytes.
If not set, fallbacks to max ~128MB.
- ‚îú‚îÄ Optional enabled (Boolean): Enable the builtin rate limiter.
- ‚îî‚îÄ Optional rules (Array<RateLimitRule>): List of rate limit rules. Each rule have:
label - the identifier of the rule.
It could be a tag, complete path or path prerefix (when ends with `/`). maxRequests - the max allowed number of requests per duration. duration - specifies the interval (in seconds) per which to reset the
counted/accumulated rate limiter tokens..
- ‚îú‚îÄ Optional headers (Array<String>): List of explicit trusted header(s) to check.
- ‚îî‚îÄ Optional useLeftmostIP (Boolean): Specifies to use the left-mostish IP from the trusted headers.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- Required filesystem (String): The storage filesystem to test (storage or backups).
- Optional collection (String): The name or id of the auth collection. Fallbacks to _superusers if not set.
- Required email (String): The receiver of the test email.
- Required template (String): The test email template to send:  verification,
password-reset or
email-change.
- Required clientId (String): The identifier of your app (aka. Service ID).
- Required teamId (String): 10-character string associated with your developer account (usually could be found next to
your name in the Apple Developer site).
- Required keyId (String): 10-character key identifier generated for the "Sign in with Apple" private key associated
with your developer account.
- Required privateKey (String): PrivateKey is the private key associated to your app.
- Required duration (Number): Duration specifies how long the generated JWT token should be considered valid.
The specified value must be in seconds and max 15777000 (~6months).

Content:
# Web APIs reference - API Settings

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Parameters

- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **‚îú‚îÄ Required appName** (String): The app name.
- **‚îú‚îÄ Required appUrl** (String): The app public absolute url.
- **‚îú‚îÄ Optional hideControls** (Boolean): Hides the collection create and update controls from the Dashboard.
Useful to prevent making accidental schema changes when in production environment.
- **‚îú‚îÄ Required senderName** (String): Transactional mails sender name.
- **‚îú‚îÄ Required senderAddress** (String): Transactional mails sender address.
- **‚îî‚îÄ Optional maxDays** (Number): Max retention period. Set to 0 for no logs.
- **‚îî‚îÄ Optional minLevel** (Number): Specifies the minimum log persistent level.
The default log levels are:
-4: DEBUG 0: INFO 4: WARN 8: ERROR
- **‚îî‚îÄ Optional logIP** (Boolean): If enabled includes the client IP in the activity request logs.
- **‚îî‚îÄ Optional logAuthId** (Boolean): If enabled includes the authenticated record id in the activity request logs.
- **‚îú‚îÄ Optional cron** (String): Cron expression to schedule auto backups, e.g. 0 0 * * *.
- **‚îú‚îÄ Optional cronMaxKeep** (Number): The max number of cron generated backups to keep before removing older entries.
- **‚îî‚îÄ Optional s3** (Object): S3 configuration (the same fields as for the S3 file storage settings).
- **‚îú‚îÄ Optional enabled** (Boolean): Enable the use of the SMTP mail server for sending emails.
- **‚îú‚îÄ Required host** (String) (required): Mail server host (required if SMTP is enabled).
- **‚îú‚îÄ Required port** (Number) (required): Mail server port (required if SMTP is enabled).
- **‚îú‚îÄ Optional username** (String): Mail server username.
- **‚îú‚îÄ Optional password** (String): Mail server password.
- **‚îú‚îÄ Optional tls** (Boolean): Whether to enforce TLS connection encryption.
When false StartTLS command is send, leaving the server to decide whether
to upgrade the connection or not).
- **‚îú‚îÄ Optional authMethod** (String): The SMTP AUTH method to use - PLAIN or LOGIN (used mainly by Microsoft).
Default to PLAIN if empty.
- **‚îî‚îÄ Optional localName** (String): Optional domain name or (IP address) to use for the initial EHLO/HELO exchange.
If not explicitly set, localhost will be used.
Note that some SMTP providers, such as Gmail SMTP-relay, requires a proper domain name and
and will reject attempts to use localhost.
- **‚îú‚îÄ Optional enabled** (Boolean): Enable the use of a S3 compatible storage.
- **‚îú‚îÄ Required bucket** (String) (required): S3 storage bucket (required if enabled).
- **‚îú‚îÄ Required region** (String) (required): S3 storage region (required if enabled).
- **‚îú‚îÄ Required endpoint** (String) (required): S3 storage public endpoint (required if enabled).
- **‚îú‚îÄ Required accessKey** (String) (required): S3 storage access key (required if enabled).
- **‚îú‚îÄ Required secret** (String) (required): S3 storage secret (required if enabled).
- **‚îî‚îÄ Optional forcePathStyle** (Boolean): Forces the S3 request to use path-style addressing, e.g.
"https://s3.amazonaws.com/BUCKET/KEY" instead of the default
"https://BUCKET.s3.amazonaws.com/KEY".
- **‚îú‚îÄ Optional enabled** (Boolean): Enable the batch Web APIs.
- **‚îú‚îÄ Required maxRequests** (Number): The maximum allowed batch request to execute.
- **‚îú‚îÄ Required timeout** (Number): The max duration in seconds to wait before cancelling the batch transaction.
- **‚îî‚îÄ Optional maxBodySize** (Number): The maximum allowed batch request body size in bytes.
If not set, fallbacks to max ~128MB.
- **‚îú‚îÄ Optional enabled** (Boolean): Enable the builtin rate limiter.
- **‚îî‚îÄ Optional rules** (Array<RateLimitRule>): List of rate limit rules. Each rule have:
label - the identifier of the rule.
It could be a tag, complete path or path prerefix (when ends with `/`). maxRequests - the max allowed number of requests per duration. duration - specifies the interval (in seconds) per which to reset the
counted/accumulated rate limiter tokens..
- **‚îú‚îÄ Optional headers** (Array<String>): List of explicit trusted header(s) to check.
- **‚îî‚îÄ Optional useLeftmostIP** (Boolean): Specifies to use the left-mostish IP from the trusted headers.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **Required filesystem** (String): The storage filesystem to test (storage or backups).
- **Optional collection** (String): The name or id of the auth collection. Fallbacks to _superusers if not set.
- **Required email** (String): The receiver of the test email.
- **Required template** (String): The test email template to send:  verification,
password-reset or
email-change.
- **Required clientId** (String): The identifier of your app (aka. Service ID).
- **Required teamId** (String): 10-character string associated with your developer account (usually could be found next to
your name in the Apple Developer site).
- **Required keyId** (String): 10-character key identifier generated for the "Sign in with Apple" private key associated
with your developer account.
- **Required privateKey** (String): PrivateKey is the private key associated to your app.
- **Required duration** (Number): Duration specifies how long the generated JWT token should be considered valid.
The specified value must be in seconds and max 15777000 (~6months).

## Content

API details
API details
API details
API details
API details
Returns a list with all available application settings.
Secret/password fields are automatically redacted with <em>******</em> characters.
Only superusers can perform this action.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Bulk updates application settings and returns the updated settings list.
Only superusers can perform this action.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Performs S3 storage connection test.
Only superusers can perform this action.
Sends a test user email.
Only superusers can perform this action.
Generates a new Apple OAuth2 client secret key.
Only superusers can perform this action.
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code>label</code> - the identifier of the rule.
<br>
It could be a tag, complete path or path prerefix (when ends with `/`).
<code>maxRequests</code> - the max allowed number of requests per duration.
<code>duration</code> - specifies the interval (in seconds) per which to reset the
counted/accumulated rate limiter tokens..
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<strong>meta</strong> <br> <small class="txt-hint">Application meta data (name, url, support email, etc.).</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>appName</em></div>
<span class="label">String</span>
The app name.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>appUrl</em></div>
<span class="label">String</span>
The app public absolute url.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>hideControls</em></div>
<span class="label">Boolean</span>
Hides the collection create and update controls from the Dashboard.
<small>Useful to prevent making accidental schema changes when in production environment.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>senderName</em></div>
<span class="label">String</span>
Transactional mails sender name.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>senderAddress</em></div>
<span class="label">String</span>
Transactional mails sender address.
<strong>logs</strong> <br> <small class="txt-hint">App logger settings.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>maxDays</em></div>
<span class="label">Number</span>
Max retention period. Set to <em>0</em> for no logs.
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>minLevel</em></div>
<span class="label">Number</span>
Specifies the minimum log persistent level.
<br>
The default log levels are:
<ul><li>-4: DEBUG</li> <li>0: INFO</li> <li>4: WARN</li> <li>8: ERROR</li></ul>
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>logIP</em></div>
<span class="label">Boolean</span>
If enabled includes the client IP in the activity request logs.
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>logAuthId</em></div>
<span class="label">Boolean</span>
If enabled includes the authenticated record id in the activity request logs.
<strong>backups</strong> <br> <small class="txt-hint">App data backups settings.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>cron</em></div>
<span class="label">String</span>
Cron expression to schedule auto backups, e.g. <code>0 0 * * *</code>.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>cronMaxKeep</em></div>
<span class="label">Number</span>
The max number of cron generated backups to keep before removing older entries.
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>s3</em></div>
<span class="label">Object</span>
S3 configuration (the same fields as for the S3 file storage settings).
<strong>smtp</strong> <br> <small class="txt-hint">SMTP mail server settings.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>enabled</em></div>
<span class="label">Boolean</span>
Enable the use of the SMTP mail server for sending emails.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>host</em></div>
<span class="label">String</span>
Mail server host (required if SMTP is enabled).
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>port</em></div>
<span class="label">Number</span>
Mail server port (required if SMTP is enabled).
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>username</em></div>
<span class="label">String</span>
Mail server username.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>password</em></div>
<span class="label">String</span>
Mail server password.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>tls</em></div>
<span class="label">Boolean</span>
Whether to enforce TLS connection encryption.
<br> <small class="txt-hint">When <em>false</em> <em>StartTLS</em> command is send, leaving the server to decide whether
to upgrade the connection or not).</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>authMethod</em></div>
<span class="label">String</span>
The SMTP AUTH method to use - <em>PLAIN</em> or <em>LOGIN</em> (used mainly by Microsoft).
<br>
Default to <em>PLAIN</em> if empty.
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>localName</em></div>
<span class="label">String</span>
Optional domain name or (IP address) to use for the initial EHLO/HELO exchange.
<br>
If not explicitly set, <code>localhost</code> will be used.
<br>
Note that some SMTP providers, such as Gmail SMTP-relay, requires a proper domain name and
and will reject attempts to use localhost.
<strong>s3</strong> <br> <small class="txt-hint">S3 compatible file storage settings.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>enabled</em></div>
<span class="label">Boolean</span>
Enable the use of a S3 compatible storage.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>bucket</em></div>
<span class="label">String</span>
S3 storage bucket (required if enabled).
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>region</em></div>
<span class="label">String</span>
S3 storage region (required if enabled).
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>endpoint</em></div>
<span class="label">String</span>
S3 storage public endpoint (required if enabled).
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>accessKey</em></div>
<span class="label">String</span>
S3 storage access key (required if enabled).
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>secret</em></div>
<span class="label">String</span>
S3 storage secret (required if enabled).
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>forcePathStyle</em></div>
<span class="label">Boolean</span>
Forces the S3 request to use path-style addressing, e.g.
"https://s3.amazonaws.com/BUCKET/KEY" instead of the default
"https://BUCKET.s3.amazonaws.com/KEY".
<strong>batch</strong> <br> <small class="txt-hint">Batch logs settings.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>enabled</em></div>
<span class="label">Boolean</span>
Enable the batch Web APIs.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>maxRequests</em></div>
<span class="label">Number</span>
The maximum allowed batch request to execute.
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-success">Required</span> <em>timeout</em></div>
<span class="label">Number</span>
The max duration in seconds to wait before cancelling the batch transaction.
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>maxBodySize</em></div>
<span class="label">Number</span>
The maximum allowed batch request body size in bytes.
<br>
If not set, fallbacks to max ~128MB.
<strong>rateLimits</strong> <br> <small class="txt-hint">Rate limiter settings.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>enabled</em></div>
<span class="label">Boolean</span>
Enable the builtin rate limiter.
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>rules</em></div>
<span class="label">Array<RateLimitRule></span>
List of rate limit rules. Each rule have:
<ul><li><code>label</code> - the identifier of the rule.
<br>
It could be a tag, complete path or path prerefix (when ends with `/`).</li> <li><code>maxRequests</code> - the max allowed number of requests per duration.</li> <li><code>duration</code> - specifies the interval (in seconds) per which to reset the
counted/accumulated rate limiter tokens..</li></ul>
<strong>trustedProxy</strong> <br> <small class="txt-hint">Trusted proxy headers settings.</small>
<div class="inline-flex flex-nowrap"><span class="txt">‚îú‚îÄ</span> <span class="label label-warning">Optional</span> <em>headers</em></div>
<span class="label">Array<String></span>
List of explicit trusted header(s) to check.
<div class="inline-flex flex-nowrap"><span class="txt">‚îî‚îÄ</span> <span class="label label-warning">Optional</span> <em>useLeftmostIP</em></div>
<span class="label">Boolean</span>
Specifies to use the left-mostish IP from the trusted headers.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<div class="inline-flex"><span class="label label-success">Required</span> <span>filesystem</span></div>
<span class="label">String</span>
The storage filesystem to test (<code>storage</code> or <code>backups</code>).
<div class="inline-flex"><span class="label label-warning">Optional</span> <span class="txt">collection</span></div>
<span class="label">String</span>
The name or id of the auth collection. Fallbacks to <em>_superusers</em> if not set.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">email</span></div>
<span class="label">String</span>
The receiver of the test email.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">template</span></div>
<span class="label">String</span>
The test email template to send: <br> <code>verification</code>,
<code>password-reset</code> or
<code>email-change</code>.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">clientId</span></div>
<span class="label">String</span>
The identifier of your app (aka. Service ID).
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">teamId</span></div>
<span class="label">String</span>
10-character string associated with your developer account (usually could be found next to
your name in the Apple Developer site).
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">keyId</span></div>
<span class="label">String</span>
10-character key identifier generated for the "Sign in with Apple" private key associated
with your developer account.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">privateKey</span></div>
<span class="label">String</span>
PrivateKey is the private key associated to your app.
<div class="inline-flex"><span class="label label-success">Required</span> <span class="txt">duration</span></div>
<span class="label">Number</span>
Duration specifies how long the generated JWT token should be considered valid.
<br>
The specified value must be in seconds and max 15777000 (~6months).
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Settings
Returns a list with all available application settings.
Secret/password fields are automatically redacted with
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"https://example.com"
"support@example.com"
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Bulk updates application settings and returns the updated settings list.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
'http://127.0.0.1:8090'
Application meta data (name, url, support email, etc.).
The app public absolute url.
Hides the collection create and update controls from the Dashboard.
Useful to prevent making accidental schema changes when in production environment.
Transactional mails sender name.
Transactional mails sender address.
Max retention period. Set to
Specifies the minimum log persistent level.
The default log levels are:
If enabled includes the client IP in the activity request logs.
If enabled includes the authenticated record id in the activity request logs.
App data backups settings.
Cron expression to schedule auto backups, e.g.
The max number of cron generated backups to keep before removing older entries.
S3 configuration (the same fields as for the S3 file storage settings).
SMTP mail server settings.
Enable the use of the SMTP mail server for sending emails.
Mail server host (required if SMTP is enabled).
Mail server port (required if SMTP is enabled).
Mail server username.
Mail server password.
Whether to enforce TLS connection encryption.
command is send, leaving the server to decide whether
to upgrade the connection or not).
The SMTP AUTH method to use -
(used mainly by Microsoft).
Optional domain name or (IP address) to use for the initial EHLO/HELO exchange.
If not explicitly set,
Note that some SMTP providers, such as Gmail SMTP-relay, requires a proper domain name and
and will reject attempts to use localhost.
S3 compatible file storage settings.
Enable the use of a S3 compatible storage.
S3 storage bucket (required if enabled).
S3 storage region (required if enabled).
S3 storage public endpoint (required if enabled).
S3 storage access key (required if enabled).
S3 storage secret (required if enabled).
Forces the S3 request to use path-style addressing, e.g.
"https://s3.amazonaws.com/BUCKET/KEY" instead of the default
"https://BUCKET.s3.amazonaws.com/KEY".
Enable the batch Web APIs.
The maximum allowed batch request to execute.
The max duration in seconds to wait before cancelling the batch transaction.
The maximum allowed batch request body size in bytes.
If not set, fallbacks to max ~128MB.
Rate limiter settings.
Enable the builtin rate limiter.
List of rate limit rules. Each rule have:
- the identifier of the rule.
It could be a tag, complete path or path prerefix (when ends with `/`).
- the max allowed number of requests per duration.
- specifies the interval (in seconds) per which to reset the
counted/accumulated rate limiter tokens..
Trusted proxy headers settings.
List of explicit trusted header(s) to check.
Specifies to use the left-mostish IP from the trusted headers.
Body parameters could be sent as
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"https://example.com"
"support@example.com"
"An error occurred while submitting the form."
"validation_required"
"Missing required value."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Test S3 storage connection
Performs S3 storage connection test.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
/api/settings/test/s3
The storage filesystem to test (
Body parameters could be sent as
"Failed to initialize the S3 storage. Raw error:..."
"The request requires valid record authorization token."
Sends a test user email.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
/api/settings/test/email
The name or id of the auth collection. Fallbacks to
The receiver of the test email.
The test email template to send:
Body parameters could be sent as
"Failed to send the test email."
"validation_required"
"Missing required value."
"The request requires valid record authorization token."
Generate Apple client secret
Generates a new Apple OAuth2 client secret key.
Only superusers can perform this action.
'http://127.0.0.1:8090'
generateAppleClientSecret
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
generateAppleClientSecret
/api/settings/apple/generate-client-secret
The identifier of your app (aka. Service ID).
10-character string associated with your developer account (usually could be found next to
your name in the Apple Developer site).
10-character key identifier generated for the "Sign in with Apple" private key associated
with your developer account.
PrivateKey is the private key associated to your app.
Duration specifies how long the generated JWT token should be considered valid.
The specified value must be in seconds and max 15777000 (~6months).
Body parameters could be sent as
"Failed to generate client secret. Raw error:..."
"The request requires valid record authorization token."
Prev: API Collections


--------------------------------------------------------------------------------

[22] Web APIs reference - API Logs
URL: https://pocketbase.io/docs/api-logs/
Category: api
API Endpoint: GET /api/collections/_pbc_2287844090/records?page=1&amp;perPage=1&amp;filter=&amp;fields=id"
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- page (Number): The page (aka. offset) of the paginated list (default to 1).
- perPage (Number): The max returned logs per page (default to 30).
- sort (String): Specify the ORDER BY fields. Add - / + (default) in front of the attribute for DESC /
ASC order, e.g.: // DESC by the insertion rowid and ASC by level
?sort=-rowid,level  Supported log sort fields:  @random, rowid, id, created,
updated, level, message and any
data.* attribute.
- filter (String): Filter expression to filter/search the returned logs list, e.g.: ?filter=(data.url~'test.com' && level>0)  Supported log filter fields:  id, created, updated,
level, message and any data.* attribute. The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- id (String): ID of the log to view.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- filter (String): Filter expression to filter/search the logs, e.g.: ?filter=(data.url~'test.com' && level>0)  Supported log filter fields:  rowid, id, created,
updated, level, message and any
data.* attribute. The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)

Content:
# Web APIs reference - API Logs

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

**API Endpoint:** `GET /api/collections/_pbc_2287844090/records?page=1&amp;perPage=1&amp;filter=&amp;fields=id"`

## Parameters

- **page** (Number): The page (aka. offset) of the paginated list (default to 1).
- **perPage** (Number): The max returned logs per page (default to 30).
- **sort** (String): Specify the ORDER BY fields. Add - / + (default) in front of the attribute for DESC /
ASC order, e.g.: // DESC by the insertion rowid and ASC by level
?sort=-rowid,level  Supported log sort fields:  @random, rowid, id, created,
updated, level, message and any
data.* attribute.
- **filter** (String): Filter expression to filter/search the returned logs list, e.g.: ?filter=(data.url~'test.com' && level>0)  Supported log filter fields:  id, created, updated,
level, message and any data.* attribute. The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **id** (String): ID of the log to view.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **filter** (String): Filter expression to filter/search the logs, e.g.: ?filter=(data.url~'test.com' && level>0)  Supported log filter fields:  rowid, id, created,
updated, level, message and any
data.* attribute. The syntax basically follows the format
OPERAND OPERATOR OPERAND, where: OPERAND - could be any field literal, string (single or double quoted),
number, null, true, false OPERATOR - is one of:
= Equal != NOT equal > Greater than >= Greater than or equal < Less than <= Less than or equal ~ Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) !~ NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) ?= Any/At least one of Equal ?!= Any/At least one of NOT equal ?> Any/At least one of Greater than ?>= Any/At least one of Greater than or equal ?< Any/At least one of Less than ?<= Any/At least one of Less than or equal ?~ Any/At least one of Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match) ?!~ Any/At least one of NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match) To group and combine several expressions you can use parenthesis
(...), && (AND) and || (OR) tokens. Single line comments are also supported: // Example comment.
- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)

## Content

API details
API details
API details
Returns a paginated logs list.
Only superusers can perform this action.
Specify the <em>ORDER BY</em> fields.
Add <code>-</code> / <code>+</code> (default) in front of the attribute for DESC /
ASC order, e.g.:
<strong>Supported log sort fields:</strong> <br> <code>@random</code>, <code>rowid</code>, <code>id</code>, <code>created</code>,
<code>updated</code>, <code>level</code>, <code>message</code> and any
<code>data.*</code> attribute.
Filter expression to filter/search the returned logs list, e.g.:
<strong>Supported log filter fields:</strong> <br> <code>id</code>, <code>created</code>, <code>updated</code>,
<code>level</code>, <code>message</code> and any <code>data.*</code> attribute.
The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:
To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.
Single line comments are also supported: <code>// Example comment</code>.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Returns a single log by its ID.
Only superusers can perform this action.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Returns hourly aggregated logs statistics.
Only superusers can perform this action.
Filter expression to filter/search the logs, e.g.:
<strong>Supported log filter fields:</strong> <br> <code>rowid</code>, <code>id</code>, <code>created</code>,
<code>updated</code>, <code>level</code>, <code>message</code> and any
<code>data.*</code> attribute.
The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:
To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.
Single line comments are also supported: <code>// Example comment</code>.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
<code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false
<code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false
<code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span>
<code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span>
<code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span>
<code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span>
<code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span>
<code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span>
<code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span>
<code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span>
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<span class="label">Number</span>
The page (aka. offset) of the paginated list (<em>default to 1</em>).
<span class="label">Number</span>
The max returned logs per page (<em>default to 30</em>).
<span class="label">String</span>
<div class="content"><p data-svelte-h="svelte-fsqjhd">Specify the <em>ORDER BY</em> fields.</p> <p data-svelte-h="svelte-enjd8e">Add <code>-</code> / <code>+</code> (default) in front of the attribute for DESC /
ASC order, e.g.:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// DESC by the insertion rowid and ASC by level</span>
<span class="token operator">?</span>sort<span class="token operator">=</span><span class="token operator">-</span>rowid<span class="token punctuation">,</span>level<!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-7z3h4v"><strong>Supported log sort fields:</strong> <br> <code>@random</code>, <code>rowid</code>, <code>id</code>, <code>created</code>,
<code>updated</code>, <code>level</code>, <code>message</code> and any
<code>data.*</code> attribute.</p></div>
<span class="label">String</span>
<div class="content"><p data-svelte-h="svelte-h3n5t1">Filter expression to filter/search the returned logs list, e.g.:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>filter<span class="token operator">=</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token operator">~</span><span class="token string">'test.com'</span> <span class="token operator">&&</span> level<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-1vszo4t"><strong>Supported log filter fields:</strong> <br> <code>id</code>, <code>created</code>, <code>updated</code>,
<code>level</code>, <code>message</code> and any <code>data.*</code> attribute.</p> <p data-svelte-h="svelte-jz4nkm">The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:</p> <ul><li data-svelte-h="svelte-wi187q"><code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false</li> <li><code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li></ul></li></ul> <p class="txt-bold" data-svelte-h="svelte-1hh5whd">To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.</p> <p data-svelte-h="svelte-1bcgelt">Single line comments are also supported: <code>// Example comment</code>.</p></div>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<span class="label">String</span>
ID of the log to view.
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<span class="label">String</span>
<div class="content"><p data-svelte-h="svelte-hsd4e0">Filter expression to filter/search the logs, e.g.:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>filter<span class="token operator">=</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token operator">~</span><span class="token string">'test.com'</span> <span class="token operator">&&</span> level<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div> <p data-svelte-h="svelte-1dnzf6j"><strong>Supported log filter fields:</strong> <br> <code>rowid</code>, <code>id</code>, <code>created</code>,
<code>updated</code>, <code>level</code>, <code>message</code> and any
<code>data.*</code> attribute.</p> <p data-svelte-h="svelte-jz4nkm">The syntax basically follows the format
<code><span class="txt-success">OPERAND</span> <span class="txt-danger">OPERATOR</span> <span class="txt-success">OPERAND</span></code>, where:</p> <ul><li data-svelte-h="svelte-wi187q"><code class="txt-success">OPERAND</code> - could be any field literal, string (single or double quoted),
number, null, true, false</li> <li><code class="txt-danger" data-svelte-h="svelte-evctf5">OPERATOR</code> - is one of:
<br> <ul><li><code class="filter-op svelte-1w7s5nw">=</code> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">!=</code> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">></code> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">>=</code> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw"><</code> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw"><=</code> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">~</code> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">!~</code> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-n4954d">Equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?!=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1ugaxeq">NOT equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?></code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-t7c6nc">Greater than</span></li> <li><code class="filter-op svelte-1w7s5nw">?>=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-11yewjn">Greater than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?<</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-18pcr85">Less than</span></li> <li><code class="filter-op svelte-1w7s5nw">?<=</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-imoqoo">Less than or equal</span></li> <li><code class="filter-op svelte-1w7s5nw">?~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1jttfyr">Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)</span></li> <li><code class="filter-op svelte-1w7s5nw">?!~</code> <em class="txt-hint" data-svelte-h="svelte-12ibnlb">Any/At least one of</em> <span class="txt" data-svelte-h="svelte-1kfj832">NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)</span></li></ul></li></ul> <p class="txt-bold" data-svelte-h="svelte-1hh5whd">To group and combine several expressions you can use parenthesis
<code>(...)</code>, <code>&&</code> (AND) and <code>||</code> (OR) tokens.</p> <p data-svelte-h="svelte-1bcgelt">Single line comments are also supported: <code>// Example comment</code>.</p></div>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Logs
Returns a paginated logs list.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
The page (aka. offset) of the paginated list (
The max returned logs per page (
(default) in front of the attribute for DESC /
ASC order, e.g.:
// DESC by the insertion rowid and ASC by level
Supported log sort fields:
Filter expression to filter/search the returned logs list, e.g.:
Supported log filter fields:
The syntax basically follows the format
- could be any field literal, string (single or double quoted),
number, null, true, false
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
To group and combine several expressions you can use parenthesis
Single line comments are also supported:
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"2024-10-27 09:28:19.524Z"
"http://localhost:8090/_/"
"/api/collections/_pbc_2287844090/records?page=1&perPage=1&filter=&fields=id"
"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36"
"GET /api/collections/_pbc_2287844090/records?page=1&perPage=1&filter=&fields=id"
"2024-10-27 09:28:19.524Z"
"http://localhost:8090/_/"
"/api/collections/_pbc_2287844090/records?page=1&perPage=1&filter=&fields=id"
"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36"
"GET /api/collections/_pbc_2287844090/records?page=1&perPage=1&filter=&fields=id"
"Something went wrong while processing your request. Invalid filter."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Returns a single log by its ID.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
ID of the log to view.
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"2024-10-27 09:28:19.524Z"
"http://localhost:8090/_/"
"/api/collections/_pbc_2287844090/records?page=1&perPage=1&filter=&fields=id"
"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36"
"GET /api/collections/_pbc_2287844090/records?page=1&perPage=1&filter=&fields=id"
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
"The requested resource wasn't found."
Returns hourly aggregated logs statistics.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Filter expression to filter/search the logs, e.g.:
Supported log filter fields:
The syntax basically follows the format
- could be any field literal, string (single or double quoted),
number, null, true, false
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
Greater than or equal
Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard
match)
NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for
wildcard match)
To group and combine several expressions you can use parenthesis
Single line comments are also supported:
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"2022-06-01 19:00:00.000"
"2022-06-02 12:00:00.000"
"2022-06-02 13:00:00.000"
"Something went wrong while processing your request. Invalid filter."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."


--------------------------------------------------------------------------------

[23] Web APIs reference - API Health
URL: https://pocketbase.io/docs/api-health/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)

Content:
# Web APIs reference - API Health

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Parameters

- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)

## Content

API details
Returns the health status of the server.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Health
Returns the health status of the server.
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.


--------------------------------------------------------------------------------

[24] Web APIs reference - API Backups
URL: https://pocketbase.io/docs/api-backups/
Category: api
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Parameters:
- fields (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- Optional name (String): The base name of the backup file to create.
Must be in the format [a-z0-9_-].zip
If not set, it will be auto generated.
- Required file (File): The zip archive to upload.
- key (String): The key of the backup file to delete.
- key (String): The key of the backup file to restore.
- key (String): The key of the backup file to download.
- token (String): Superuser file token for granting access to the
backup file.

Content:
# Web APIs reference - API Backups

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Parameters

- **fields** (String): Comma separated string of the fields to return in the JSON response
(by default returns all fields). Ex.:
?fields=*,expand.relField.name  * targets all keys from the specific depth level. In addition, the following field modifiers are also supported: :excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
Ex.:
?fields=*,description:excerpt(200,true)
- **Optional name** (String): The base name of the backup file to create.
Must be in the format [a-z0-9_-].zip
If not set, it will be auto generated.
- **Required file** (File): The zip archive to upload.
- **key** (String): The key of the backup file to delete.
- **key** (String): The key of the backup file to restore.
- **key** (String): The key of the backup file to download.
- **token** (String): Superuser file token for granting access to the
backup file.

## Content

API details
API details
API details
API details
API details
API details
Returns list with all available backup files.
Only superusers can perform this action.
Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div>
<code>*</code> targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
Creates a new app data backup.
This action will return an error if there is another backup/restore operation already in progress.
Only superusers can perform this action.
Uploads an existing backup zip file.
Only superusers can perform this action.
Deletes a single backup by its name.
This action will return an error if the backup to delete is still being generated or part of a
restore operation.
Only superusers can perform this action.
Restore a single backup by its name and restarts the current running PocketBase process.
This action will return an error if there is another backup/restore operation already in progress.
Only superusers can perform this action.
Downloads a single backup file.
Only superusers can perform this action.
<code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code>
<span class="label">String</span>
<p>Comma separated string of the fields to return in the JSON response
<em data-svelte-h="svelte-199q55i">(by default returns all fields)</em>. Ex.:
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token operator">?</span>fields<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">,</span>expand<span class="token punctuation">.</span>relField<span class="token punctuation">.</span>name<!-- HTML_TAG_END --></code> </div></p> <p data-svelte-h="svelte-fpp3gs"><code>*</code> targets all keys from the specific depth level.</p> <p data-svelte-h="svelte-1wtys8u">In addition, the following field modifiers are also supported:</p> <ul><li><code data-svelte-h="svelte-11qu4ry">:excerpt(maxLength, withEllipsis?)</code> <br>
Returns a short plain text version of the field string value.
<br>
Ex.:
<code>?fields=*,description:excerpt(200,true)</code></li></ul>
<div class="inline-flex"><span class="label label-warning">Optional</span> <span>name</span></div>
<span class="label">String</span>
The base name of the backup file to create.
<br>
Must be in the format <code>[a-z0-9_-].zip</code> <br>
If not set, it will be auto generated.
<div class="inline-flex"><span class="label label-success">Required</span> <span>file</span></div>
<span class="label">File</span>
The zip archive to upload.
<span class="label">String</span>
The key of the backup file to delete.
<span class="label">String</span>
The key of the backup file to restore.
<span class="label">String</span>
The key of the backup file to download.
<span class="label">String</span>
Superuser <strong>file token</strong> for granting access to the
<strong>backup file</strong>.
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
<tr><th>Param
Description
Collection operations
Collection operations
Sending HTTP requests
Web APIs reference - API Backups
Returns list with all available backup files.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Comma separated string of the fields to return in the JSON response
(by default returns all fields)
targets all keys from the specific depth level.
In addition, the following field modifiers are also supported:
:excerpt(maxLength, withEllipsis?)
Returns a short plain text version of the field string value.
"pb_backup_20230519162514.zip"
"2023-05-19 16:25:57.542Z"
"pb_backup_20230518162514.zip"
"2023-05-18 16:25:57.542Z"
"Failed to load backups filesystem."
"The request requires valid record authorization token."
"Only superusers can perform this action."
Creates a new app data backup.
This action will return an error if there is another backup/restore operation already in progress.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
The base name of the backup file to create.
Must be in the format
If not set, it will be auto generated.
Body parameters could be sent as
"Try again later - another backup/restore process has already been started."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Uploads an existing backup zip file.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
The zip archive to upload.
Uploading files is supported only via
"Something went wrong while processing your request."
"validation_invalid_mime_type"
"\"test_backup.txt\" mime type must be one of: application/zip."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Deletes a single backup by its name.
This action will return an error if the backup to delete is still being generated or part of a
restore operation.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
The key of the backup file to delete.
"Try again later - another backup/restore process has already been started."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Restore a single backup by its name and restarts the current running PocketBase process.
This action will return an error if there is another backup/restore operation already in progress.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
The key of the backup file to restore.
"Try again later - another backup/restore process has already been started."
"The request requires valid record authorization token."
"The authorized record is not allowed to perform this action."
Downloads a single backup file.
Only superusers can perform this action.
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
The key of the backup file to download.
for granting access to the
"Filesystem initialization failure."
"The requested resource wasn't found."


--------------------------------------------------------------------------------

[25] Extend with JavaScript - Overview
URL: https://pocketbase.io/docs/js-overview/
Category: sdk
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Overview

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#javascript-engine" class="link-primary"> JavaScript engine </a>
<a href="#typescript-declarations-and-code-completion" class="link-primary"> TypeScript declarations and code completion </a>
<a href="#caveats-and-limitations" class="link-primary"> Caveats and limitations </a>
<a href="#global-objects" class="link-primary"> Global objects </a>
<a href="#handlers-scope" class="link-primary"> Handlers scope </a>
<a href="#relative-paths" class="link-primary"> Relative paths </a>
<a href="#loading-modules" class="link-primary"> Loading modules </a>
<a href="#performance" class="link-primary"> Performance </a>
<a href="#engine-limitations" class="link-primary"> Engine limitations </a>
The prebuilt PocketBase v0.17+ executable comes with embedded ES5 JavaScript engine (<a href="https://github.com/dop251/goja" target="_blank" rel="nopppener noreferrer">goja</a>) which enables you to write custom server-side code using plain JavaScript.
You can start by creating <code>*.pb.js</code> file(s) inside a <code>pb_hooks</code>
directory next to your executable.
<em>For convenience, when making changes to the files inside <code>pb_hooks</code>, the process will
automatically restart/reload itself (currently supported only on UNIX based platforms). The
<code>*.pb.js</code> files are loaded per their filename sort order.</em>
For most parts, the JavaScript APIs are derived from <a href="/docs/go-overview">Go</a> with 2 main differences:
Below is a list with some of the commonly used global objects that are accessible from everywhere:
While you can't use directly TypeScript (<em>without transpiling it to JS on your own</em>), PocketBase
comes with builtin <strong>ambient TypeScript declarations</strong> that can help providing information
and documentation about the available global variables, methods and arguments, code completion, etc. as
long as your editor has TypeScript LSP support
<em>(most editors either have it builtin or available as plugin)</em>.
The types declarations are stored in
<code>pb_data/types.d.ts</code> file. You can point to those declarations using the
<a href="https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html#-reference-path-" target="_blank" rel="noopener">reference triple-slash directive</a>
at the top of your JS file:
If after referencing the types your editor still doesn't perform linting, then you can try to rename your
file to have <code>.pb.ts</code> extension.
Each handler function (hook, route, middleware, etc.) is
<strong>serialized and executed in its own isolated context as a separate "program"</strong>. This means
that you don't have access to custom variables and functions declared outside of the handler scope. For
example, the below code will fail:
The above serialization and isolation context is also the reason why error stack trace line numbers may
not be accurate.
One possible workaround for sharing/reusing code across different handlers could be to move and export the
reusable code portion as local module and load it with <code>require()</code> inside the handler but keep in
mind that the loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues:
Relative file paths are relative to the current working directory (CWD) and not to the
<code>pb_hooks</code>.
<br>
To get an absolute path to the <code>pb_hooks</code> directory you can use the global
<code class="txt-bold">__hooks</code> variable.
Please note that the embedded JavaScript engine is not a Node.js or browser environment, meaning
that modules that rely on APIs like <em>window</em>, <em>fs</em>,
<em>fetch</em>, <em>buffer</em> or any other runtime specific API not part of the ES5 spec may not
work!
You can load modules either by specifying their local filesystem path or by using their name, which will
automatically search in:
Currently only CommonJS (CJS) modules are supported and can be loaded with
<code>const x = require(...)</code>.
<br>
ECMAScript modules (ESM) can be loaded by first precompiling and transforming your dependencies with a bundler
like
<a href="https://rollupjs.org/" target="_blank" rel="noopener noreferrer">rollup</a>,
<a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">webpack</a>,
<a href="https://browserify.org/" target="_blank" rel="noopener noreferrer">browserify</a>, etc.
A common usage of local modules is for loading shared helpers or configuration parameters, for example:
Loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues.
The prebuilt executable comes with a <strong>prewarmed pool of 15 JS runtimes</strong>, which helps
maintaining the handlers execution times on par with the Go equivalent code (see
<a href="https://github.com/pocketbase/benchmarks/blob/master/results/hetzner_cax11.md#go-vs-js-route-execution" target="blank" rel="noopener noreferrer">benchmarks</a>). You can adjust the pool size manually with the <code>--hooksPool=50</code> flag (<em>increasing the pool size may improve the performance in high concurrent scenarios but also will
increase the memory usage</em>).
Note that the handlers performance may degrade if you have heavy computational tasks in pure JavaScript
(encryption, random generators, etc.). For such cases prefer using the exposed <a href="/jsvm/index.html" target="_blank">Go bindings</a>
(e.g. <code>$security.randomString(10)</code>).
We inherit some of the limitations and caveats of the embedded JavaScript engine
(<a href="https://github.com/dop251/goja" target="_blank" rel="nopppener noreferrer">goja</a>):
Go exported method and field names are converted to camelCase, for example:
<br> <code>app.FindRecordById("example", "RECORD_ID")</code> becomes
<code>$app.findRecordById("example", "RECORD_ID")</code>.
Errors are thrown as regular JavaScript exceptions and not returned as Go values.
<a href="/jsvm/variables/__hooks.html" target="_blank"><code>__hooks</code></a>
- The absolute path to the app <code>pb_hooks</code> directory.
<a href="/jsvm/modules/_app.html" target="_blank"><code>$app</code></a> - The current running PocketBase application instance.
<a href="/jsvm/modules/_apis.html" target="_blank"><code>$apis.*</code></a> - API routing helpers and middlewares.
<a href="/jsvm/modules/_os.html" target="_blank"><code>$os.*</code></a> - OS level primitives (deleting directories, executing shell commands, etc.).
<a href="/jsvm/modules/_security.html" target="_blank"><code>$security.*</code></a> - Low level helpers for creating and parsing JWTs, random string generation, AES encryption, etc.
And many more - for all exposed APIs, please refer to the
<a href="/jsvm/index.html" target="_blank">JSVM reference docs</a>.
the current working directory (<em>affects also relative paths</em>)
any <code>node_modules</code> directory
any parent <code>node_modules</code> directory
Has most of ES6 functionality already implemented but it is not fully spec compliant yet.
No concurrent execution inside a single handler (aka. no <code>setTimeout</code>/<code>setInterval</code>).
Wrapped Go structural types (such as maps, slices) comes with some peculiarities and do not behave the
exact same way as native ECMAScript values (for more details see
<a href="https://pkg.go.dev/github.com/dop251/goja#Runtime.ToValue" target="blank" rel="noreferrer noopener">goja ToValue</a>).
In relation to the above, DB <code>json</code> field values require the use of <code>get()</code> and
<code>set()</code> helpers (<em>this may change in the future</em>).
Collection operations
Collection operations
Sending HTTP requests
You can start by creating
directory next to your executable.
// pb_hooks/main.pb.js
onRecordAfterUpdateSuccess
For convenience, when making changes to the files inside
, the process will
automatically restart/reload itself (currently supported only on UNIX based platforms). The
files are loaded per their filename sort order.
with 2 main differences:
Go exported method and field names are converted to camelCase, for example:
app.FindRecordById("example", "RECORD_ID")
$app.findRecordById("example", "RECORD_ID")
Below is a list with some of the commonly used global objects that are accessible from everywhere:
- The absolute path to the app
- The current running PocketBase application instance.
- API routing helpers and middlewares.
- OS level primitives (deleting directories, executing shell commands, etc.).
- Low level helpers for creating and parsing JWTs, random string generation, AES encryption, etc.
And many more - for all exposed APIs, please refer to the
without transpiling it to JS on your own
), PocketBase
comes with builtin
(most editors either have it builtin or available as plugin)
The types declarations are stored in
file. You can point to those declarations using the
reference triple-slash directive
at the top of your JS file:
/// <reference path="../pb_data/types.d.ts" />
If after referencing the types your editor still doesn't perform linting, then you can try to rename your
file to have
Caveats and limitations
Each handler function (hook, route, middleware, etc.) is
serialized and executed in its own isolated context as a separate "program"
. This means
that you don't have access to custom variables and functions declared outside of the handler scope. For
example, the below code will fail:
// <-- name will be undefined inside the handler
The above serialization and isolation context is also the reason why error stack trace line numbers may
not be accurate.
One possible workaround for sharing/reusing code across different handlers could be to move and export the
reusable code portion as local module and load it with
inside the handler but keep in
mind that the loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues:
Relative file paths are relative to the current working directory (CWD) and not to the
To get an absolute path to the
directory you can use the global
or any other runtime specific API not part of the ES5 spec may not
work!
You can load modules either by specifying their local filesystem path or by using their name, which will
automatically search in:
the current working directory (
affects also relative paths
Currently only CommonJS (CJS) modules are supported and can be loaded with
const x = require(...)
A common usage of local modules is for loading shared helpers or configuration parameters, for example:
// pb_hooks/main.pb.js
Loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues.
The prebuilt executable comes with a
prewarmed pool of 15 JS runtimes
, which helps
maintaining the handlers execution times on par with the Go equivalent code (see
). You can adjust the pool size manually with the
increasing the pool size may improve the performance in high concurrent scenarios but also will
increase the memory usage
$security.randomString(10)
Has most of ES6 functionality already implemented but it is not fully spec compliant yet.
No concurrent execution inside a single handler (aka. no
In relation to the above, DB
field values require the use of
this may change in the future


--------------------------------------------------------------------------------

[26] Extend with Go - Overview
URL: https://pocketbase.io/docs/go-overview/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Overview

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#getting-started" class="link-primary"> Getting started </a>
<a href="#custom-sqlite-driver" class="link-primary"> Custom SQLite driver </a>
PocketBase can be used as regular Go package that exposes various helpers and hooks to help you implement
your own custom portable application.
A new PocketBase instance is created via
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase#New" target="_blank" rel="noopener noreferrer"><code>pocketbase.New()</code></a>
or
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase#NewWithConfig" target="_blank" rel="noopener noreferrer"><code>pocketbase.NewWithConfig(config)</code></a>
Once created you can register your custom business logic via the available
<a href="/docs/go-event-hooks/">event hooks</a>
and call
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase#PocketBase.Start" target="_blank" rel="noopener noreferrer"><code>app.Start()</code></a>
to start the application.
Below is a minimal example:
Create a new project directory with <code>main.go</code> file inside it.
<br> <small class="txt-hint txt-sm">As a reference, you can also explore the prebuilt executable
<a href="https://github.com/pocketbase/pocketbase/blob/master/examples/base/main.go" target="_blank" rel="noopener noreferrer"><code class="txt-sm">example/base/main.go</code></a>
file.</small>
<strong>The general recommendation is to use the builtin SQLite setup</strong> but if you need more
advanced configuration or extensions like ICU, FTS5, etc. you'll have to specify a custom driver/build.
Note that PocketBase by default doesn't require CGO because it uses the pure Go SQLite port
<a href="https://pkg.go.dev/modernc.org/sqlite" target="_blank" rel="noreferrer noopener">modernc.org/sqlite
</a>, but this may not be the case when using a custom SQLite driver!
PocketBase v0.23+ added support for defining a <code>DBConnect</code> function as app configuration to
load custom SQLite builds and drivers compatible with the standard Go <code>database/sql</code>.
<strong>The <code>DBConnect</code> function is called twice</strong> - once for
<code>pb_data/data.db</code>
(the main database file) and second time for <code>pb_data/auxiliary.db</code> (used for logs and other ephemeral
system meta information).
If you want to load your custom driver conditionally and fallback to the default handler, then you can
call
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#DefaultDBConnect" target="_blank" rel="noreferrer noopener"><code>core.DefaultDBConnect</code></a>
<br> <em class="txt-sm txt-hint">As a side-note, if you are not planning to use <code class="txt-sm">core.DefaultDBConnect</code>
fallback as part of your custom driver registration you can exclude the default pure Go driver with
<code class="txt-sm">go build -tags no_default_driver</code> to reduce the binary size a little (~4MB).</em>
Below are some minimal examples with commonly used external SQLite drivers:
<em>For all available options please refer to the
<a href="https://github.com/mattn/go-sqlite3" target="_blank" rel="noopener noreferrer"><code>github.com/mattn/go-sqlite3</code></a>
README.</em>
<em>For all available options please refer to the
<a href="https://github.com/ncruces/go-sqlite3" target="_blank" rel="noopener noreferrer"><code>github.com/ncruces/go-sqlite3</code></a>
README.</em>
<a href="https://go.dev/doc/install" target="_blank" rel="noreferrer noopener">Install Go 1.23+</a>
<p data-svelte-h="svelte-jh7xa3">Create a new project directory with <code>main.go</code> file inside it.
<br> <small class="txt-hint txt-sm">As a reference, you can also explore the prebuilt executable
<a href="https://github.com/pocketbase/pocketbase/blob/master/examples/base/main.go" target="_blank" rel="noopener noreferrer"><code class="txt-sm">example/base/main.go</code></a>
file.</small></p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
<span class="token string">"log"</span>
<span class="token string">"os"</span>
<span class="token string">"github.com/pocketbase/pocketbase"</span>
<span class="token string">"github.com/pocketbase/pocketbase/apis"</span>
<span class="token string">"github.com/pocketbase/pocketbase/core"</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
app <span class="token operator">:=</span> pocketbase<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">OnServe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">BindFunc</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>se <span class="token operator">*</span>core<span class="token punctuation">.</span>ServeEvent<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
<span class="token comment">// serves static files from the provided public dir (if exists)</span>
se<span class="token punctuation">.</span>Router<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/{path...}"</span><span class="token punctuation">,</span> apis<span class="token punctuation">.</span><span class="token function">Static</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">DirFS</span><span class="token punctuation">(</span><span class="token string">"./pb_public"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> se<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">:=</span> app<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><!-- HTML_TAG_END --></code> </div>
To init the dependencies, run <code>go mod init myapp && go mod tidy</code>.
To start the application, run <code>go run . serve</code>.
To build a statically linked executable, run <code>go build</code>
and then you can start the created executable with
<code>./myapp serve</code>.
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Overview
PocketBase can be used as regular Go package that exposes various helpers and hooks to help you implement
your own custom portable application.
A new PocketBase instance is created via
pocketbase.NewWithConfig(config)
Once created you can register your custom business logic via the available
to start the application.
Below is a minimal example:
Create a new project directory with
As a reference, you can also explore the prebuilt executable
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/apis"
"github.com/pocketbase/pocketbase/core"
// serves static files from the provided public dir (if exists)
To init the dependencies, run
go mod init myapp && go mod tidy
To start the application, run
To build a statically linked executable, run
and then you can start the created executable with
The general recommendation is to use the builtin SQLite setup
but if you need more
advanced configuration or extensions like ICU, FTS5, etc. you'll have to specify a custom driver/build.
Note that PocketBase by default doesn't require CGO because it uses the pure Go SQLite port
, but this may not be the case when using a custom SQLite driver!
PocketBase v0.23+ added support for defining a
function as app configuration to
load custom SQLite builds and drivers compatible with the standard Go
function is called twice
(the main database file) and second time for
(used for logs and other ephemeral
system meta information).
If you want to load your custom driver conditionally and fallback to the default handler, then you can
call
core.DefaultDBConnect
As a side-note, if you are not planning to use
core.DefaultDBConnect
fallback as part of your custom driver registration you can exclude the default pure Go driver with
go build -tags no_default_driver
to reduce the binary size a little (~4MB).
Below are some minimal examples with commonly used external SQLite drivers:
github.com/mattn/go-sqlite3
For all available options please refer to the
github.com/mattn/go-sqlite3
"github.com/mattn/go-sqlite3"
"github.com/pocketbase/dbx"
"github.com/pocketbase/pocketbase"
// register a new driver with default PRAGMAs and the same query
// builder implementation as the already existing sqlite3 builder
// initialize default PRAGMAs for each new connection
PRAGMA busy_timeout       = 10000;
PRAGMA journal_mode       = WAL;
PRAGMA journal_size_limit = 200000000;
PRAGMA synchronous        = NORMAL;
PRAGMA foreign_keys       = ON;
PRAGMA temp_store         = MEMORY;
PRAGMA cache_size         = -16000;
// any custom hooks or plugins...
github.com/ncruces/go-sqlite3
For all available options please refer to the
github.com/ncruces/go-sqlite3
"github.com/pocketbase/dbx"
"github.com/pocketbase/pocketbase"
"github.com/ncruces/go-sqlite3/driver"
"github.com/ncruces/go-sqlite3/embed"
"?_pragma=busy_timeout(10000)&_pragma=journal_mode(WAL)&_pragma=journal_size_limit(200000000)&_pragma=synchronous(NORMAL)&_pragma=foreign_keys(ON)&_pragma=temp_store(MEMORY)&_pragma=cache_size(-16000)"
// custom hooks and plugins...


--------------------------------------------------------------------------------

[27] Extend with Go - Event hooks
URL: https://pocketbase.io/docs/go-event-hooks/
Category: hooks
API Endpoint: GET /hello"
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Event hooks

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

**API Endpoint:** `GET /hello"`

## Content

<a href="#app-hooks" class="link-primary"> App hooks </a>
<a href="#mailer-hooks" class="link-primary"> Mailer hooks </a>
<a href="#realtime-hooks" class="link-primary"> Realtime hooks </a>
<a href="#record-model-hooks" class="link-primary"> Record model hooks </a>
<a href="#collection-model-hooks" class="link-primary"> Collection model hooks </a>
<a href="#request-hooks" class="link-primary"> Request hooks </a>
<a href="#base-model-hooks" class="link-primary"> Base model hooks </a>
<a href="#record-model-create-hooks" class="link-primary"> Record model create hooks </a>
<a href="#record-model-update-hooks" class="link-primary"> Record model update hooks </a>
<a href="#record-model-delete-hooks" class="link-primary"> Record model delete hooks </a>
<a href="#collection-mode-create-hooks" class="link-primary"> Collection mode create hooks </a>
<a href="#collection-mode-update-hooks" class="link-primary"> Collection mode update hooks </a>
<a href="#collection-mode-delete-hooks" class="link-primary"> Collection mode delete hooks </a>
<a href="#record-crud-request-hooks" class="link-primary"> Record CRUD request hooks </a>
<a href="#record-auth-request-hooks" class="link-primary"> Record auth request hooks </a>
<a href="#batch-request-hooks" class="link-primary"> Batch request hooks </a>
<a href="#file-request-hooks" class="link-primary"> File request hooks </a>
<a href="#collection-request-hooks" class="link-primary"> Collection request hooks </a>
<a href="#settings-request-hooks" class="link-primary"> Settings request hooks </a>
<a href="#base-model-create-hooks" class="link-primary"> Base model create hooks </a>
<a href="#base-model-update-hooks" class="link-primary"> Base model update hooks </a>
<a href="#base-model-delete-hooks" class="link-primary"> Base model delete hooks </a>
The standard way to modify PocketBase is through
<strong>event hooks</strong> in your Go code.
All hooks have 3 main methods:
To remove an already registered hook handler, you can use the handler id and pass it to
<code>Unbind(id)</code> or remove all handlers with
<code>UnbindAll()</code> (<em>!including system handlers</em>).
All hook handler functions share the same <code>func(e T) error</code> signature and expect
the user to call <code data-svelte-h="svelte-1rjwm8t">e.Next()</code> if they want to proceed with the execution chain.
If you need to access the app instance from inside a hook handler, prefer using the
<code>e.App</code> field instead of reusing a parent scope app variable because the hook could be part
of a DB transaction and can cause deadlock.
Also avoid using global mutex locks inside a hook handler because it could be invoked recursively
(e.g. cascade delete) and can cause deadlock.
You can explore all available hooks below:
<code>OnBootstrap</code> hook is triggered when initializing the main
application resources (db, app settings, etc).
Note that attempting to access the database before the <code>e.Next()</code> call will result in an error.
<code>OnSettingsReload</code> hook is triggered every time when the <code>App.Settings()</code>
is being replaced with a new state.
Calling <code>e.App.Settings()</code> after <code>e.Next()</code> returns the new state.
<code>OnMailerSend</code> hook is triggered every time when a new email is
being send using the <code>App.NewMailClient()</code> instance.
It allows intercepting the email message or to use a custom mailer client.
<code>OnMailerRecordAuthAlertSend</code> hook is triggered when
sending a new device login auth alert email, allowing you to
intercept and customize the email message that is being sent.
<code>OnMailerRecordPasswordResetSend</code> hook is triggered when
sending a password reset email to an auth record, allowing
you to intercept and customize the email message that is being sent.
<code>OnMailerRecordVerificationSend</code> hook is triggered when
sending a verification email to an auth record, allowing
you to intercept and customize the email message that is being sent.
<code>OnMailerRecordEmailChangeSend</code> hook is triggered when sending a
confirmation new address email to an auth record, allowing
you to intercept and customize the email message that is being sent.
<code>OnMailerRecordOTPSend</code> hook is triggered when sending an OTP email
to an auth record, allowing you to intercept and customize the
email message that is being sent.
<code>OnRealtimeConnectRequest</code> hook is triggered when establishing the SSE client connection.
Any execution after e.Next() of a hook handler happens after the client disconnects.
These are lower level Record model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling <code>e.Save(record)</code>, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
<a href="#request-hooks">Record <code>*Request</code> hooks</a>
<code>OnRecordEnrich</code> is triggered every time when a record is enriched
- as part of the builtin Record responses, during realtime message serialization, or when <code>apis.EnrichRecord</code> is invoked.
It could be used for example to redact/hide or add computed temporary
Record model props only for the specific request info.
<code>OnRecordValidate</code> is a Record proxy model hook of <code>OnModelValidate</code>.
<code>OnRecordValidate</code> is called every time when a Record is being validated,
e.g. triggered by <code>App.Validate()</code> or <code>App.Save()</code>.
<code>OnRecordCreate</code> is a Record proxy model hook of <code>OnModelCreate</code>.
<code>OnRecordCreate</code> is triggered every time when a new Record is being created,
e.g. triggered by <code>App.Save()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Record validation
and the INSERT DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Record validation
and the INSERT DB statement.
<code>OnRecordCreateExecute</code> is a Record proxy model hook of <code>OnModelCreateExecute</code>.
<code>OnRecordCreateExecute</code> is triggered after successful Record validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the <code>App.Save()</code> in the following firing order:
<br>
<code>OnRecordCreate</code>
<br>
<span class="txt-mono"> -> </span>
<code>OnRecordValidate</code> (skipped with <code>App.SaveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>OnRecordCreateExecute</code>
<code>OnRecordAfterCreateSuccess</code> is a Record proxy model hook of <code>OnModelAfterCreateSuccess</code>.
<code>OnRecordAfterCreateSuccess</code> is triggered after each successful
Record DB create persistence.
<code>OnRecordAfterCreateError</code> is a Record proxy model hook of <code>OnModelAfterCreateError</code>.
<code>OnRecordAfterCreateError</code> is triggered after each failed
Record DB create persistence.
<code>OnRecordUpdate</code> is a Record proxy model hook of <code>OnModelUpdate</code>.
<code>OnRecordUpdate</code> is triggered every time when a new Record is being updated,
e.g. triggered by <code>App.Save()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Record validation
and the UPDATE DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Record validation
and the UPDATE DB statement.
<code>OnRecordUpdateExecute</code> is a Record proxy model hook of <code>OnModelUpdateExecute</code>.
<code>OnRecordUpdateExecute</code> is triggered after successful Record validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the <code>App.Save()</code> in the following firing order:
<br>
<code>OnRecordUpdate</code>
<br>
<span class="txt-mono"> -> </span>
<code>OnRecordValidate</code> (skipped with <code>App.SaveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>OnRecordUpdateExecute</code>
<code>OnRecordAfterUpdateSuccess</code> is a Record proxy model hook of <code>OnModelAfterUpdateSuccess</code>.
<code>OnRecordAfterUpdateSuccess</code> is triggered after each successful
Record DB update persistence.
<code>OnRecordAfterUpdateError</code> is a Record proxy model hook of <code>OnModelAfterUpdateError</code>.
<code>OnRecordAfterUpdateError</code> is triggered after each failed
Record DB update persistence.
<code>OnRecordDelete</code> is a Record proxy model hook of <code>OnModelDelete</code>.
<code>OnRecordDelete</code> is triggered every time when a new Record is being deleted,
e.g. triggered by <code>App.Delete()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Record validation
and the UPDATE DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Record validation
and the UPDATE DB statement.
<code>OnRecordDeleteExecute</code> is a Record proxy model hook of <code>OnModelDeleteExecute</code>.
<code>OnRecordDeleteExecute</code> is triggered after the internal delete checks and
right before the Record the model DELETE DB statement execution.
Usually it is triggered as part of the <code>App.Delete()</code> in the following firing order:
<br>
<code>OnRecordDelete</code>
<br>
<span class="txt-mono"> -> </span>
internal delete checks
<br>
<span class="txt-mono"> -> </span>
<code>OnRecordDeleteExecute</code>
<code>OnRecordAfterDeleteSuccess</code> is a Record proxy model hook of <code>OnModelAfterDeleteSuccess</code>.
<code>OnRecordAfterDeleteSuccess</code> is triggered after each successful
Record DB delete persistence.
<code>OnRecordAfterDeleteError</code> is a Record proxy model hook of <code>OnModelAfterDeleteError</code>.
<code>OnRecordAfterDeleteError</code> is triggered after each failed
Record DB delete persistence.
These are lower level Collection model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling <code>e.Save(collection)</code>, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
<a href="#collection-request-hooks">Collection <code>*Request</code> hooks</a>
<code>OnCollectionValidate</code> is a Collection proxy model hook of <code>OnModelValidate</code>.
<code>OnCollectionValidate</code> is called every time when a Collection is being validated,
e.g. triggered by <code>App.Validate()</code> or <code>App.Save()</code>.
<code>OnCollectionCreate</code> is a Collection proxy model hook of <code>OnModelCreate</code>.
<code>OnCollectionCreate</code> is triggered every time when a new Collection is being created,
e.g. triggered by <code>App.Save()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Collection validation
and the INSERT DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Collection validation
and the INSERT DB statement.
<code>OnCollectionCreateExecute</code> is a Collection proxy model hook of <code>OnModelCreateExecute</code>.
<code>OnCollectionCreateExecute</code> is triggered after successful Collection validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the <code>App.Save()</code> in the following firing order:
<br>
<code>OnCollectionCreate</code>
<br>
<span class="txt-mono"> -> </span>
<code>OnCollectionValidate</code> (skipped with <code>App.SaveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>OnCollectionCreateExecute</code>
<code>OnCollectionAfterCreateSuccess</code> is a Collection proxy model hook of <code>OnModelAfterCreateSuccess</code>.
<code>OnCollectionAfterCreateSuccess</code> is triggered after each successful
Collection DB create persistence.
<code>OnCollectionAfterCreateError</code> is a Collection proxy model hook of <code>OnModelAfterCreateError</code>.
<code>OnCollectionAfterCreateError</code> is triggered after each failed
Collection DB create persistence.
<code>OnCollectionUpdate</code> is a Collection proxy model hook of <code>OnModelUpdate</code>.
<code>OnCollectionUpdate</code> is triggered every time when a new Collection is being updated,
e.g. triggered by <code>App.Save()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Collection validation
and the UPDATE DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Collection validation
and the UPDATE DB statement.
<code>OnCollectionUpdateExecute</code> is a Collection proxy model hook of <code>OnModelUpdateExecute</code>.
<code>OnCollectionUpdateExecute</code> is triggered after successful Collection validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the <code>App.Save()</code> in the following firing order:
<br>
<code>OnCollectionUpdate</code>
<br>
<span class="txt-mono"> -> </span>
<code>OnCollectionValidate</code> (skipped with <code>App.SaveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>OnCollectionUpdateExecute</code>
<code>OnCollectionAfterUpdateSuccess</code> is a Collection proxy model hook of <code>OnModelAfterUpdateSuccess</code>.
<code>OnCollectionAfterUpdateSuccess</code> is triggered after each successful
Collection DB update persistence.
<code>OnCollectionAfterUpdateError</code> is a Collection proxy model hook of <code>OnModelAfterUpdateError</code>.
<code>OnCollectionAfterUpdateError</code> is triggered after each failed
Collection DB update persistence.
<code>OnCollectionDelete</code> is a Collection proxy model hook of <code>OnModelDelete</code>.
<code>OnCollectionDelete</code> is triggered every time when a new Collection is being deleted,
e.g. triggered by <code>App.Delete()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Collection validation
and the UPDATE DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Collection validation
and the UPDATE DB statement.
<code>OnCollectionDeleteExecute</code> is a Collection proxy model hook of <code>OnModelDeleteExecute</code>.
<code>OnCollectionDeleteExecute</code> is triggered after the internal delete checks and
right before the Collection the model DELETE DB statement execution.
Usually it is triggered as part of the <code>App.Delete()</code> in the following firing order:
<br>
<code>OnCollectionDelete</code>
<br>
<span class="txt-mono"> -> </span>
internal delete checks
<br>
<span class="txt-mono"> -> </span>
<code>OnCollectionDeleteExecute</code>
<code>OnCollectionAfterDeleteSuccess</code> is a Collection proxy model hook of <code>OnModelAfterDeleteSuccess</code>.
<code>OnCollectionAfterDeleteSuccess</code> is triggered after each successful
Collection DB delete persistence.
<code>OnCollectionAfterDeleteError</code> is a Collection proxy model hook of <code>OnModelAfterDeleteError</code>.
<code>OnCollectionAfterDeleteError</code> is triggered after each failed
Collection DB delete persistence.
The request hooks are triggered only when the corresponding API request endpoint is accessed.
<code>OnRecordsListRequest</code> hook is triggered on each API Records list request.
Could be used to validate or modify the response before returning it to the client.
<code>OnRecordViewRequest</code> hook is triggered on each API Record view request.
Could be used to validate or modify the response before returning it to the client.
<code>OnRecordCreateRequest</code> hook is triggered on each API Record create request.
<br/>
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>OnRecordUpdateRequest</code> hook is triggered on each API Record update request.
<br/>
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>OnRecordDeleteRequest</code> hook is triggered on each API Record delete request.
<br/>
Could be used to additionally validate the request data or implement
completely different delete behavior.
<code>OnRecordAuthRequest</code> hook is triggered on each successful API
record authentication request (sign-in, token refresh, etc.).
Could be used to additionally validate or modify the authenticated
record data and token.
<code>OnRecordAuthRefreshRequest</code> hook is triggered on each Record
auth refresh API request (right before generating a new auth token).
Could be used to additionally validate the request data or implement
completely different auth refresh behavior.
<code>OnRecordAuthWithPasswordRequest</code> hook is triggered on each
Record auth with password API request.
<code>e.Record</code> could be <code>nil</code> if no matching identity is found, allowing
you to manually locate a different Record model (by reassigning <code>e.Record</code>).
<code>OnRecordAuthWithOAuth2Request</code> hook is triggered on each Record
OAuth2 sign-in/sign-up API request (after token exchange and before external provider linking).
If <code>e.Record</code> is not set, then the OAuth2
request will try to create a new auth record.
<br>
To assign or link a different existing record model you can
change the <code>e.Record</code> field.
<code>OnRecordRequestPasswordResetRequest</code> hook is triggered on
each Record request password reset API request.
Could be used to additionally validate the request data or implement
completely different password reset behavior.
<code>OnRecordConfirmPasswordResetRequest</code> hook is triggered on
each Record confirm password reset API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>OnRecordRequestVerificationRequest</code> hook is triggered on
each Record request verification API request.
Could be used to additionally validate the loaded request data or implement
completely different verification behavior.
<code>OnRecordConfirmVerificationRequest</code> hook is triggered on each
Record confirm verification API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>OnRecordRequestEmailChangeRequest</code> hook is triggered on each
Record request email change API request.
Could be used to additionally validate the request data or implement
completely different request email change behavior.
<code>OnRecordConfirmEmailChangeRequest</code> hook is triggered on each
Record confirm email change API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>OnRecordRequestOTPRequest</code> hook is triggered on each Record
request OTP API request.
<code>e.Record</code> could be <code>nil</code> if no user with the requested email is found, allowing
you to manually create a new Record or locate a different Record model (by reassigning <code>e.Record</code>).
<code>OnRecordAuthWithOTPRequest</code> hook is triggered on each Record
auth with OTP API request.
<code>OnBatchRequest</code> hook is triggered on each API batch request.
Could be used to additionally validate or modify the submitted batch requests.
This hook will also fire the corresponding <code>OnRecordCreateRequest</code>, <code>OnRecordUpdateRequest</code>, <code>OnRecordDeleteRequest</code> hooks, where <code>e.App</code> is the batch transactional app.
<code>OnFileTokenRequest</code> hook is triggered on each auth file token API request.
The Model hooks are fired for all PocketBase structs that implements the Model DB interface - Record, Collection, Log, etc.
For convenience, if you want to listen to only the Record or Collection DB model
events without doing manual type assertion, you can use the
<a href="#record-model-hooks"><code>OnRecord*</code></a>
and
<a href="#collection-model-hooks"><code>OnCollection*</code></a>
proxy hooks above.
<code>OnModelValidate</code> is called every time when a Model is being validated,
e.g. triggered by <code>App.Validate()</code> or <code>App.Save()</code>.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelCreate</code> is triggered every time when a new Model is being created,
e.g. triggered by <code>App.Save()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Model validation
and the INSERT DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Model validation
and the INSERT DB statement.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelCreateExecute</code> is triggered after successful Model validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the <code>App.Save()</code> in the following firing order:
<br>
<code>OnModelCreate</code>
<br>
<span class="txt-mono"> -> </span>
<code>OnModelValidate</code> (skipped with <code>App.SaveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>OnModelCreateExecute</code>
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelAfterCreateSuccess</code> is triggered after each successful
Model DB create persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelAfterCreateError</code> is triggered after each failed
Model DB create persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelUpdate</code> is triggered every time when a new Model is being updated,
e.g. triggered by <code>App.Save()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Model validation
and the UPDATE DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Model validation
and the UPDATE DB statement.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelUpdateExecute</code> is triggered after successful Model validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the <code>App.Save()</code> in the following firing order:
<br>
<code>OnModelUpdate</code>
<br>
<span class="txt-mono"> -> </span>
<code>OnModelValidate</code> (skipped with <code>App.SaveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>OnModelUpdateExecute</code>
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelAfterUpdateSuccess</code> is triggered after each successful
Model DB update persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelAfterUpdateError</code> is triggered after each failed
Model DB update persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelDelete</code> is triggered every time when a new Model is being deleted,
e.g. triggered by <code>App.Delete()</code>.
Operations BEFORE the <code>e.Next()</code> execute before the Model validation
and the UPDATE DB statement.
Operations AFTER the <code>e.Next()</code> execute after the Model validation
and the UPDATE DB statement.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelDeleteExecute</code> is triggered after the internal delete checks and
right before the Model the model DELETE DB statement execution.
Usually it is triggered as part of the <code>App.Delete()</code> in the following firing order:
<br>
<code>OnModelDelete</code>
<br>
<span class="txt-mono"> -> </span>
internal delete checks
<br>
<span class="txt-mono"> -> </span>
<code>OnModelDeleteExecute</code>
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelAfterDeleteSuccess</code> is triggered after each successful
Model DB delete persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<code>OnModelAfterDeleteError</code> is triggered after each failed
Model DB delete persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>OnRecord*</code> and <code>OnCollection*</code> proxy hooks.
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/hook#Hook.Bind" target="_blank" rel="noopener noreferrer"><code class="txt-bold">Bind(handler)</code></a>
adds a new handler to the specified event hook. A handler has 3 fields:
<ul><li><code>Id</code> <em class="txt-hint">(optional)</em> - the name of the handler (could be used
as argument for <code>Unbind</code>)
<code>Priority</code> <em class="txt-hint">(optional)</em> - the execution order of the handler
(if empty fallbacks to the order of registration in the code).
<code>Func</code> <em>(required)</em> - the handler function.
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/hook#Hook.BindFunc" target="_blank" rel="noopener noreferrer"><code class="txt-bold">BindFunc(func)</code></a>
is similar to <code>Bind</code> but registers a new handler from just the provided function.
<br>
The registered handler is added with a default 0 priority and the id is autogenerated (the returned string
value).
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/hook#Hook.Trigger" target="_blank" rel="noopener noreferrer"><code class="txt-bold">Trigger(event, oneOffHandlerFuncs...)</code></a>
triggers the event hook.
<br> <em class="txt-hint">This method rarely has to be called manually by users.</em>
<strong>immediate</strong> on <code>App.Save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Delete()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Delete()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>App.Delete()</code> failure
<strong>delayed</strong> on transaction rollback
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Event hooks
The standard way to modify PocketBase is through
All hooks have 3 main methods:
adds a new handler to the specified event hook. A handler has 3 fields:
- the name of the handler (could be used
as argument for
- the execution order of the handler
(if empty fallbacks to the order of registration in the code).
- the handler function.
but registers a new handler from just the provided function.
The registered handler is added with a default 0 priority and the id is autogenerated (the returned string
value).
Trigger(event, oneOffHandlerFuncs...)
triggers the event hook.
This method rarely has to be called manually by users.
To remove an already registered hook handler, you can use the handler id and pass it to
or remove all handlers with
!including system handlers
All hook handler functions share the same
signature and expect
the user to call
if they want to proceed with the execution chain.
If you need to access the app instance from inside a hook handler, prefer using the
field instead of reusing a parent scope app variable because the hook could be part
of a DB transaction and can cause deadlock.
Also avoid using global mutex locks inside a hook handler because it could be invoked recursively
(e.g. cascade delete) and can cause deadlock.
You can explore all available hooks below:
hook is triggered when initializing the main
application resources (db, app settings, etc).
Note that attempting to access the database before the
call will result in an error.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
hook is triggered when the app web server is started
(after starting the TCP listener but before initializing the blocking serve task),
allowing you to adjust its options and attach new routes or middlewares.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/apis"
"github.com/pocketbase/pocketbase/core"
// register new "GET /hello" route
hook is triggered every time when the
is being replaced with a new state.
returns the new state.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// e.Name    - the name of the backup to create
// e.Exclude - list of pb_data dir entries to exclude from the backup
is triggered before app backup restore (aka. on
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// e.Name    - the name of the backup to restore
// e.Exclude - list of dir entries to exclude from the backup
hook is triggered when the app is in the process
of being terminated (ex. on
Note that the app could be terminated abruptly without awaiting the hook completion.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
hook is triggered every time when a new email is
being send using the
It allows intercepting the email message or to use a custom mailer client.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// ex. change the mail subject
OnMailerRecordAuthAlertSend
OnMailerRecordAuthAlertSend
hook is triggered when
sending a new device login auth alert email, allowing you to
intercept and customize the email message that is being sent.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnMailerRecordAuthAlertSend
// ex. change the mail subject
OnMailerRecordPasswordResetSend
OnMailerRecordPasswordResetSend
hook is triggered when
sending a password reset email to an auth record, allowing
you to intercept and customize the email message that is being sent.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnMailerRecordPasswordResetSend
// ex. change the mail subject
OnMailerRecordVerificationSend
OnMailerRecordVerificationSend
hook is triggered when
sending a verification email to an auth record, allowing
you to intercept and customize the email message that is being sent.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnMailerRecordVerificationSend
// ex. change the mail subject
OnMailerRecordEmailChangeSend
OnMailerRecordEmailChangeSend
hook is triggered when sending a
confirmation new address email to an auth record, allowing
you to intercept and customize the email message that is being sent.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnMailerRecordEmailChangeSend
// ex. change the mail subject
OnMailerRecordOTPSend
OnMailerRecordOTPSend
hook is triggered when sending an OTP email
to an auth record, allowing you to intercept and customize the
email message that is being sent.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnMailerRecordOTPSend
// ex. change the mail subject
OnRealtimeConnectRequest
OnRealtimeConnectRequest
hook is triggered when establishing the SSE client connection.
Any execution after e.Next() of a hook handler happens after the client disconnects.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnRealtimeConnectRequest
RealtimeConnectRequestEvent
// and all RequestEvent fields...
OnRealtimeSubscribeRequest
OnRealtimeSubscribeRequest
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnRealtimeSubscribeRequest
RealtimeSubscribeRequestEvent
// and all RequestEvent fields...
OnRealtimeMessageSend
OnRealtimeMessageSend
hook is triggered when sending an SSE message to a client.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnRealtimeMessageSend
// and all original connect RequestEvent fields...
These are lower level Record model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling
, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
is triggered every time when a record is enriched
- as part of the builtin Record responses, during realtime message serialization, or when
It could be used for example to redact/hide or add computed temporary
Record model props only for the specific request info.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// hide one or more fields
// add new custom field for registered users
// for security requires explicitly allowing it
is a Record proxy model hook of
is called every time when a Record is being validated,
e.g. triggered by
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
// fires only for "users" and "articles" records
Record model create hooks
is a Record proxy model hook of
is triggered every time when a new Record is being created,
e.g. triggered by
Operations BEFORE the
execute before the Record validation
and the INSERT DB statement.
execute after the Record validation
and the INSERT DB statement.
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnRecordAfterCreateSuccess
OnRecordAfterCreateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
// fires only for "users" and "articles" records
OnRecordCreateExecute
OnRecordCreateExecute
is a Record proxy model hook of
OnRecordCreateExecute
is triggered after successful Record validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the
in the following firing order:
OnRecordCreateExecute
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnRecordAfterCreateSuccess
OnRecordAfterCreateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordCreateExecute
// fires only for "users" and "articles" records
OnRecordCreateExecute
OnRecordAfterCreateSuccess
OnRecordAfterCreateSuccess
is a Record proxy model hook of
OnModelAfterCreateSuccess
OnRecordAfterCreateSuccess
is triggered after each successful
Record DB create persistence.
Note that when a Record is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordAfterCreateSuccess
// fires only for "users" and "articles" records
OnRecordAfterCreateSuccess
OnRecordAfterCreateError
OnRecordAfterCreateError
is a Record proxy model hook of
OnModelAfterCreateError
OnRecordAfterCreateError
is triggered after each failed
Record DB create persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordAfterCreateError
// fires only for "users" and "articles" records
OnRecordAfterCreateError
Record model update hooks
is a Record proxy model hook of
is triggered every time when a new Record is being updated,
e.g. triggered by
Operations BEFORE the
execute before the Record validation
and the UPDATE DB statement.
execute after the Record validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnRecordAfterUpdateSuccess
OnRecordAfterUpdateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
// fires only for "users" and "articles" records
OnRecordUpdateExecute
OnRecordUpdateExecute
is a Record proxy model hook of
OnRecordUpdateExecute
is triggered after successful Record validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
OnRecordUpdateExecute
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnRecordAfterUpdateSuccess
OnRecordAfterUpdateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordUpdateExecute
// fires only for "users" and "articles" records
OnRecordUpdateExecute
OnRecordAfterUpdateSuccess
OnRecordAfterUpdateSuccess
is a Record proxy model hook of
OnModelAfterUpdateSuccess
OnRecordAfterUpdateSuccess
is triggered after each successful
Record DB update persistence.
Note that when a Record is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordAfterUpdateSuccess
// fires only for "users" and "articles" records
OnRecordAfterUpdateSuccess
OnRecordAfterUpdateError
OnRecordAfterUpdateError
is a Record proxy model hook of
OnModelAfterUpdateError
OnRecordAfterUpdateError
is triggered after each failed
Record DB update persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordAfterUpdateError
// fires only for "users" and "articles" records
OnRecordAfterUpdateError
Record model delete hooks
is a Record proxy model hook of
is triggered every time when a new Record is being deleted,
e.g. triggered by
Operations BEFORE the
execute before the Record validation
and the UPDATE DB statement.
execute after the Record validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Record
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted deleted events, you can
bind to
OnRecordAfterDeleteSuccess
OnRecordAfterDeleteError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
// fires only for "users" and "articles" records
OnRecordDeleteExecute
OnRecordDeleteExecute
is a Record proxy model hook of
OnRecordDeleteExecute
is triggered after the internal delete checks and
right before the Record the model DELETE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
internal delete checks
OnRecordDeleteExecute
Note that successful execution doesn't guarantee that the Record
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnRecordAfterDeleteSuccess
OnRecordAfterDeleteError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordDeleteExecute
// fires only for "users" and "articles" records
OnRecordDeleteExecute
OnRecordAfterDeleteSuccess
OnRecordAfterDeleteSuccess
is a Record proxy model hook of
OnModelAfterDeleteSuccess
OnRecordAfterDeleteSuccess
is triggered after each successful
Record DB delete persistence.
Note that when a Record is deleted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordAfterDeleteSuccess
// fires only for "users" and "articles" records
OnRecordAfterDeleteSuccess
OnRecordAfterDeleteError
OnRecordAfterDeleteError
is a Record proxy model hook of
OnModelAfterDeleteError
OnRecordAfterDeleteError
is triggered after each failed
Record DB delete persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every record
OnRecordAfterDeleteError
// fires only for "users" and "articles" records
OnRecordAfterDeleteError
Collection model hooks
These are lower level Collection model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling
, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
is a Collection proxy model hook of
is called every time when a Collection is being validated,
e.g. triggered by
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
// fires only for "users" and "articles" collections
Collection mode create hooks
is a Collection proxy model hook of
is triggered every time when a new Collection is being created,
e.g. triggered by
Operations BEFORE the
execute before the Collection validation
and the INSERT DB statement.
execute after the Collection validation
and the INSERT DB statement.
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnCollectionAfterCreateSuccess
OnCollectionAfterCreateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
// fires only for "users" and "articles" collections
OnCollectionCreateExecute
OnCollectionCreateExecute
is a Collection proxy model hook of
OnCollectionCreateExecute
is triggered after successful Collection validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the
in the following firing order:
OnCollectionCreateExecute
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnCollectionAfterCreateSuccess
OnCollectionAfterCreateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionCreateExecute
// fires only for "users" and "articles" collections
OnCollectionCreateExecute
OnCollectionAfterCreateSuccess
OnCollectionAfterCreateSuccess
is a Collection proxy model hook of
OnModelAfterCreateSuccess
OnCollectionAfterCreateSuccess
is triggered after each successful
Collection DB create persistence.
Note that when a Collection is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionAfterCreateSuccess
// fires only for "users" and "articles" collections
OnCollectionAfterCreateSuccess
OnCollectionAfterCreateError
OnCollectionAfterCreateError
is a Collection proxy model hook of
OnModelAfterCreateError
OnCollectionAfterCreateError
is triggered after each failed
Collection DB create persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionAfterCreateError
// fires only for "users" and "articles" collections
OnCollectionAfterCreateError
Collection mode update hooks
is a Collection proxy model hook of
is triggered every time when a new Collection is being updated,
e.g. triggered by
Operations BEFORE the
execute before the Collection validation
and the UPDATE DB statement.
execute after the Collection validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnCollectionAfterUpdateSuccess
OnCollectionAfterUpdateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
// fires only for "users" and "articles" collections
OnCollectionUpdateExecute
OnCollectionUpdateExecute
is a Collection proxy model hook of
OnCollectionUpdateExecute
is triggered after successful Collection validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
OnCollectionUpdateExecute
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnCollectionAfterUpdateSuccess
OnCollectionAfterUpdateError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionUpdateExecute
// fires only for "users" and "articles" collections
OnCollectionUpdateExecute
OnCollectionAfterUpdateSuccess
OnCollectionAfterUpdateSuccess
is a Collection proxy model hook of
OnModelAfterUpdateSuccess
OnCollectionAfterUpdateSuccess
is triggered after each successful
Collection DB update persistence.
Note that when a Collection is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionAfterUpdateSuccess
// fires only for "users" and "articles" collections
OnCollectionAfterUpdateSuccess
OnCollectionAfterUpdateError
OnCollectionAfterUpdateError
is a Collection proxy model hook of
OnModelAfterUpdateError
OnCollectionAfterUpdateError
is triggered after each failed
Collection DB update persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionAfterUpdateError
// fires only for "users" and "articles" collections
OnCollectionAfterUpdateError
Collection mode delete hooks
is a Collection proxy model hook of
is triggered every time when a new Collection is being deleted,
e.g. triggered by
Operations BEFORE the
execute before the Collection validation
and the UPDATE DB statement.
execute after the Collection validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Collection
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted deleted events, you can
bind to
OnCollectionAfterDeleteSuccess
OnCollectionAfterDeleteError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
// fires only for "users" and "articles" collections
OnCollectionDeleteExecute
OnCollectionDeleteExecute
is a Collection proxy model hook of
OnCollectionDeleteExecute
is triggered after the internal delete checks and
right before the Collection the model DELETE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
internal delete checks
OnCollectionDeleteExecute
Note that successful execution doesn't guarantee that the Collection
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnCollectionAfterDeleteSuccess
OnCollectionAfterDeleteError
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionDeleteExecute
// fires only for "users" and "articles" collections
OnCollectionDeleteExecute
OnCollectionAfterDeleteSuccess
OnCollectionAfterDeleteSuccess
is a Collection proxy model hook of
OnModelAfterDeleteSuccess
OnCollectionAfterDeleteSuccess
is triggered after each successful
Collection DB delete persistence.
Note that when a Collection is deleted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionAfterDeleteSuccess
// fires only for "users" and "articles" collections
OnCollectionAfterDeleteSuccess
OnCollectionAfterDeleteError
OnCollectionAfterDeleteError
is a Collection proxy model hook of
OnModelAfterDeleteError
OnCollectionAfterDeleteError
is triggered after each failed
Collection DB delete persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnCollectionAfterDeleteError
// fires only for "users" and "articles" collections
OnCollectionAfterDeleteError
The request hooks are triggered only when the corresponding API request endpoint is accessed.
Record CRUD request hooks
hook is triggered on each API Records list request.
Could be used to validate or modify the response before returning it to the client.
Note that if you want to hide existing or add new computed Record fields prefer using the
hook because it is less error-prone and it is triggered
by all builtin Record responses (including when sending realtime Record events).
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
RecordsListRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
RecordsListRequestEvent
// and all RequestEvent fields...
hook is triggered on each API Record view request.
Could be used to validate or modify the response before returning it to the client.
Note that if you want to hide existing or add new computed Record fields prefer using the
hook because it is less error-prone and it is triggered
by all builtin Record responses (including when sending realtime Record events).
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
OnRecordCreateRequest
OnRecordCreateRequest
hook is triggered on each API Record create request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnRecordCreateRequest
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
OnRecordCreateRequest
// and all RequestEvent fields...
OnRecordUpdateRequest
OnRecordUpdateRequest
hook is triggered on each API Record update request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnRecordUpdateRequest
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
OnRecordUpdateRequest
// and all RequestEvent fields...
OnRecordDeleteRequest
OnRecordDeleteRequest
hook is triggered on each API Record delete request.
Could be used to additionally validate the request data or implement
completely different delete behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every collection
OnRecordDeleteRequest
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
OnRecordDeleteRequest
// and all RequestEvent fields...
Record auth request hooks
hook is triggered on each successful API
record authentication request (sign-in, token refresh, etc.).
Could be used to additionally validate or modify the authenticated
record data and token.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
RecordAuthRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
RecordAuthRequestEvent
// and all RequestEvent fields...
OnRecordAuthRefreshRequest
OnRecordAuthRefreshRequest
hook is triggered on each Record
auth refresh API request (right before generating a new auth token).
Could be used to additionally validate the request data or implement
completely different auth refresh behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordAuthRefreshRequest
RecordAuthWithOAuth2RequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordAuthRefreshRequest
RecordAuthWithOAuth2RequestEvent
// and all RequestEvent fields...
OnRecordAuthWithPasswordRequest
OnRecordAuthWithPasswordRequest
hook is triggered on each
Record auth with password API request.
if no matching identity is found, allowing
you to manually locate a different Record model (by reassigning
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordAuthWithPasswordRequest
RecordAuthWithPasswordRequestEvent
// e.Record (could be nil)
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordAuthWithPasswordRequest
RecordAuthWithPasswordRequestEvent
// e.Record (could be nil)
// and all RequestEvent fields...
OnRecordAuthWithOAuth2Request
OnRecordAuthWithOAuth2Request
hook is triggered on each Record
OAuth2 sign-in/sign-up API request (after token exchange and before external provider linking).
is not set, then the OAuth2
request will try to create a new auth record.
To assign or link a different existing record model you can
change the
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordAuthWithOAuth2Request
RecordAuthWithOAuth2RequestEvent
// e.Record (could be nil)
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordAuthWithOAuth2Request
RecordAuthWithOAuth2RequestEvent
// e.Record (could be nil)
// and all RequestEvent fields...
OnRecordRequestPasswordResetRequest
OnRecordRequestPasswordResetRequest
hook is triggered on
each Record request password reset API request.
Could be used to additionally validate the request data or implement
completely different password reset behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordRequestPasswordResetRequest
RecordRequestPasswordResetRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordRequestPasswordResetRequest
RecordRequestPasswordResetRequestEvent
// and all RequestEvent fields...
OnRecordConfirmPasswordResetRequest
OnRecordConfirmPasswordResetRequest
hook is triggered on
each Record confirm password reset API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordConfirmPasswordResetRequest
RecordConfirmPasswordResetRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordConfirmPasswordResetRequest
RecordConfirmPasswordResetRequestEvent
// and all RequestEvent fields...
OnRecordRequestVerificationRequest
OnRecordRequestVerificationRequest
hook is triggered on
each Record request verification API request.
Could be used to additionally validate the loaded request data or implement
completely different verification behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordRequestVerificationRequest
RecordRequestVerificationRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordRequestVerificationRequest
RecordRequestVerificationRequestEvent
// and all RequestEvent fields...
OnRecordConfirmVerificationRequest
OnRecordConfirmVerificationRequest
hook is triggered on each
Record confirm verification API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordConfirmVerificationRequest
RecordConfirmVerificationRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordConfirmVerificationRequest
RecordConfirmVerificationRequestEvent
// and all RequestEvent fields...
OnRecordRequestEmailChangeRequest
OnRecordRequestEmailChangeRequest
hook is triggered on each
Record request email change API request.
Could be used to additionally validate the request data or implement
completely different request email change behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordRequestEmailChangeRequest
RecordRequestEmailChangeRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordRequestEmailChangeRequest
RecordRequestEmailChangeRequestEvent
// and all RequestEvent fields...
OnRecordConfirmEmailChangeRequest
OnRecordConfirmEmailChangeRequest
hook is triggered on each
Record confirm email change API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordConfirmEmailChangeRequest
RecordConfirmEmailChangeRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordConfirmEmailChangeRequest
RecordConfirmEmailChangeRequestEvent
// and all RequestEvent fields...
OnRecordRequestOTPRequest
OnRecordRequestOTPRequest
hook is triggered on each Record
request OTP API request.
if no user with the requested email is found, allowing
you to manually create a new Record or locate a different Record model (by reassigning
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordRequestOTPRequest
RecordCreateOTPRequestEvent
// e.Record (could be nil)
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordRequestOTPRequest
RecordCreateOTPRequestEvent
// e.Record (could be nil)
// and all RequestEvent fields...
OnRecordAuthWithOTPRequest
OnRecordAuthWithOTPRequest
hook is triggered on each Record
auth with OTP API request.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth collection
OnRecordAuthWithOTPRequest
RecordAuthWithOTPRequestEvent
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
OnRecordAuthWithOTPRequest
RecordAuthWithOTPRequestEvent
// and all RequestEvent fields...
hook is triggered on each API batch request.
Could be used to additionally validate or modify the submitted batch requests.
This hook will also fire the corresponding
OnRecordCreateRequest
OnRecordUpdateRequest
OnRecordDeleteRequest
is the batch transactional app.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// and all RequestEvent fields...
OnFileDownloadRequest
OnFileDownloadRequest
hook is triggered before each API File download request.
Could be used to validate or modify the file response before returning it to the client.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnFileDownloadRequest
FileDownloadRequestEvent
// and all RequestEvent fields...
hook is triggered on each auth file token API request.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every auth model
FileTokenRequestEvent
// and all RequestEvent fields...
// fires only for "users"
FileTokenRequestEvent
// and all RequestEvent fields...
Collection request hooks
OnCollectionsListRequest
OnCollectionsListRequest
hook is triggered on each API Collections list request.
Could be used to validate or modify the response before returning it to the client.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnCollectionsListRequest
CollectionsListRequestEvent
// and all RequestEvent fields...
OnCollectionViewRequest
OnCollectionViewRequest
hook is triggered on each API Collection view request.
Could be used to validate or modify the response before returning it to the client.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnCollectionViewRequest
CollectionRequestEvent
// and all RequestEvent fields...
OnCollectionCreateRequest
OnCollectionCreateRequest
hook is triggered on each API Collection create request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnCollectionCreateRequest
CollectionRequestEvent
// and all RequestEvent fields...
OnCollectionUpdateRequest
OnCollectionUpdateRequest
hook is triggered on each API Collection update request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnCollectionUpdateRequest
CollectionRequestEvent
// and all RequestEvent fields...
OnCollectionDeleteRequest
OnCollectionDeleteRequest
hook is triggered on each API Collection delete request.
Could be used to additionally validate the request data or implement
completely different delete behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnCollectionDeleteRequest
CollectionRequestEvent
// and all RequestEvent fields...
OnCollectionsImportRequest
OnCollectionsImportRequest
hook is triggered on each API
collections import request.
Could be used to additionally validate the imported collections or
to implement completely different import behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnCollectionsImportRequest
CollectionsImportRequestEvent
Settings request hooks
OnSettingsListRequest
OnSettingsListRequest
hook is triggered on each API Settings list request.
Could be used to validate or modify the response before returning it to the client.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnSettingsListRequest
SettingsListRequestEvent
// and all RequestEvent fields...
OnSettingsUpdateRequest
OnSettingsUpdateRequest
hook is triggered on each API Settings update request.
Could be used to additionally validate the request data or
implement completely different persistence behavior.
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnSettingsUpdateRequest
SettingsUpdateRequestEvent
// and all RequestEvent fields...
The Model hooks are fired for all PocketBase structs that implements the Model DB interface - Record, Collection, Log, etc.
For convenience, if you want to listen to only the Record or Collection DB model
events without doing manual type assertion, you can use the
is called every time when a Model is being validated,
e.g. triggered by
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
// fires only for "users" and "articles" models
Base model create hooks
is triggered every time when a new Model is being created,
e.g. triggered by
Operations BEFORE the
execute before the Model validation
and the INSERT DB statement.
execute after the Model validation
and the INSERT DB statement.
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnModelAfterCreateSuccess
OnModelAfterCreateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
// fires only for "users" and "articles" models
is triggered after successful Model validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the
in the following firing order:
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnModelAfterCreateSuccess
OnModelAfterCreateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
// fires only for "users" and "articles" models
OnModelAfterCreateSuccess
OnModelAfterCreateSuccess
is triggered after each successful
Model DB create persistence.
Note that when a Model is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
OnModelAfterCreateSuccess
// fires only for "users" and "articles" models
OnModelAfterCreateSuccess
OnModelAfterCreateError
OnModelAfterCreateError
is triggered after each failed
Model DB create persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
OnModelAfterCreateError
// fires only for "users" and "articles" models
OnModelAfterCreateError
Base model update hooks
is triggered every time when a new Model is being updated,
e.g. triggered by
Operations BEFORE the
execute before the Model validation
and the UPDATE DB statement.
execute after the Model validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnModelAfterUpdateSuccess
OnModelAfterUpdateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
// fires only for "users" and "articles" models
is triggered after successful Model validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnModelAfterUpdateSuccess
OnModelAfterUpdateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
// fires only for "users" and "articles" models
OnModelAfterUpdateSuccess
OnModelAfterUpdateSuccess
is triggered after each successful
Model DB update persistence.
Note that when a Model is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
OnModelAfterUpdateSuccess
// fires only for "users" and "articles" models
OnModelAfterUpdateSuccess
OnModelAfterUpdateError
OnModelAfterUpdateError
is triggered after each failed
Model DB update persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
OnModelAfterUpdateError
// fires only for "users" and "articles" models
OnModelAfterUpdateError
Base model delete hooks
is triggered every time when a new Model is being deleted,
e.g. triggered by
Operations BEFORE the
execute before the Model validation
and the UPDATE DB statement.
execute after the Model validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Model
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted deleted events, you can
bind to
OnModelAfterDeleteSuccess
OnModelAfterDeleteError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
// fires only for "users" and "articles" models
is triggered after the internal delete checks and
right before the Model the model DELETE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
internal delete checks
Note that successful execution doesn't guarantee that the Model
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
OnModelAfterDeleteSuccess
OnModelAfterDeleteError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
// fires only for "users" and "articles" models
OnModelAfterDeleteSuccess
OnModelAfterDeleteSuccess
is triggered after each successful
Model DB delete persistence.
Note that when a Model is deleted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
OnModelAfterDeleteSuccess
// fires only for "users" and "articles" models
OnModelAfterDeleteSuccess
OnModelAfterDeleteError
OnModelAfterDeleteError
is triggered after each failed
Model DB delete persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
// fires for every model
OnModelAfterDeleteError
// fires only for "users" and "articles" models
OnModelAfterDeleteError


--------------------------------------------------------------------------------

[28] Extend with Go - Routing
URL: https://pocketbase.io/docs/go-routing/
Category: hooks
API Endpoint: GET /hello/{name}"
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Routing

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

**API Endpoint:** `GET /hello/{name}"`

## Content

<a href="#routes" class="link-primary"> Routes </a>
<a href="#middlewares" class="link-primary"> Middlewares </a>
<a href="#error-response" class="link-primary"> Error response </a>
<a href="#helpers" class="link-primary"> Helpers </a>
<a href="#sending-request-to-custom-routes-using-the-sdks" class="link-primary"> Sending request to custom routes using the SDKs </a>
<a href="#registering-new-routes" class="link-primary"> Registering new routes </a>
<a href="#path-parameters-and-matching-rules" class="link-primary"> Path parameters and matching rules </a>
<a href="#reading-path-parameters" class="link-primary"> Reading path parameters </a>
<a href="#retrieving-the-current-auth-state" class="link-primary"> Retrieving the current auth state </a>
<a href="#reading-query-parameters" class="link-primary"> Reading query parameters </a>
<a href="#reading-request-headers" class="link-primary"> Reading request headers </a>
<a href="#writing-response-headers" class="link-primary"> Writing response headers </a>
<a href="#retrieving-uploaded-files" class="link-primary"> Retrieving uploaded files </a>
<a href="#reading-request-body" class="link-primary"> Reading request body </a>
<a href="#writing-response-body" class="link-primary"> Writing response body </a>
<a href="#reading-the-client-ip" class="link-primary"> Reading the client IP </a>
<a href="#request-store" class="link-primary"> Request store </a>
<a href="#registering-middlewares" class="link-primary"> Registering middlewares </a>
<a href="#removing-middlewares" class="link-primary"> Removing middlewares </a>
<a href="#builtin-middlewares" class="link-primary"> Builtin middlewares </a>
<a href="#default-globally-registered-middlewares" class="link-primary"> Default globally registered middlewares </a>
<a href="#serving-static-directory" class="link-primary"> Serving static directory </a>
<a href="#auth-response" class="link-primary"> Auth response </a>
<a href="#enrich-records" class="link-primary"> Enrich record(s) </a>
<a href="#go-http-handler-wrappers" class="link-primary"> Go http.Handler wrappers </a>
PocketBase routing is built on top of the standard Go
<a href="https://pkg.go.dev/net/http#ServeMux" target="_blank" rel="noopener noreferrer"><code>net/http.ServeMux</code></a>.
The router can be accessed via the <code>app.OnServe()</code> hook allowing you to register custom endpoints
and middlewares.
Every route has a path, handler function and eventually middlewares attached to it. For example:
There are several routes registration methods available, but the most common ones are:
The router also supports creating groups for routes that share the same base path and middlewares. For
example:
The example registers the following endpoints
<br>
(all require authenticated user access):
Each router group and route could define <a href="#middlewares">middlewares</a> in a similar manner to the
regular app hooks via the <code>Bind/BindFunc</code> methods, allowing you to perform various BEFORE or AFTER
action operations (e.g. inspecting request headers, custom access checks, etc.).
Because PocketBase routing is based on top of the Go standard router mux, we follow the same pattern
matching rules. Below you could find a short overview but for more details please refer to
<a href="https://pkg.go.dev/net/http#ServeMux" target="_blank" rel="noopener noreferrer"><code>net/http.ServeMux</code></a>.
In general, a route pattern looks like <code>[METHOD ][HOST]/[PATH]</code>
(<em>the METHOD prefix is added automatically when using the designated <code>GET()</code>,
<code>POST()</code>, etc. methods)</em>).
Route paths can include parameters in the format <code>{paramName}</code>.
<br>
You can also use <code>{paramName...}</code> format to specify a parameter that targets more than one path
segment.
A pattern ending with a trailing slash <code data-svelte-h="svelte-3m7v69">/</code> acts as anonymous wildcard and matches any requests
that begins with the defined route. If you want to have a trailing slash but to indicate the end of the
URL then you need to end the path with the special
<code>{$}</code> parameter.
If your route path starts with <code>/api/</code>
consider combining it with your unique app name like <code>/api/myapp/...</code> to avoid collisions
with system routes.
Here are some examples:
In the following examples <code>e</code> is usually
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#RequestEvent" target="_blank" rel="noopener noreferrer"><code>*core.RequestEvent</code></a> value.
The request auth state can be accessed (or set) via the <code>RequestEvent.Auth</code> field.
Alternatively you could also access the request data from the summarized request info instance
<em>(usually used in hooks like the <code>OnRecordEnrich</code> where there is no direct access to the request)
</em>.
Body parameters can be read either via
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#Event.BindBody" target="_blank" rel="noopener noreferrer"><code>e.BindBody</code></a>
OR through the parsed request info (<em>requires manual type assertions</em>).
The <code>e.BindBody</code> argument must be a pointer to a struct or <code>map[string]any</code>.
<br>
The following struct tags are supported
<em>(the specific binding rules and which one will be used depend on the request Content-Type)</em>:
NB! When binding structs make sure that they don't have public fields that shouldn't be bindable and it is
advisable such fields to be unexported or define a separate struct with just the safe bindable fields.
<em>For all supported methods, you can refer to
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#Event" target="_blank" rel="noopener noreferrer"><code>router.Event</code></a>
.</em>
The <code>core.RequestEvent</code> comes with a local store that you can use to share custom data between
<a href="#middlewares">middlewares</a> and the route action.
Middlewares allow inspecting, intercepting and filtering route requests.
All middleware functions share the same signature with the route actions (aka.
<code>func(e *core.RequestEvent) error</code>) but expect the user to call <code data-svelte-h="svelte-1rjwm8t">e.Next()</code> if they
want to proceed with the execution chain.
Middlewares can be registered <em>globally</em>, on <em>group</em> and on <em>route</em> level using the
<code>Bind</code>
and <code>BindFunc</code> methods.
Here is a minimal example of what a global middleware looks like:
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#RouterGroup.Bind" target="_blank" rel="noopener noreferrer"><code>RouterGroup.Bind(middlewares...)</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#Route.Bind" target="_blank" rel="noopener noreferrer"><code>Route.Bind(middlewares...)</code></a>
registers one or more middleware handlers.
<br>
Similar to the other app hooks, a middleware handler has 3 fields:
Often you don't need to specify the <code>Id</code> or <code>Priority</code> of the middleware and for
convenience you can instead use directly
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#RouterGroup.BindFunc" target="_blank" rel="noopener noreferrer"><code>RouterGroup.BindFunc(funcs...)</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#Route.BindFunc" target="_blank" rel="noopener noreferrer"><code>Route.BindFunc(funcs...)</code></a> .
Below is a slightly more advanced example showing all options and the execution sequence (<em>2,0,1,3,4</em>):
To remove a registered middleware from the execution chain for a specific group or route you can make use
of the
<code>Unbind(id)</code> method.
Note that only middlewares that have a non-empty <code>Id</code> can be removed.
The
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis" target="_blank" rel="noopener noreferrer"><code>apis</code></a>
package exposes several middlewares that you can use as part of your application.
All PocketBase applications have the below internal middlewares registered out of the box (<em>sorted by their priority</em>):
<br>
PocketBase has a global error handler and every returned error from a route or middleware will be safely
converted by default to a generic <code>ApiError</code> to avoid accidentally leaking sensitive
information (the original raw error message will be visible only in the <em>Dashboard > Logs</em> or when
in <code>--dev</code> mode).
To make it easier returning formatted JSON error responses, the request event provides several
<code>ApiError</code> methods.
<br>
Note that <code>ApiError.RawData()</code> will be returned in the response only if it is a map of
<code>router.SafeErrorItem</code>/<code>validation.Error</code> items.
This is not very common but if you want to return <code>ApiError</code> outside of request related
handlers, you can use the below
<code>apis.*</code> factories:
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#Static" target="_blank" rel="noopener noreferrer"><code>apis.Static()</code></a>
serves static directory content from <code>fs.FS</code> instance.
Expects the route to have a <code>{path...}</code> wildcard parameter.
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#RecordAuthResponse" target="_blank" rel="noopener noreferrer"><code>apis.RecordAuthResponse()</code></a>
writes standardized JSON record auth response (aka. token + record data) into the specified request body.
Could be used as a return result from a custom auth route.
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#EnrichRecord" target="_blank" rel="noopener noreferrer"><code>apis.EnrichRecord()</code></a>
and
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#EnrichRecords" target="_blank" rel="noopener noreferrer"><code>apis.EnrichRecords()</code></a>
helpers parses the request context and enrich the provided record(s) by:
If you want to register standard Go <code>http.Handler</code> function and middlewares, you can use
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#WrapStdHandler" target="_blank" rel="noopener noreferrer"><code>apis.WrapStdHandler(handler)</code></a>
and
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#WrapStdMiddleware" target="_blank" rel="noopener noreferrer"><code>apis.WrapStdMiddleware(func)</code></a>
functions.
The official PocketBase SDKs expose the internal <code>send()</code> method that could be used to send requests
to your custom route(s).
GET /api/myapp -> action1
GET /api/myapp/example/{id} -> action2
PATCH /api/myapp/example/{id} -> action3
GET /api/myapp/example/sub/sub1 -> action4
<code>json</code> (json body)- uses the builtin Go JSON package for unmarshaling.
<code>xml</code> (xml body) - uses the builtin Go XML package for unmarshaling.
<code>form</code> (form data) - utilizes the custom
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#UnmarshalRequestData" target="_blank" rel="noopener noreferrer"><code>router.UnmarshalRequestData</code></a>
method.
<code>Id</code> <em>(optional)</em> - the name of the middleware (could be used as argument for
<code>Unbind</code>)
<code>Priority</code> <em>(optional)</em> - the execution order of the middleware (if empty fallbacks to
the order of registration in the code)
<code>Func</code> <em>(required)</em> - the middleware handler function
<strong>WWW redirect</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultWWWRedirectMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultWWWRedirectMiddlewarePriority</code></a></small> <br> <em>Performs www -> non-www redirect(s) if the request host matches with one of the values in
certificate host policy.</em>
<strong>CORS</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultCorsMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultCorsMiddlewarePriority</code></a></small> <br> <em>By default all origins are allowed (PocketBase is stateless and doesn't rely on cookies) and can
be configured with the <code>--origins</code>
flag but for more advanced customization it can be also replaced entirely by binding with
<code>apis.CORS(config)</code> middleware or registering your own custom one in its place.</em>
<strong>Activity logger</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultActivityLoggerMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultActivityLoggerMiddlewarePriority</code></a></small> <br> <em>Saves request information into the logs auxiliary database.</em>
<strong>Auto panic recover</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultPanicRecoverMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultPanicRecoverMiddlewarePriority</code></a></small> <br> <em>Default panic-recover handler.</em>
<strong>Auth token loader</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultLoadAuthTokenMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultLoadAuthTokenMiddlewarePriority</code></a></small> <br> <em>Loads the auth token from the <code>Authorization</code> header and populates the related auth
record into the request event (aka. <code>e.Auth</code>).</em>
<strong>Security response headers</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultSecurityHeadersMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultSecurityHeadersMiddlewarePriority</code></a></small> <br> <em>Adds default common security headers (<code>X-XSS-Protection</code>,
<code>X-Content-Type-Options</code>,
<code>X-Frame-Options</code>) to the response (can be overwritten by other middlewares or from
inside the route action).</em>
<strong>Rate limit</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultRateLimitMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultRateLimitMiddlewarePriority</code></a></small> <br> <em>Rate limits client requests based on the configured app settings (it does nothing if the rate
limit option is not enabled).</em>
<strong>Body limit</strong> <small class="txt-hint"><a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultBodyLimitMiddlewareId</code></a> <a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/apis#pkg-constants" target="_blank" rel="noopener noreferrer"><code>apis.DefaultBodyLimitMiddlewarePriority</code></a></small> <br> <em>Applies a default max ~32MB request body limit for all custom routes ( system record routes have
dynamic body size limit based on their collection field types). Can be overwritten on group/route
level by simply rebinding the <code>apis.BodyLimit(limitBytes)</code> middleware.</em>
expands relations (if <code>defaultExpands</code> and/or <code>?expand</code> query parameter is set)
ensures that the emails of the auth record and its expanded auth relations are visible only for the
current logged superuser, record owner or record with manage access
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Routing
PocketBase routing is built on top of the standard Go
The router can be accessed via the
hook allowing you to register custom endpoints
and middlewares.
Registering new routes
Every route has a path, handler function and eventually middlewares attached to it. For example:
// register "GET /hello/{name}" route (allowed for everyone)
// register "POST /api/myapp/settings" route (allowed only for authenticated users)
"/api/myapp/settings"
There are several routes registration methods available, but the most common ones are:
// If you want to handle any HTTP method define only a path (e.g. "/example")
// OR if you want to specify a custom one add it as prefix to the path (e.g. "TRACE /example")
The router also supports creating groups for routes that share the same base path and middlewares. For
example:
/* custom route specific middleware func */
The example registers the following endpoints
(all require authenticated user access):
GET /api/myapp -> action1
GET /api/myapp/example/{id} -> action2
PATCH /api/myapp/example/{id} -> action3
GET /api/myapp/example/sub/sub1 -> action4
Each router group and route could define
in a similar manner to the
regular app hooks via the
methods, allowing you to perform various BEFORE or AFTER
action operations (e.g. inspecting request headers, custom access checks, etc.).
Path parameters and matching rules
Because PocketBase routing is based on top of the Go standard router mux, we follow the same pattern
matching rules. Below you could find a short overview but for more details please refer to
In general, a route pattern looks like
[METHOD ][HOST]/[PATH]
the METHOD prefix is added automatically when using the designated
Route paths can include parameters in the format
format to specify a parameter that targets more than one path
segment.
A pattern ending with a trailing slash
acts as anonymous wildcard and matches any requests
that begins with the defined route. If you want to have a trailing slash but to indicate the end of the
URL then you need to end the path with the special
If your route path starts with
consider combining it with your unique app name like
to avoid collisions
with system routes.
Here are some examples:
// match "GET example.com/index.html"
"example.com/index.html"
// match "GET /index.html" (for any host)
// match "GET /static/", "GET /static/a/b/c", etc.
// match "GET /static/", "GET /static/a/b/c", etc.
// (similar to the above but with a named wildcard parameter)
// match only "GET /static/" (if no "/static" is registered, it is 301 redirected)
// match "GET /customers/john", "GET /customers/jane", etc.
In the following examples
Reading path parameters
Retrieving the current auth state
The request auth state can be accessed (or set) via the
// the same as "e.Auth != nil && e.Auth.IsSuperuser()"
Alternatively you could also access the request data from the summarized request info instance
(usually used in hooks like the
where there is no direct access to the request)
// the same as "info.Auth != nil && info.Auth.IsSuperuser()"
Reading query parameters
// or via the parsed request info
Reading request headers
// or via the parsed request info
// (the header value is always normalized per the @request.headers.* API rules format)
Writing response headers
Retrieving uploaded files
// retrieve the uploaded files and parse the found multipart data into a ready-to-use []*filesystem.File
// or retrieve the raw single multipart/form-data file and header
Body parameters can be read either via
OR through the parsed request info (
requires manual type assertions
argument must be a pointer to a struct or
The following struct tags are supported
(the specific binding rules and which one will be used depend on the request Content-Type)
(json body)- uses the builtin Go JSON package for unmarshaling.
(xml body) - uses the builtin Go XML package for unmarshaling.
(form data) - utilizes the custom
router.UnmarshalRequestData
NB! When binding structs make sure that they don't have public fields that shouldn't be bindable and it is
advisable such fields to be unexported or define a separate struct with just the safe bindable fields.
// read/scan the request body fields into a typed struct
// unexported to prevent binding
`json:"title" form:"title"`
`json:"active" form:"active"`
"Failed to read request data"
// alternatively, read the body via the parsed request info
Writing response body
For all supported methods, you can refer to
// send response with JSON body
// (it also provides a generic response fields picker/filter if the "fields" query parameter is set)
// send response with string body
// send response with HTML body
// (check also the "Rendering templates" section)
StatusTemporaryRedirect
"https://example.com"
// send response with no body
// serve a single file
// stream the specified reader
"application/octet-stream"
// send response with blob (bytes slice) body
"application/octet-stream"
Reading the client IP
// The IP of the last client connecting to your server.
// The returned IP is safe and can be always trusted.
// When behind a reverse proxy (e.g. nginx) this method returns the IP of the proxy.
// https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/router#Event.RemoteIP
// The "real" IP of the client based on the configured Settings.TrustedProxy header(s).
// If such headers are not set, it fallbacks to e.RemoteIP().
// https://pkg.go.dev/github.com/pocketbase/pocketbase/core#RequestEvent.RealIP
comes with a local store that you can use to share custom data between
and the route action.
// store for the duration of the request
Registering middlewares
Middlewares allow inspecting, intercepting and filtering route requests.
All middleware functions share the same signature with the route actions (aka.
func(e *core.RequestEvent) error
) but expect the user to call
if they
want to proceed with the execution chain.
Middlewares can be registered
Here is a minimal example of what a global middleware looks like:
// register a global middleware
"Something header value is missing!"
RouterGroup.Bind(middlewares...)
Route.Bind(middlewares...)
registers one or more middleware handlers.
Similar to the other app hooks, a middleware handler has 3 fields:
- the name of the middleware (could be used as argument for
- the execution order of the middleware (if empty fallbacks to
the order of registration in the code)
- the middleware handler function
Often you don't need to specify the
of the middleware and for
convenience you can instead use directly
RouterGroup.BindFunc(funcs...)
Route.BindFunc(funcs...)
Below is a slightly more advanced example showing all options and the execution sequence (
// attach global middleware
// attach group middleware
// attach group middleware with an id and custom priority
// attach middleware to a single route
// "GET /sub/hello" should print the sequence: 2,0,1,3,4
To remove a registered middleware from the execution chain for a specific group or route you can make use
of the
Note that only middlewares that have a non-empty
// "GET /A" invokes the "test" middleware
// "GET /B" doesn't invoke the "test" middleware
package exposes several middlewares that you can use as part of your application.
// Require the request client to be unauthenticated (aka. guest).
// Example: Route.Bind(apis.RequireGuestOnly())
// Require the request client to be authenticated
// (optionally specify a list of allowed auth collection names, default to any).
// Example: Route.Bind(apis.RequireAuth())
// Require the request client to be authenticated as superuser
// (this is an alias for apis.RequireAuth(core.CollectionNameSuperusers)).
// Example: Route.Bind(apis.RequireSuperuserAuth())
// Require the request client to be authenticated as superuser OR
// regular auth record with id matching the specified route parameter (default to "id").
// Example: Route.Bind(apis.RequireSuperuserOrOwnerAuth(""))
RequireSuperuserOrOwnerAuth
// Changes the global 32MB default request body size limit (set it to 0 for no limit).
// Note that system record routes have dynamic body size limit based on their collection field types.
// Example: Route.Bind(apis.BodyLimit(10 << 20))
// Compresses the HTTP response using Gzip compression scheme.
// Example: Route.Bind(apis.Gzip())
// Instructs the activity logger to log only requests that have failed/returned an error.
// Example: Route.Bind(apis.SkipSuccessActivityLog())
SkipSuccessActivityLog
Default globally registered middlewares
The below list is mostly useful for users that may want to plug their own custom middlewares before/after
the priority of the default global ones, for example: registering a custom auth loader before the rate
limiter with
apis.DefaultRateLimitMiddlewarePriority - 1
so that the rate limit can be applied
properly based on the loaded auth state.
All PocketBase applications have the below internal middlewares registered out of the box (
sorted by their priority
apis.DefaultWWWRedirectMiddlewareId
apis.DefaultWWWRedirectMiddlewarePriority
Performs www -> non-www redirect(s) if the request host matches with one of the values in
certificate host policy.
apis.DefaultCorsMiddlewareId
apis.DefaultCorsMiddlewarePriority
By default all origins are allowed (PocketBase is stateless and doesn't rely on cookies) and can
be configured with the
flag but for more advanced customization it can be also replaced entirely by binding with
middleware or registering your own custom one in its place.
apis.DefaultActivityLoggerMiddlewareId
apis.DefaultActivityLoggerMiddlewarePriority
Saves request information into the logs auxiliary database.
apis.DefaultPanicRecoverMiddlewareId
apis.DefaultPanicRecoverMiddlewarePriority
Default panic-recover handler.
apis.DefaultLoadAuthTokenMiddlewareId
apis.DefaultLoadAuthTokenMiddlewarePriority
Loads the auth token from the
header and populates the related auth
record into the request event (aka.
Security response headers
apis.DefaultSecurityHeadersMiddlewareId
apis.DefaultSecurityHeadersMiddlewarePriority
Adds default common security headers (
X-Content-Type-Options
) to the response (can be overwritten by other middlewares or from
inside the route action).
apis.DefaultRateLimitMiddlewareId
apis.DefaultRateLimitMiddlewarePriority
Rate limits client requests based on the configured app settings (it does nothing if the rate
limit option is not enabled).
apis.DefaultBodyLimitMiddlewareId
apis.DefaultBodyLimitMiddlewarePriority
Applies a default max ~32MB request body limit for all custom routes ( system record routes have
dynamic body size limit based on their collection field types). Can be overwritten on group/route
level by simply rebinding the
apis.BodyLimit(limitBytes)
PocketBase has a global error handler and every returned error from a route or middleware will be safely
converted by default to a generic
to avoid accidentally leaking sensitive
information (the original raw error message will be visible only in the
To make it easier returning formatted JSON error responses, the request event provides several
will be returned in the response only if it is a map of
"github.com/go-ozzo/ozzo-validation/v4"
// construct ApiError with custom status code and validation data error
"something went wrong"
"Invalid or missing title"
// if message is empty string, a default one will be set
This is not very common but if you want to return
outside of request related
handlers, you can use the below
"github.com/go-ozzo/ozzo-validation/v4"
"github.com/pocketbase/pocketbase/apis"
// construct ApiError with custom status code and validation data error
"something went wrong"
"Invalid or missing title"
// if message is empty string, a default one will be set
NewTooManyRequestsError
NewInternalServerError
Serving static directory
serves static directory content from
Expects the route to have a
// serves static files from the provided dir (if exists)
apis.RecordAuthResponse()
writes standardized JSON record auth response (aka. token + record data) into the specified request body.
Could be used as a return result from a custom auth route.
`json:"phone" form:"phone"`
`json:"password" form:"password"`
"Failed to read request data"
FindFirstRecordByData
// return generic 400 error as a basic enumeration protection
"Invalid credentials"
helpers parses the request context and enrich the provided record(s) by:
expands relations (if
query parameter is set)
ensures that the emails of the auth record and its expanded auth relations are visible only for the
current logged superuser, record owner or record with manage access
// enrich the records with the "categories" relation as default expand
Go http.Handler wrappers
If you want to register standard Go
function and middlewares, you can use
apis.WrapStdHandler(handler)
apis.WrapStdMiddleware(func)
Sending request to custom routes using the SDKs
The official PocketBase SDKs expose the internal
method that could be used to send requests
to your custom route(s).
'http://127.0.0.1:8090'
// for other options check
// https://developer.mozilla.org/en-US/docs/Web/API/fetch#options
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'


--------------------------------------------------------------------------------

[29] Extend with Go - Database
URL: https://pocketbase.io/docs/go-database/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Database

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#executing-queries" class="link-primary"> Executing queries </a>
<a href="#binding-parameters" class="link-primary"> Binding parameters </a>
<a href="#query-builder" class="link-primary"> Query builder </a>
<a href="#transaction" class="link-primary"> Transaction </a>
<a href="#select-andselect-distinct" class="link-primary"> Select(), AndSelect(), Distinct() </a>
<a href="#from" class="link-primary"> From() </a>
<a href="#join" class="link-primary"> Join() </a>
<a href="#where-andwhere-orwhere" class="link-primary"> Where(), AndWhere(), OrWhere() </a>
<a href="#orderby-andorderby" class="link-primary"> OrderBy(), AndOrderBy() </a>
<a href="#groupby-andgroupby" class="link-primary"> GroupBy(), AndGroupBy() </a>
<a href="#having-andhaving-orhaving" class="link-primary"> Having(), AndHaving(), OrHaving() </a>
<a href="#limit" class="link-primary"> Limit() </a>
<a href="#offset" class="link-primary"> Offset() </a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#App" target="_blank" rel="noopener noreferrer"><code>core.App</code></a>
is the main interface to interact with the database.
<code>App.DB()</code> returns a <code>dbx.Builder</code> that can run all kinds of SQL statements, including
raw queries.
Most of the common DB operations are listed below, but you can find further information in the
<a href="https://pkg.go.dev/github.com/pocketbase/dbx" target="_blank" rel="noopener noreferrer">dbx package godoc
</a>.
For more details and examples how to interact with Record and Collection models programmatically
you could also check <a href="/docs/go-collections">Collection operations</a>
and
<a href="/docs/go-records">Record operations</a> sections.
To execute DB queries you can start with the <code>NewQuery("...")</code> statement and then call one of:
<code id="execute" class="heading-link "><a href="#execute" class="link-primary"> Execute() </a></code>
- for any query statement that is not meant to retrieve data:
<code id="execute-one" class="heading-link "><a href="#execute-one" class="link-primary"> One() </a></code>
- to populate a single row into a struct:
<code id="execute-all" class="heading-link "><a href="#execute-all" class="link-primary"> All() </a></code>
- to populate multiple rows into a slice of structs:
To prevent SQL injection attacks, you should use named parameters for any expression value that comes from
user input. This could be done using the named <code>{:paramName}</code>
placeholders in your SQL statement and then define the parameter values for the query with
<code data-svelte-h="svelte-1x59eyu">Bind(params)</code>. For example:
Instead of writing plain SQLs, you can also compose SQL statements programmatically using the db query
builder.
<br>
Every SQL keyword has a corresponding query building method. For example, <code>SELECT</code> corresponds
to <code>Select()</code>, <code>FROM</code> corresponds to <code>From()</code>,
<code>WHERE</code> corresponds to <code>Where()</code>, and so on.
The <code>Select(...cols)</code> method initializes a <code>SELECT</code> query builder. It accepts a list
of the column names to be selected.
<br>
To add additional columns to an existing select query, you can call <code>AndSelect()</code>.
<br>
To select distinct rows, you can call <code>Distinct(true)</code>.
The <code>From(...tables)</code> method specifies which tables to select from (plain table names are automatically
quoted).
The <code>Join(type, table, on)</code> method specifies a <code>JOIN</code> clause. It takes 3 parameters:
For convenience, you can also use the shortcuts <code>InnerJoin(table, on)</code>,
<code>LeftJoin(table, on)</code>,
<code>RightJoin(table, on)</code> to specify <code>INNER JOIN</code>, <code>LEFT JOIN</code> and
<code>RIGHT JOIN</code>, respectively.
The <code>Where(exp)</code> method specifies the <code>WHERE</code> condition of the query.
<br>
You can also use <code>AndWhere(exp)</code> or <code>OrWhere(exp)</code> to append additional one or more
conditions to an existing <code>WHERE</code> clause.
<br>
Each where condition accepts a single <code>dbx.Expression</code> (see below for full list).
The following <code>dbx.Expression</code> methods are available:
The <code>OrderBy(...cols)</code> specifies the <code>ORDER BY</code> clause of the query.
<br>
A column name can contain <em>"ASC"</em> or <em>"DESC"</em> to indicate its ordering direction.
<br>
You can also use <code>AndOrderBy(...cols)</code> to append additional columns to an existing
<code>ORDER BY</code> clause.
The <code>GroupBy(...cols)</code> specifies the <code>GROUP BY</code> clause of the query.
<br>
You can also use <code>AndGroupBy(...cols)</code> to append additional columns to an existing
<code>GROUP BY</code> clause.
The <code>Having(exp)</code> specifies the <code>HAVING</code> clause of the query.
<br>
Similarly to
<code>Where(exp)</code>, it accept a single <code>dbx.Expression</code> (see all available expressions
listed above).
<br>
You can also use <code>AndHaving(exp)</code> or <code>OrHaving(exp)</code> to append additional one or
more conditions to an existing <code>HAVING</code> clause.
The <code>Limit(number)</code> method specifies the <code>LIMIT</code> clause of the query.
The <code>Offset(number)</code> method specifies the <code>OFFSET</code> clause of the query. Usually used
together with <code>Limit(number)</code>.
To execute multiple queries in a transaction you can use
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.RunInTransaction" target="_blank" rel="noopener noreferrer"><code>app.RunInTransaction(fn)</code></a>
The DB operations are persisted only if the transaction returns <code>nil</code>.
It is safe to nest <code>RunInTransaction</code> calls as long as you use the callback's
<code>txApp</code> argument.
Inside the transaction function always use its <code>txApp</code> argument and not the original
<code>app</code> instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
<p><code id="execute" class="heading-link "><a href="#execute" class="link-primary"> Execute() </a></code>
- for any query statement that is not meant to retrieve data:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->res<span class="token punctuation">,</span> err <span class="token operator">:=</span> app<span class="token punctuation">.</span><span class="token function">DB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">NewQuery</span><span class="token punctuation">(</span><span class="token string">"DELETE FROM articles WHERE status = 'archived'"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<p><code id="execute-one" class="heading-link "><a href="#execute-one" class="link-primary"> One() </a></code>
- to populate a single row into a struct:</p>  <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
Id     <span class="token builtin">string</span>                  <span class="token string">`db:"id" json:"id"`</span>
Status <span class="token builtin">bool</span>                    <span class="token string">`db:"status" json:"status"`</span>
Age    <span class="token builtin">int</span>                     <span class="token string">`db:"age" json:"age"`</span>
Roles  types<span class="token punctuation">.</span>JSONArray<span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token string">`db:"roles" json:"roles"`</span>
<span class="token punctuation">}</span>
user <span class="token operator">:=</span> User<span class="token punctuation">{</span><span class="token punctuation">}</span>
err <span class="token operator">:=</span> app<span class="token punctuation">.</span><span class="token function">DB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">NewQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT id, status, age, roles FROM users WHERE id=1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">One</span><span class="token punctuation">(</span><span class="token operator">&</span>user<span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<p><code id="execute-all" class="heading-link "><a href="#execute-all" class="link-primary"> All() </a></code>
- to populate multiple rows into a slice of structs:</p>  <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
Id     <span class="token builtin">string</span>                  <span class="token string">`db:"id" json:"id"`</span>
Status <span class="token builtin">bool</span>                    <span class="token string">`db:"status" json:"status"`</span>
Age    <span class="token builtin">int</span>                     <span class="token string">`db:"age" json:"age"`</span>
Roles  types<span class="token punctuation">.</span>JSONArray<span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token string">`db:"roles" json:"roles"`</span>
<span class="token punctuation">}</span>
users <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>User<span class="token punctuation">{</span><span class="token punctuation">}</span>
err <span class="token operator">:=</span> app<span class="token punctuation">.</span><span class="token function">DB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">NewQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT id, status, age, roles FROM users LIMIT 100"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">All</span><span class="token punctuation">(</span><span class="token operator">&</span>users<span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code>type</code> - join type string like <code>INNER JOIN</code>, <code>LEFT JOIN</code>, etc.
<code>table</code> - the name of the table to be joined
<code>on</code> - optional <code>dbx.Expression</code> as an <code>ON</code> clause
<code id="dbx-newexpraw-optparams" class="heading-link "><a href="#dbx-newexpraw-optparams" class="link-primary"> dbx.NewExp(raw, optParams) </a></code> <br>
Generates an expression with the specified raw query fragment. Use the <code data-svelte-h="svelte-yuyhnj">optParams</code> to bind
<code data-svelte-h="svelte-m73jqu">dbx.Params</code> to the expression.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->dbx<span class="token punctuation">.</span><span class="token function">NewExp</span><span class="token punctuation">(</span><span class="token string">"status = 'public'"</span><span class="token punctuation">)</span>
dbx<span class="token punctuation">.</span><span class="token function">NewExp</span><span class="token punctuation">(</span><span class="token string">"total > {:min} AND total < {:max}"</span><span class="token punctuation">,</span> dbx<span class="token punctuation">.</span>Params<span class="token punctuation">{</span> <span class="token string">"min"</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"max"</span><span class="token punctuation">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-hashexpkv" class="heading-link "><a href="#dbx-hashexpkv" class="link-primary"> dbx.HashExp{k:v} </a></code> <br>
Generates a hash expression from a map whose keys are DB column names which need to be filtered according
to the corresponding values.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// slug = "example" AND active IS TRUE AND tags in ("tag1", "tag2", "tag3") AND parent IS NULL</span>
dbx<span class="token punctuation">.</span>HashExp<span class="token punctuation">{</span>
<span class="token string">"slug"</span><span class="token punctuation">:</span>   <span class="token string">"example"</span><span class="token punctuation">,</span>
<span class="token string">"active"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token string">"tags"</span><span class="token punctuation">:</span>   <span class="token punctuation">[</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span><span class="token string">"tag1"</span><span class="token punctuation">,</span> <span class="token string">"tag2"</span><span class="token punctuation">,</span> <span class="token string">"tag3"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">"parent"</span><span class="token punctuation">:</span> <span class="token boolean">nil</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notexp" class="heading-link "><a href="#dbx-notexp" class="link-primary"> dbx.Not(exp) </a></code> <br>
Negates a single expression by wrapping it with <code data-svelte-h="svelte-dkbc98">NOT()</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// NOT(status = 1)</span>
dbx<span class="token punctuation">.</span><span class="token function">Not</span><span class="token punctuation">(</span>dbx<span class="token punctuation">.</span><span class="token function">NewExp</span><span class="token punctuation">(</span><span class="token string">"status = 1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-and-exps" class="heading-link "><a href="#dbx-and-exps" class="link-primary"> dbx.And(...exps) </a></code> <br>
Creates a new expression by concatenating the specified ones with <code data-svelte-h="svelte-12doej9">AND</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// (status = 1 AND username like "%john%")</span>
dbx<span class="token punctuation">.</span><span class="token function">And</span><span class="token punctuation">(</span>
dbx<span class="token punctuation">.</span><span class="token function">NewExp</span><span class="token punctuation">(</span><span class="token string">"status = 1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
dbx<span class="token punctuation">.</span><span class="token function">Like</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-or-exps" class="heading-link "><a href="#dbx-or-exps" class="link-primary"> dbx.Or(...exps) </a></code> <br>
Creates a new expression by concatenating the specified ones with <code data-svelte-h="svelte-1dtrn8t">OR</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// (status = 1 OR username like "%john%")</span>
dbx<span class="token punctuation">.</span><span class="token function">Or</span><span class="token punctuation">(</span>
dbx<span class="token punctuation">.</span><span class="token function">NewExp</span><span class="token punctuation">(</span><span class="token string">"status = 1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
dbx<span class="token punctuation">.</span><span class="token function">Like</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"john"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-incol-values" class="heading-link "><a href="#dbx-incol-values" class="link-primary"> dbx.In(col, ...values) </a></code> <br>
Generates an <code data-svelte-h="svelte-1afmjj7">IN</code> expression for the specified column and the list of allowed values.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// status IN ("public", "reviewed")</span>
dbx<span class="token punctuation">.</span><span class="token function">In</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token string">"public"</span><span class="token punctuation">,</span> <span class="token string">"reviewed"</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notincol-values" class="heading-link "><a href="#dbx-notincol-values" class="link-primary"> dbx.NotIn(col, ...values) </a></code> <br>
Generates an <code data-svelte-h="svelte-473alg">NOT IN</code> expression for the specified column and the list of allowed values.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// status NOT IN ("public", "reviewed")</span>
dbx<span class="token punctuation">.</span><span class="token function">NotIn</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token string">"public"</span><span class="token punctuation">,</span> <span class="token string">"reviewed"</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-likecol-values" class="heading-link "><a href="#dbx-likecol-values" class="link-primary"> dbx.Like(col, ...values) </a></code> <br>
Generates a <code data-svelte-h="svelte-1v6lktz">LIKE</code> expression for the specified column and the possible strings that the
column should be like. If multiple values are present, the column should be like
<strong data-svelte-h="svelte-pckt2v">all</strong> of them.
<br>
By default, each value will be surrounded by <em data-svelte-h="svelte-1e5kqvl">"%"</em> to enable partial matching. Special
characters like <em data-svelte-h="svelte-1e5kqvl">"%"</em>, <em data-svelte-h="svelte-19yseh6">"\"</em>, <em data-svelte-h="svelte-1aejt4n">"_"</em> will also be properly escaped. You may call
<code data-svelte-h="svelte-1tf60oh">Escape(...pairs)</code> and/or <code data-svelte-h="svelte-vv2tdv">Match(left, right)</code> to change the default behavior.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name LIKE "%test1%" AND name LIKE "%test2%"</span>
dbx<span class="token punctuation">.</span><span class="token function">Like</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name LIKE "test1%"</span>
dbx<span class="token punctuation">.</span><span class="token function">Like</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notlikecol-values" class="heading-link "><a href="#dbx-notlikecol-values" class="link-primary"> dbx.NotLike(col, ...values) </a></code> <br>
Generates a <code data-svelte-h="svelte-1dawmxs">NOT LIKE</code> expression in similar manner as <code data-svelte-h="svelte-105z59o">Like()</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name NOT LIKE "%test1%" AND name NOT LIKE "%test2%"</span>
dbx<span class="token punctuation">.</span><span class="token function">NotLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name NOT LIKE "test1%"</span>
dbx<span class="token punctuation">.</span><span class="token function">NotLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-orlikecol-values" class="heading-link "><a href="#dbx-orlikecol-values" class="link-primary"> dbx.OrLike(col, ...values) </a></code> <br>
This is similar to <code data-svelte-h="svelte-105z59o">Like()</code> except that the column must be one of the provided values, aka.
multiple values are concatenated with <code data-svelte-h="svelte-1dtrn8t">OR</code> instead of <code data-svelte-h="svelte-12doej9">AND</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name LIKE "%test1%" OR name LIKE "%test2%"</span>
dbx<span class="token punctuation">.</span><span class="token function">OrLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name LIKE "test1%" OR name LIKE "test2%"</span>
dbx<span class="token punctuation">.</span><span class="token function">OrLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-ornotlikecol-values" class="heading-link "><a href="#dbx-ornotlikecol-values" class="link-primary"> dbx.OrNotLike(col, ...values) </a></code> <br>
This is similar to <code data-svelte-h="svelte-1qu6ogx">NotLike()</code> except that the column must not be one of the provided
values, aka. multiple values are concatenated with <code data-svelte-h="svelte-1dtrn8t">OR</code> instead of <code data-svelte-h="svelte-12doej9">AND</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name NOT LIKE "%test1%" OR name NOT LIKE "%test2%"</span>
dbx<span class="token punctuation">.</span><span class="token function">OrNotLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name NOT LIKE "test1%" OR name NOT LIKE "test2%"</span>
dbx<span class="token punctuation">.</span><span class="token function">OrNotLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-existsexp" class="heading-link "><a href="#dbx-existsexp" class="link-primary"> dbx.Exists(exp) </a></code> <br>
Prefix with <code data-svelte-h="svelte-1c5kcl8">EXISTS</code> the specified expression (usually a subquery).
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// EXISTS (SELECT 1 FROM users WHERE status = 'active')</span>
dbx<span class="token punctuation">.</span><span class="token function">Exists</span><span class="token punctuation">(</span>dbx<span class="token punctuation">.</span><span class="token function">NewExp</span><span class="token punctuation">(</span><span class="token string">"SELECT 1 FROM users WHERE status = 'active'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notexistsexp" class="heading-link "><a href="#dbx-notexistsexp" class="link-primary"> dbx.NotExists(exp) </a></code> <br>
Prefix with <code data-svelte-h="svelte-10qzrq7">NOT EXISTS</code> the specified expression (usually a subquery).
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// NOT EXISTS (SELECT 1 FROM users WHERE status = 'active')</span>
dbx<span class="token punctuation">.</span><span class="token function">NotExists</span><span class="token punctuation">(</span>dbx<span class="token punctuation">.</span><span class="token function">NewExp</span><span class="token punctuation">(</span><span class="token string">"SELECT 1 FROM users WHERE status = 'active'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-betweencol-from-to" class="heading-link "><a href="#dbx-betweencol-from-to" class="link-primary"> dbx.Between(col, from, to) </a></code> <br>
Generates a <code data-svelte-h="svelte-o8g806">BETWEEN</code> expression with the specified range.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// age BETWEEN 3 and 99</span>
dbx<span class="token punctuation">.</span><span class="token function">Between</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notbetweencol-from-to" class="heading-link "><a href="#dbx-notbetweencol-from-to" class="link-primary"> dbx.NotBetween(col, from, to) </a></code> <br>
Generates a <code data-svelte-h="svelte-1i7pgkh">NOT BETWEEN</code> expression with the specified range.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// age NOT BETWEEN 3 and 99</span>
dbx<span class="token punctuation">.</span><span class="token function">NotBetween</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Database
is the main interface to interact with the database.
that can run all kinds of SQL statements, including
raw queries.
Most of the common DB operations are listed below, but you can find further information in the
For more details and examples how to interact with Record and Collection models programmatically
you could also check
Collection operations
To execute DB queries you can start with the
statement and then call one of:
- for any query statement that is not meant to retrieve data:
"DELETE FROM articles WHERE status = 'archived'"
- to populate a single row into a struct:
`db:"status" json:"status"`
`db:"age" json:"age"`
`db:"roles" json:"roles"`
"SELECT id, status, age, roles FROM users WHERE id=1"
- to populate multiple rows into a slice of structs:
`db:"status" json:"status"`
`db:"age" json:"age"`
`db:"roles" json:"roles"`
"SELECT id, status, age, roles FROM users LIMIT 100"
To prevent SQL injection attacks, you should use named parameters for any expression value that comes from
user input. This could be done using the named
placeholders in your SQL statement and then define the parameter values for the query with
`db:"name" json:"name"`
`db:"created" json:"created"`
"SELECT name, created FROM posts WHERE created >= {:from} and created <= {:to}"
"2023-06-25 00:00:00.000Z"
"2023-06-28 23:59:59.999Z"
Instead of writing plain SQLs, you can also compose SQL statements programmatically using the db query
builder.
Every SQL keyword has a corresponding query building method. For example,
`db:"email" json:"email"`
Select(), AndSelect(), Distinct()
query builder. It accepts a list
of the column names to be selected.
To add additional columns to an existing select query, you can call
To select distinct rows, you can call
"(firstName || ' ' || lastName) as fullName"
method specifies which tables to select from (plain table names are automatically
quoted).
Join(type, table, on)
clause. It takes 3 parameters:
- join type string like
- the name of the table to be joined
For convenience, you can also use the shortcuts
"profiles.user_id = users.id"
"department.id = {:id}"
Where(), AndWhere(), OrWhere()
condition of the query.
to append additional one or more
conditions to an existing
Each where condition accepts a single
(see below for full list).
/*
SELECT users.*
FROM users
WHERE id = "someId" AND
status = "public" AND
name like "%john%" OR
role = "manager" AND
fullTime IS TRUE AND
experience > 10
*/
"experience > {:exp}"
methods are available:
dbx.NewExp(raw, optParams)
Generates an expression with the specified raw query fragment. Use the
"total > {:min} AND total < {:max}"
Generates a hash expression from a map whose keys are DB column names which need to be filtered according
to the corresponding values.
// slug = "example" AND active IS TRUE AND tags in ("tag1", "tag2", "tag3") AND parent IS NULL
Negates a single expression by wrapping it with
Creates a new expression by concatenating the specified ones with
// (status = 1 AND username like "%john%")
Creates a new expression by concatenating the specified ones with
// (status = 1 OR username like "%john%")
dbx.In(col, ...values)
expression for the specified column and the list of allowed values.
// status IN ("public", "reviewed")
dbx.NotIn(col, ...values)
expression for the specified column and the list of allowed values.
// status NOT IN ("public", "reviewed")
dbx.Like(col, ...values)
expression for the specified column and the possible strings that the
column should be like. If multiple values are present, the column should be like
By default, each value will be surrounded by
to enable partial matching. Special
characters like
will also be properly escaped. You may call
to change the default behavior.
// name LIKE "%test1%" AND name LIKE "%test2%"
// name LIKE "test1%"
dbx.NotLike(col, ...values)
expression in similar manner as
// name NOT LIKE "%test1%" AND name NOT LIKE "%test2%"
// name NOT LIKE "test1%"
dbx.OrLike(col, ...values)
except that the column must be one of the provided values, aka.
multiple values are concatenated with
// name LIKE "%test1%" OR name LIKE "%test2%"
// name LIKE "test1%" OR name LIKE "test2%"
dbx.OrNotLike(col, ...values)
except that the column must not be one of the provided
values, aka. multiple values are concatenated with
// name NOT LIKE "%test1%" OR name NOT LIKE "%test2%"
// name NOT LIKE "test1%" OR name NOT LIKE "test2%"
the specified expression (usually a subquery).
// EXISTS (SELECT 1 FROM users WHERE status = 'active')
"SELECT 1 FROM users WHERE status = 'active'"
the specified expression (usually a subquery).
// NOT EXISTS (SELECT 1 FROM users WHERE status = 'active')
"SELECT 1 FROM users WHERE status = 'active'"
dbx.Between(col, from, to)
expression with the specified range.
// age BETWEEN 3 and 99
dbx.NotBetween(col, from, to)
expression with the specified range.
// age NOT BETWEEN 3 and 99
OrderBy(), AndOrderBy()
A column name can contain
to indicate its ordering direction.
to append additional columns to an existing
GroupBy(), AndGroupBy()
to append additional columns to an existing
Having(), AndHaving(), OrHaving()
(see all available expressions
listed above).
to append additional one or
more conditions to an existing
"sum(level) > {:sum}"
clause of the query. Usually used
together with
To execute multiple queries in a transaction you can use
app.RunInTransaction(fn)
The DB operations are persisted only if the transaction returns
calls as long as you use the callback's
Inside the transaction function always use its
argument and not the original
instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
// run a custom raw query (doesn't fire event hooks)
"DELETE FROM articles WHERE status = 'pending'"
Next: Record operations


--------------------------------------------------------------------------------

[30] Extend with Go - Record operations
URL: https://pocketbase.io/docs/go-records/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Record operations

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#set-field-value" class="link-primary"> Set field value </a>
<a href="#get-field-value" class="link-primary"> Get field value </a>
<a href="#auth-accessors" class="link-primary"> Auth accessors </a>
<a href="#copies" class="link-primary"> Copies </a>
<a href="#hideunhide-fields" class="link-primary"> Hide/Unhide fields </a>
<a href="#fetch-records" class="link-primary"> Fetch records </a>
<a href="#create-new-record" class="link-primary"> Create new record </a>
<a href="#update-existing-record" class="link-primary"> Update existing record </a>
<a href="#delete-record" class="link-primary"> Delete record </a>
<a href="#transaction" class="link-primary"> Transaction </a>
<a href="#programmatically-expanding-relations" class="link-primary"> Programmatically expanding relations </a>
<a href="#check-if-record-can-be-accessed" class="link-primary"> Check if record can be accessed </a>
<a href="#generating-and-validating-tokens" class="link-primary"> Generating and validating tokens </a>
<a href="#fetch-single-record" class="link-primary"> Fetch single record </a>
<a href="#fetch-multiple-records" class="link-primary"> Fetch multiple records </a>
<a href="#fetch-auth-records" class="link-primary"> Fetch auth records </a>
<a href="#custom-record-query" class="link-primary"> Custom record query </a>
<a href="#create-new-record-programmatically" class="link-primary"> Create new record programmatically </a>
<a href="#intercept-create-request" class="link-primary"> Intercept create request </a>
<a href="#update-existing-record-programmatically" class="link-primary"> Update existing record programmatically </a>
<a href="#intercept-update-request" class="link-primary"> Intercept update request </a>
The most common task when using PocketBase as framework probably would be querying and working with your
collection records.
You could find detailed documentation about all the supported Record model methods in
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#Record" target="_blank" rel="noopener noreferrer"><code>core.Record</code></a>
but below are some examples with the most common ones.
Collection fields can be marked as "Hidden" from the Dashboard to prevent regular user access to the field
values.
Record models provide an option to further control the fields serialization visibility in addition to the
"Hidden" fields option using the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#Record.Hide" target="_blank" rel="noopener noreferrer"><code>record.Hide(fieldNames...)</code></a>
and
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#Record.Unhide" target="_blank" rel="noopener noreferrer"><code>record.Unhide(fieldNames...)</code></a>
methods.
Often the <code>Hide/Unhide</code> methods are used in combination with the <code>OnRecordEnrich</code> hook
invoked on every record enriching (list, view, create, update, realtime change, etc.). For example:
For custom fields, not part of the record collection schema, it is required to call explicitly
<code>record.WithCustomData(true)</code> to allow them in the public serialization.
All single record retrieval methods return <code>nil</code> and <code>sql.ErrNoRows</code> error if no record
is found.
All multiple records retrieval methods return empty slice and <code>nil</code> error if no records are found.
In addition to the above query helpers, you can also create custom Record queries using
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#RecordQuery" target="_blank" rel="noopener noreferrer"><code>RecordQuery(collection)</code></a>
method. It returns a SELECT DB builder that can be used with the same methods described in the
<a href="/docs/go-database">Database guide</a>.
To execute multiple queries in a transaction you can use
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.RunInTransaction" target="_blank" rel="noopener noreferrer"><code>app.RunInTransaction(fn)</code></a>
The DB operations are persisted only if the transaction returns <code>nil</code>.
It is safe to nest <code>RunInTransaction</code> calls as long as you use the callback's
<code>txApp</code> argument.
Inside the transaction function always use its <code>txApp</code> argument and not the original
<code>app</code> instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
To expand record relations programmatically you can use
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.ExpandRecord" target="_blank" rel="noopener noreferrer"><code>app.ExpandRecord(record, expands, optFetchFunc)</code></a>
for single or
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.ExpandRecords" target="_blank" rel="noopener noreferrer"><code>app.ExpandRecords(records, expands, optFetchFunc)</code></a>
for multiple records.
Once loaded, you can access the expanded relations via
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#Record.ExpandedOne" target="_blank" rel="noopener noreferrer"><code>record.ExpandedOne(relName)</code></a>
or
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#Record.ExpandedAll" target="_blank" rel="noopener noreferrer"><code>record.ExpandedAll(relName)</code></a> .
For example:
To check whether a custom client request or user can access a single record, you can use the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.CanAccessRecord" target="_blank" rel="noopener noreferrer"><code>app.CanAccessRecord(record, requestInfo, rule)</code></a>
method.
Below is an example of creating a custom route to retrieve a single article and checking if the request
satisfy the View API rule of the record collection:
PocketBase Web APIs are fully stateless (aka. there are no sessions in the traditional sense) and an auth
record is considered authenticated if the submitted request contains a valid
<code>Authorization: TOKEN</code>
header
<em>(see also <a href="/docs/go-routing/#builtin-middlewares">Builtin auth middlewares</a> and
<a href="/docs/go-routing/#retrieving-the-current-auth-state">Retrieving the current auth state from a route</a>
)</em>
If you want to issue and verify manually a record JWT (auth, verification, password reset, etc.), you
could do that using the record token type specific methods:
Each token type has its own secret and the token duration is managed via its type related collection auth
option (<em>the only exception is <code>NewStaticAuthToken</code></em>).
To validate a record token you can use the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.FindAuthRecordByToken" target="_blank" rel="noopener noreferrer"><code>app.FindAuthRecordByToken</code></a>
method. The token related auth record is returned only if the token is not expired and its signature is valid.
Here is an example how to validate an auth token:
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Record operations
The most common task when using PocketBase as framework probably would be querying and working with your
collection records.
You could find detailed documentation about all the supported Record model methods in
but below are some examples with the most common ones.
// sets the value of a single record field
// (field type specific modifiers are also supported)
// append to existing value
// populates a record from a data map
// (calls Set for each entry of the map)
// retrieve a single record field value
// (field specific modifiers are also supported)
// -> any (without cast)
// -> cast to float64
// -> cast to types.DateTime
// -> cast to []string
// retrieve the new uploaded files
// (e.g. for inspecting and modifying the file(s) before save)
// unmarshal a single "json" field value into the provided result
// retrieve a single or multiple expanded data
// -> nil|*core.Record
// export all the public safe record fields as map[string]any
// (note: "json" type field values are exported as types.JSONRaw bytes slice)
// alias for record.Collection().Name == "_superusers"
// alias for record.Get("email")
// alias for record.Set("email", email)
// alias for record.Get("verified")
// alias for record.Set("verified", false)
// alias for record.Get("tokenKey")
// alias for record.Set("tokenKey", key)
// alias for record.Set("tokenKey:autogenerate", "")
// alias for record.Set("password", pass)
// sets cryptographically random 30 characters string as password
// returns a shallow copy of the current record model populated
// with its ORIGINAL db data state and everything else reset to the defaults
// (usually used for comparing old and new field values)
// returns a shallow copy of the current record model populated
// with its LATEST data state and everything else reset to the defaults
// (aka. no expand, no custom fields and with default visibility flags)
// returns a shallow copy of the current record model populated
// with its ALL collection and custom fields data, expand and visibility flags
Collection fields can be marked as "Hidden" from the Dashboard to prevent regular user access to the field
values.
Record models provide an option to further control the fields serialization visibility in addition to the
"Hidden" fields option using the
record.Hide(fieldNames...)
record.Unhide(fieldNames...)
methods are used in combination with the
hook
invoked on every record enriching (list, view, create, update, realtime change, etc.). For example:
// dynamically show/hide a record field depending on whether the current
// authenticated user has a certain "role" (or any other field constraint)
For custom fields, not part of the record collection schema, it is required to call explicitly
record.WithCustomData(true)
to allow them in the public serialization.
All single record retrieval methods return
error if no record
is found.
// retrieve a single "articles" record by its id
// retrieve a single "articles" record by a single key-value pair
FindFirstRecordByData
// retrieve a single "articles" record by a string filter expression
// (NB! use "{:placeholder}" to safely bind untrusted user input parameters)
FindFirstRecordByFilter
"status = 'public' && category = {:category}"
Fetch multiple records
All multiple records retrieval methods return empty slice and
error if no records are found.
// retrieve multiple "articles" records by their ids
// retrieve the total number of "articles" records in a collection with optional dbx expressions
// retrieve multiple "articles" records with optional dbx expressions
"LOWER(username) = {:username}"
// retrieve multiple paginated "articles" records by a string filter expression
// (NB! use "{:placeholder}" to safely bind untrusted user input parameters)
"status = 'public' && category = {:category}"
// optional filter params
// retrieve a single auth record by its email
FindAuthRecordByEmail
// retrieve a single auth record by JWT
// (you could also specify an optional list of accepted token types)
FindAuthRecordByToken
In addition to the above query helpers, you can also create custom Record queries using
RecordQuery(collection)
method. It returns a SELECT DB builder that can be used with the same methods described in the
"github.com/pocketbase/dbx"
"github.com/pocketbase/pocketbase/core"
Create new record programmatically
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tools/filesystem"
FindCollectionByNameOrId
// field type specific modifiers can also be used
// new files must be one or a slice of *filesystem.File values
// note1: see all factories in https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#File
// note2: for reading files from a request event you can also use e.FindUploadedFiles("fileKey")
"/local/path/to/file1.txt"
"https://example.com/file3.pdf"
// validate and persist
// (use SaveNoValidate to skip fields validation)
Intercept create request
"github.com/pocketbase/pocketbase/core"
OnRecordCreateRequest
// ignore for superusers
// overwrite the submitted "status" field value
// or you can also prevent the create event by returning an error
// guest or not an editor
"Only editors can set a status different from pending"
Update existing record
Update existing record programmatically
// delete existing record files by specifying their file names
// append one or more new files to the already uploaded list
// note1: see all factories in https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#File
// note2: for reading files from a request event you can also use e.FindUploadedFiles("fileKey")
"/local/path/to/file1.txt"
"https://example.com/file3.pdf"
// validate and persist
// (use SaveNoValidate to skip fields validation)
Intercept update request
"github.com/pocketbase/pocketbase/core"
OnRecordUpdateRequest
// ignore for superusers
// overwrite the submitted "status" field value
// or you can also prevent the update event by returning an error
// guest or not an editor
"Only editors can set a status different from pending"
To execute multiple queries in a transaction you can use
app.RunInTransaction(fn)
The DB operations are persisted only if the transaction returns
calls as long as you use the callback's
Inside the transaction function always use its
argument and not the original
instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
"github.com/pocketbase/pocketbase/core"
FindCollectionByNameOrId
// create new record for each title
Programmatically expanding relations
To expand record relations programmatically you can use
app.ExpandRecord(record, expands, optFetchFunc)
app.ExpandRecords(records, expands, optFetchFunc)
for multiple records.
Once loaded, you can access the expanded relations via
record.ExpandedOne(relName)
record.ExpandedAll(relName)
FindFirstRecordByData
// expand the "author" and "categories" relations
"failed to expand: %v"
// print the expanded records
Check if record can be accessed
To check whether a custom client request or user can access a single record, you can use the
app.CanAccessRecord(record, requestInfo, rule)
Below is an example of creating a custom route to retrieve a single article and checking if the request
satisfy the View API rule of the record collection:
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
FindFirstRecordByData
"Missing or invalid slug"
"Failed to retrieve request info"
Generating and validating tokens
PocketBase Web APIs are fully stateless (aka. there are no sessions in the traditional sense) and an auth
record is considered authenticated if the submitted request contains a valid
Builtin auth middlewares
Retrieving the current auth state from a route
If you want to issue and verify manually a record JWT (auth, verification, password reset, etc.), you
could do that using the record token type specific methods:
NewPasswordResetToken
// for protected files
// nonrenewable auth token
Each token type has its own secret and the token duration is managed via its type related collection auth
option (
the only exception is
To validate a record token you can use the
app.FindAuthRecordByToken
method. The token related auth record is returned only if the token is not expired and its signature is valid.
Here is an example how to validate an auth token:
FindAuthRecordByToken
Next: Collection operations


--------------------------------------------------------------------------------

[31] Extend with Go - Collection operations
URL: https://pocketbase.io/docs/go-collections/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Collection operations

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#fetch-collections" class="link-primary"> Fetch collections </a>
<a href="#collection-properties" class="link-primary"> Collection properties </a>
<a href="#field-definitions" class="link-primary"> Field definitions </a>
<a href="#create-new-collection" class="link-primary"> Create new collection </a>
<a href="#update-existing-collection" class="link-primary"> Update existing collection </a>
<a href="#delete-collection" class="link-primary"> Delete collection </a>
<a href="#fetch-single-collection" class="link-primary"> Fetch single collection </a>
<a href="#fetch-multiple-collections" class="link-primary"> Fetch multiple collections </a>
<a href="#custom-collection-query" class="link-primary"> Custom collection query </a>
Collections are usually managed via the Dashboard interface, but there are some situations where you may
want to create or edit a collection programmatically (usually as part of a
<a href="/docs/go-migrations">DB migration</a>). You can find all available Collection related operations
and methods in
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#App" target="_blank" rel="noopener noreferrer"><code>core.App</code></a>
and
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#Collection" target="_blank" rel="noopener noreferrer"><code>core.Collection</code></a>
, but below are listed some of the most common ones:
All single collection retrieval methods return <code>nil</code> and <code>sql.ErrNoRows</code> error if no
collection is found.
All multiple collections retrieval methods return empty slice and <code>nil</code> error if no collections
are found.
In addition to the above query helpers, you can also create custom Collection queries using
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#CollectionQuery" target="_blank" rel="noopener noreferrer"><code>CollectionQuery()</code></a>
method. It returns a SELECT DB builder that can be used with the same methods described in the
<a href="/docs/go-database">Database guide</a>.
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BoolField" target="_blank" rel="noopener noreferrer"><code>core.BoolField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#NumberField" target="_blank" rel="noopener noreferrer"><code>core.NumberField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#TextField" target="_blank" rel="noopener noreferrer"><code>core.TextField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#EmailField" target="_blank" rel="noopener noreferrer"><code>core.EmailField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#URLField" target="_blank" rel="noopener noreferrer"><code>core.URLField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#EditorField" target="_blank" rel="noopener noreferrer"><code>core.EditorField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#DateField" target="_blank" rel="noopener noreferrer"><code>core.DateField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#AutodateField" target="_blank" rel="noopener noreferrer"><code>core.AutodateField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#SelectField" target="_blank" rel="noopener noreferrer"><code>core.SelectField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#FileField" target="_blank" rel="noopener noreferrer"><code>core.FileField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#RelationField" target="_blank" rel="noopener noreferrer"><code>core.RelationField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#JSONField" target="_blank" rel="noopener noreferrer"><code>core.JSONField</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#GeoPointField" target="_blank" rel="noopener noreferrer"><code>core.GeoPointField</code></a>
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Collection operations
Collection operations
Collections are usually managed via the Dashboard interface, but there are some situations where you may
want to create or edit a collection programmatically (usually as part of a
). You can find all available Collection related operations
and methods in
, but below are listed some of the most common ones:
Fetch single collection
All single collection retrieval methods return
error if no
collection is found.
FindCollectionByNameOrId
Fetch multiple collections
All multiple collections retrieval methods return empty slice and
error if no collections
are found.
authAndViewCollections
Custom collection query
In addition to the above query helpers, you can also create custom Collection queries using
method. It returns a SELECT DB builder that can be used with the same methods described in the
"github.com/pocketbase/dbx"
"github.com/pocketbase/pocketbase/core"
FindSystemCollections
Collection properties
// "base", "view", "auth"
// !prevent collection rename, deletion and rules change of internal collections like _superusers
FieldsList
Indexes types
DateTime
Updated types
// "view" type specific options
// (see https://github.com/pocketbase/pocketbase/blob/master/core/collection_model_view_options.go)
// "auth" type specific options
// (see https://github.com/pocketbase/pocketbase/blob/master/core/collection_model_auth_options.go)
AuthAlert                  core
AuthAlertConfig
OAuth2                     core
OAuth2Config
PasswordAuth               core
PasswordAuthConfig
MFA                        core
MFAConfig
OTP                        core
OTPConfig
AuthToken                  core
TokenConfig
PasswordResetToken         core
TokenConfig
EmailChangeToken           core
TokenConfig
VerificationToken          core
TokenConfig
FileToken                  core
TokenConfig
VerificationTemplate       core
EmailTemplate
ResetPasswordTemplate      core
EmailTemplate
ConfirmEmailChangeTemplate core
Create new collection
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tools/types"
// core.NewAuthCollection("example")
// core.NewViewCollection("example")
"@request.auth.id != ''"
"@request.auth.id != '' && @request.body.user = @request.auth.id"
@request.auth.id != '' &&
user = @request.auth.id &&
(@request.body.user:isset = false || @request.body.user = @request.auth.id)
// add relation field
FindCollectionByNameOrId
// add autodate/timestamp fields (created/updated)
// or: collection.Indexes = []string{"CREATE UNIQUE INDEX idx_example_user ON example (user)"}
// validate and persist
// (use SaveNoValidate to skip fields validation)
Update existing collection
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tools/types"
FindCollectionByNameOrId
"@request.auth.id != ''"
// add new editor field
// change existing field
// (returns a pointer and direct modifications are allowed without the need of reinsert)
// or: collection.Indexes = append(collection.Indexes, "CREATE INDEX idx_example_title ON example (title)")
// validate and persist
// (use SaveNoValidate to skip fields validation)
FindCollectionByNameOrId
Prev: Record operations


--------------------------------------------------------------------------------

[32] Extend with Go - Migrations
URL: https://pocketbase.io/docs/go-migrations/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Migrations

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#quick-setup" class="link-primary"> Quick setup </a>
<a href="#collections-snapshot" class="link-primary"> Collections snapshot </a>
<a href="#migrations-history" class="link-primary"> Migrations history </a>
<a href="#examples" class="link-primary"> Examples </a>
<a href="#0-register-the-migrate-command" class="link-primary"> 0. Register the migrate command </a>
<a href="#1-create-new-migration" class="link-primary"> 1. Create new migration </a>
<a href="#2-load-migrations" class="link-primary"> 2. Load migrations </a>
<a href="#3-run-migrations" class="link-primary"> 3. Run migrations </a>
<a href="#executing-raw-sql-statements" class="link-primary"> Executing raw SQL statements </a>
<a href="#initialize-default-application-settings" class="link-primary"> Initialize default application settings </a>
<a href="#creating-initial-superuser" class="link-primary"> Creating initial superuser </a>
<a href="#creating-collection-programmatically" class="link-primary"> Creating collection programmatically </a>
PocketBase comes with a builtin DB and data migration utility, allowing you to version your DB structure,
create collections programmatically, initialize default settings, etc.
Because the migrations are regular Go functions, besides applying schema changes, they could be used also
to adjust existing data to fit the new schema or any other app specific logic that you want to run only
once.
And as a bonus, being <code>.go</code> files also ensure that the migrations will be embedded seamlessly in
your final executable.
<em>You can find all available config options in the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/plugins/migratecmd" target="_blank" rel="noopener noreferrer"><code>migratecmd</code></a>
subpackage.</em>
To create a new blank migration you can run <code>migrate create</code>.
The above will create a new blank migration file inside the default command <code>migrations</code> directory.
Each migration file should have a single <code>m.Register(upFunc, downFunc)</code> call.
In the migration file, you are expected to write your "upgrade" code in the <code>upFunc</code> callback.
<br>
The <code>downFunc</code> is optional and it should contain the "downgrade" operations to revert the
changes made by the <code>upFunc</code>.
<br>
Both callbacks accept a transactional <code>core.App</code> instance.
You can explore the
<a href="/docs/go-database">Database guide</a>,
<a href="/docs/go-collections">Collection operations</a> and
<a href="/docs/go-records">Record operations</a>
for more details how to interact with the database. You can also find
<a href="#examples">some examples</a> further below in this guide.
To make your application aware of the registered migrations, you have to import the above
<code>migrations</code> package in one of your <code>main</code> package files:
New unapplied migrations are automatically executed when the application server starts, aka. on
<code>serve</code>.
Alternatively, you can also apply new migrations manually by running <code>migrate up</code>.
<br>
To revert the last applied migration(s), you can run <code>migrate down [number]</code>.
<br> <small class="txt-hint">When manually applying or reverting migrations, the <code>serve</code> process needs to be restarted so
that it can refresh its cached collections state.</small>
The <code>migrate collections</code> command generates a full snapshot of your current collections
configuration without having to type it manually. Similar to the <code>migrate create</code> command, this
will generate a new migration file in the
<code>migrations</code> directory.
By default the collections snapshot is imported in <em>extend</em> mode, meaning that collections and
fields that don't exist in the snapshot are preserved. If you want the snapshot to <em>delete</em>
missing collections and fields, you can edit the generated file and change the last argument of
<code>ImportCollectionsByMarshaledJSON</code> method to <code>true</code>.
All applied migration filenames are stored in the internal <code>_migrations</code> table.
<br>
During local development often you might end up making various collection changes to test different approaches.
<br>
When <code>Automigrate</code> is enabled this could lead in a migration history with unnecessary intermediate
steps that may not be wanted in the final migration history.
To avoid the clutter and to prevent applying the intermediate steps in production, you can remove (or
squash) the unnecessary migration files manually and then update the local migrations history by running:
The above command will remove any entry from the <code>_migrations</code> table that doesn't have a related
migration file associated with it.
<em>For all supported record methods, you can refer to
<a href="/docs/go-records">Record operations</a></em>
<em>You can also create the initial super user using the
<code>./pocketbase superuser create EMAIL PASS</code>
command.</em>
<em>For all supported collection methods, you can refer to
<a href="/docs/go-collections">Collection operations</a></em>
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Migrations
PocketBase comes with a builtin DB and data migration utility, allowing you to version your DB structure,
create collections programmatically, initialize default settings, etc.
Because the migrations are regular Go functions, besides applying schema changes, they could be used also
to adjust existing data to fit the new schema or any other app specific logic that you want to run only
once.
And as a bonus, being
files also ensure that the migrations will be embedded seamlessly in
your final executable.
0. Register the migrate command
You can find all available config options in the
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/plugins/migratecmd"
// enable once you have at least one migration
// _ "yourpackage/migrations"
// loosely check if it was executed using "go run"
// enable auto creation of migration files when making collection changes in the Dashboard
// (the isGoRun check is to enable it only during development)
1. Create new migration
To create a new blank migration you can run
// Since the "create" command makes sense only during development,
// it is expected the user to be in the app working directory
// and to be using "go run"
// migrations/1655834400_your_new_migration.go
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/migrations"
// add down queries...
The above will create a new blank migration file inside the default command
Each migration file should have a single
m.Register(upFunc, downFunc)
In the migration file, you are expected to write your "upgrade" code in the
is optional and it should contain the "downgrade" operations to revert the
changes made by the
Both callbacks accept a transactional
Collection operations
for more details how to interact with the database. You can also find
further below in this guide.
To make your application aware of the registered migrations, you have to import the above
package in one of your
"yourpackage/migrations"
New unapplied migrations are automatically executed when the application server starts, aka. on
Alternatively, you can also apply new migrations manually by running
To revert the last applied migration(s), you can run
migrate down [number]
When manually applying or reverting migrations, the
process needs to be restarted so
that it can refresh its cached collections state.
command generates a full snapshot of your current collections
configuration without having to type it manually. Similar to the
command, this
will generate a new migration file in the
// Since the "collections" command makes sense only during development,
// it is expected the user to be in the app working directory
// and to be using "go run"
By default the collections snapshot is imported in
mode, meaning that collections and
fields that don't exist in the snapshot are preserved. If you want the snapshot to
missing collections and fields, you can edit the generated file and change the last argument of
ImportCollectionsByMarshaledJSON
All applied migration filenames are stored in the internal
During local development often you might end up making various collection changes to test different approaches.
is enabled this could lead in a migration history with unnecessary intermediate
steps that may not be wanted in the final migration history.
To avoid the clutter and to prevent applying the intermediate steps in production, you can remove (or
squash) the unnecessary migration files manually and then update the local migrations history by running:
The above command will remove any entry from the
table that doesn't have a related
migration file associated with it.
Executing raw SQL statements
// migrations/1687801090_set_pending_status.go
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/migrations"
// set a default "pending" status to all empty status articles
"UPDATE articles SET status = 'pending' WHERE status = ''"
Initialize default application settings
// migrations/1687801090_initial_settings.go
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/migrations"
// for all available settings fields you could check
// https://github.com/pocketbase/pocketbase/blob/develop/core/settings_model.go#L121-L130
"https://example.com"
Creating initial superuser
For all supported record methods, you can refer to
You can also create the initial super user using the
./pocketbase superuser create EMAIL PASS
// migrations/1687801090_initial_superuser.go
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/migrations"
FindCollectionByNameOrId
CollectionNameSuperusers
// note: the values can be eventually loaded via os.Getenv(key)
// or from a special local config file
// optional revert operation
FindAuthRecordByEmail
CollectionNameSuperusers
// probably already deleted
Creating collection programmatically
For all supported collection methods, you can refer to
Collection operations
// migrations/1687801090_create_clients_collection.go
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tools/types"
"github.com/pocketbase/pocketbase/migrations"
// init a new auth collection with the default system fields and auth options
// restrict the list and view rules for record owners
"id = @request.auth.id"
"id = @request.auth.id"
// add extra fields in addition to the default ones
// disable password auth and enable OTP only
"idx_clients_company"
// optional revert operation
FindCollectionByNameOrId
Prev: Collection operations
Next: Jobs scheduling


--------------------------------------------------------------------------------

[33] Extend with Go - Jobs scheduling
URL: https://pocketbase.io/docs/go-jobs-scheduling/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Jobs scheduling

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

If you have tasks that need to be performed periodically, you could set up crontab-like jobs with the
builtin <code>app.Cron()</code> <em>(it returns an app scoped
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/cron#Cron" target="_blank" rel="noopener noreferrer"><code>cron.Cron</code></a> value)</em>
The jobs scheduler is started automatically on app <code>serve</code>, so all you have to do is register a
handler with
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/cron#Cron.Add" target="_blank" rel="noopener noreferrer"><code>app.Cron().Add(id, cronExpr, handler)</code></a>
or
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/cron#Cron.MustAdd" target="_blank" rel="noopener noreferrer"><code>app.Cron().MustAdd(id, cronExpr, handler)</code></a>
(<em>the latter panic if the cron expression is not valid</em>).
Each scheduled job runs in its own goroutine and must have:
Here is one minimal example:
To remove already registered cron job you can call
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/cron#Cron.Remove" target="_blank" rel="noopener noreferrer"><code>app.Cron().Remove(id)</code></a>
All registered app level cron jobs can be also previewed and triggered from the
<em>Dashboard > Settings > Crons</em> section.
Keep in mind that the <code>app.Cron()</code> is also used for running the system scheduled jobs
like the logs cleanup or auto backups (the jobs id is in the format <code>__pb*__</code>) and
replacing these system jobs or calling <code>RemoveAll()</code>/<code>Stop()</code> could have unintended
side-effects.
If you want more advanced control you can initialize your own cron instance independent from the
application via <code>cron.New()</code>.
<strong>id</strong> - identifier for the scheduled job; could be used to replace or remove an existing
job
<strong data-svelte-h="svelte-ig66ho">cron expression</strong> - e.g. <code data-svelte-h="svelte-1kxoz48">0 0 * * *</code> (
<em>supports numeric list, steps, ranges or
<span class="link-hint" data-svelte-h="svelte-ootun">macros</span> </em>)
<strong>handler</strong> - the function that will be executed every time when the job runs
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Jobs scheduling
If you have tasks that need to be performed periodically, you could set up crontab-like jobs with the
builtin
(it returns an app scoped
The jobs scheduler is started automatically on app
, so all you have to do is register a
handler with
app.Cron().Add(id, cronExpr, handler)
app.Cron().MustAdd(id, cronExpr, handler)
the latter panic if the cron expression is not valid
Each scheduled job runs in its own goroutine and must have:
- identifier for the scheduled job; could be used to replace or remove an existing
job
supports numeric list, steps, ranges or
- the function that will be executed every time when the job runs
Here is one minimal example:
"github.com/pocketbase/pocketbase"
// prints "Hello!" every 2 minutes
To remove already registered cron job you can call
app.Cron().Remove(id)
All registered app level cron jobs can be also previewed and triggered from the
Dashboard > Settings > Crons
Keep in mind that the
is also used for running the system scheduled jobs
like the logs cleanup or auto backups (the jobs id is in the format
) and
replacing these system jobs or calling
could have unintended
side-effects.
If you want more advanced control you can initialize your own cron instance independent from the
application via


--------------------------------------------------------------------------------

[34] Extend with Go - Sending emails
URL: https://pocketbase.io/docs/go-sending-emails/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Sending emails

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#send-custom-email" class="link-primary"> Send custom email </a>
<a href="#overwrite-system-emails" class="link-primary"> Overwrite system emails </a>
PocketBase provides a simple abstraction for sending emails via the
<code>app.NewMailClient()</code> factory.
Depending on your configured mail settings (<em>Dashboard > Settings > Mail settings</em>) it will use the
<code>sendmail</code> command or a SMTP client.
You can send your own custom email from anywhere within the app (hooks, middlewares, routes, etc.) by
using <code>app.NewMailClient().Send(message)</code>. Here is an example of sending a custom email after
user registration:
If you want to overwrite the default system emails for forgotten password, verification, etc., you can
adjust the default templates available from the
<em>Dashboard > Collections > Edit collection > Options</em>
Alternatively, you can also apply individual changes by binding to one of the
<a href="/docs/go-event-hooks/#mailer-hooks">mailer hooks</a>. Here is an example of appending a Record
field value to the subject using the <code>OnMailerRecordPasswordResetSend</code> hook:
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Sending emails
PocketBase provides a simple abstraction for sending emails via the
Depending on your configured mail settings (
Dashboard > Settings > Mail settings
command or a SMTP client.
You can send your own custom email from anywhere within the app (hooks, middlewares, routes, etc.) by
using
app.NewMailClient().Send(message)
. Here is an example of sending a custom email after
user registration:
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tools/mailer"
OnRecordCreateRequest
// bcc, cc, attachments and custom headers are also supported...
Overwrite system emails
If you want to overwrite the default system emails for forgotten password, verification, etc., you can
adjust the default templates available from the
Dashboard > Collections > Edit collection > Options
Alternatively, you can also apply individual changes by binding to one of the
. Here is an example of appending a Record
field value to the subject using the
OnMailerRecordPasswordResetSend
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
OnMailerRecordPasswordResetSend
// modify the subject
Prev: Jobs scheduling
Next: Rendering templates


--------------------------------------------------------------------------------

[35] Extend with Go - Rendering templates
URL: https://pocketbase.io/docs/go-rendering-templates/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Rendering templates

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#overview" class="link-primary"> Overview </a>
<a href="#example-html-page-with-layout" class="link-primary"> Example HTML page with layout </a>
A common task when creating custom routes or emails is the need of generating HTML output.
There are plenty of Go template-engines available that you can use for this, but often for simple cases
the Go standard library <code>html/template</code> package should work just fine.
To make it slightly easier to load template files concurrently and on the fly, PocketBase also provides a
thin wrapper around the standard library in the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/template" target="_blank" rel="noopener noreferrer"><code>github.com/pocketbase/pocketbase/tools/template</code></a>
utility package.
The general flow when working with composed and nested templates is that you create "base" template(s)
that defines various placeholders using the
<code>{{template "placeholderName" .}}</code> or
<code>{{block "placeholderName" .}}default...{{end}}</code> actions.
Then in the partials, you define the content for those placeholders using the
<code>{{define "placeholderName"}}custom...{{end}}</code> action.
The dot object (<code class="txt-bold">.</code>) in the above represents the data passed to the templates
via the <code>Render(data)</code> method.
By default the templates apply contextual (HTML, JS, CSS, URI) auto escaping so the generated template
content should be injection-safe. To render raw/verbatim trusted content in the templates you can use the
builtin <code data-svelte-h="svelte-1s9vl28">raw</code> function (e.g. <code>{{.content|raw}}</code>).
For more information about the template syntax please refer to the
<a href="https://pkg.go.dev/html/template#hdr-A_fuller_picture" target="_blank" rel="noopener noreferrer"><em>html/template</em></a>
and
<a href="https://pkg.go.dev/text/template" target="_blank" rel="noopener noreferrer"><em>text/template</em></a>
package godocs.
<strong>Another great resource is also the Hashicorp's
<a href="https://developer.hashicorp.com/nomad/tutorials/templates/go-template-syntax" target="_blank" rel="noopener noreferrer">Learn Go Template Syntax</a>
tutorial.</strong>
Consider the following app directory structure:
We define the content for <code>layout.html</code> as:
We define the content for <code>hello.html</code> as:
Then to output the final page, we'll register a custom <code>/hello/:name</code> route:
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Rendering templates
A common task when creating custom routes or emails is the need of generating HTML output.
There are plenty of Go template-engines available that you can use for this, but often for simple cases
the Go standard library
package should work just fine.
To make it slightly easier to load template files concurrently and on the fly, PocketBase also provides a
thin wrapper around the standard library in the
github.com/pocketbase/pocketbase/tools/template
"github.com/pocketbase/pocketbase/tools/template"
"views/partial1.html"
"views/partial2.html"
The general flow when working with composed and nested templates is that you create "base" template(s)
that defines various placeholders using the
{{template "placeholderName" .}}
{{block "placeholderName" .}}default...{{end}}
Then in the partials, you define the content for those placeholders using the
{{define "placeholderName"}}custom...{{end}}
) in the above represents the data passed to the templates
via the
By default the templates apply contextual (HTML, JS, CSS, URI) auto escaping so the generated template
content should be injection-safe. To render raw/verbatim trusted content in the templates you can use the
builtin
For more information about the template syntax please refer to the
Another great resource is also the Hashicorp's
Learn Go Template Syntax
Example HTML page with layout
Consider the following app directory structure:
myapp/
views/
layout.html
hello.html
main.go
We define the content for
{{block "title" .}}Default app title{{end}}
Header...
{{block "body" .}}
Default app body...
{{end}}
Footer...
We define the content for
{{define "title"}}
Page 1
{{end}}
{{define "body"}}
Then to output the final page, we'll register a custom
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tools/template"
// this is safe to be used by multiple goroutines
// (it acts as store for the parsed templates)
// or redirect to a dedicated 404 HTML page
Next: Console commands


--------------------------------------------------------------------------------

[36] Extend with Go - Console commands
URL: https://pocketbase.io/docs/go-console-commands/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Console commands

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

You can register custom console commands using
<code>app.RootCmd.AddCommand(cmd)</code>, where <code>cmd</code> is a
<a href="https://pkg.go.dev/github.com/spf13/cobra" target="_blank" rel="noopener noreferrer">cobra</a> command.
Here is an example:
To run the command you can build your Go application and execute:
Keep in mind that the console commands execute in their own separate app process and run
independently from the main <code>serve</code> command (aka. hook and realtime events between different
processes are not shared with one another).
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Console commands
You can register custom console commands using
app.RootCmd.AddCommand(cmd)
"github.com/pocketbase/pocketbase"
"github.com/spf13/cobra"
To run the command you can build your Go application and execute:
# or "go run main.go hello"
./myapp hello
Keep in mind that the console commands execute in their own separate app process and run
independently from the main
command (aka. hook and realtime events between different
processes are not shared with one another).
Prev: Rendering templates
Next: Realtime messaging


--------------------------------------------------------------------------------

[37] Extend with Go - Realtime messaging
URL: https://pocketbase.io/docs/go-realtime/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Realtime messaging

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

By default PocketBase sends realtime events only for Record create/update/delete operations (<em>and for the OAuth2 auth redirect</em>), but you are free to send custom realtime messages to the connected clients via the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.SubscriptionsBroker" target="_blank" rel="noopener noreferrer"><code>app.SubscriptionsBroker()</code></a> instance.
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/subscriptions#Broker.Clients" target="_blank" rel="noopener noreferrer"><code>app.SubscriptionsBroker().Clients()</code></a>
returns all connected
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/subscriptions#Client" target="_blank" rel="noopener noreferrer"><code>subscriptions.Client</code></a>
indexed by their unique connection id.
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/subscriptions#Broker.ChunkedClients" target="_blank" rel="noopener noreferrer"><code>app.SubscriptionsBroker().ChunkedClients(size)</code></a>
is similar but returns the result as a chunked slice allowing you to split the iteration across several goroutines
(usually combined with
<a href="https://pkg.go.dev/golang.org/x/sync/errgroup" target="_blank" rel="noopener noreferrer"><code>errgroup</code></a>
).
The current auth record associated with a client could be accessed through
<code>client.Get(apis.RealtimeClientAuthKey)</code>
Note that a single authenticated user could have more than one active realtime connection (aka.
multiple clients). This could happen for example when opening the same app in different tabs,
browsers, devices, etc.
Below you can find a minimal code sample that sends a JSON payload to all clients subscribed to the
"example" topic:
From the client-side, users can listen to the custom subscription topic by doing something like:
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Realtime messaging
By default PocketBase sends realtime events only for Record create/update/delete operations (
and for the OAuth2 auth redirect
), but you are free to send custom realtime messages to the connected clients via the
returns all connected
indexed by their unique connection id.
is similar but returns the result as a chunked slice allowing you to split the iteration across several goroutines
(usually combined with
The current auth record associated with a client could be accessed through
client.Get(apis.RealtimeClientAuthKey)
Note that a single authenticated user could have more than one active realtime connection (aka.
multiple clients). This could happen for example when opening the same app in different tabs,
browsers, devices, etc.
Below you can find a minimal code sample that sends a JSON payload to all clients subscribed to the
"example" topic:
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Prev: Console commands


--------------------------------------------------------------------------------

[38] Extend with Go - Filesystem
URL: https://pocketbase.io/docs/go-filesystem/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Filesystem

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#reading-files" class="link-primary"> Reading files </a>
<a href="#saving-files" class="link-primary"> Saving files </a>
<a href="#deleting-files" class="link-primary"> Deleting files </a>
PocketBase comes with a thin abstraction between the local filesystem and S3.
To configure which one will be used you can adjust the storage settings from
<em>Dashboard > Settings > Files storage</em> section.
The filesystem abstraction can be accessed programmatically via the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.NewFilesystem" target="_blank" rel="noopener noreferrer"><code>app.NewFilesystem()</code></a>
method.
Below are listed some of the most common operations but you can find more details in the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem" target="_blank" rel="noopener noreferrer"><code>filesystem</code></a>
subpackage.
Always make sure to call <code>Close()</code> at the end for both the created filesystem instance and
the retrieved file readers to prevent leaking resources.
To retrieve the file content of a single stored file you can use
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#System.GetReader" target="_blank" rel="noopener noreferrer"><code>GetReader(key)</code></a>
<br>
Note that file keys often contain a <strong>prefix</strong> (aka. the "path" to the file). For record
files the full key is
<code>collectionId/recordId/filename</code>.
<br>
To retrieve multiple files matching a specific <em>prefix</em> you can use
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#System.List" target="_blank" rel="noopener noreferrer"><code>List(prefix)</code></a>
The below code shows a minimal example how to retrieve a single record file and copy its content into a
<code>bytes.Buffer</code>.
There are several methods to save <em>(aka. write/upload)</em> files depending on the available file content
source:
Most users rarely will have to use the above methods directly because for collection records the file
persistence is handled transparently when saving the record model (it will also perform size and MIME type
validation based on the collection <code>file</code> field options). For example:
Files can be deleted from the storage filesystem using
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#System.Delete" target="_blank" rel="noopener noreferrer"><code>Delete(key)</code></a>
Similar to the previous section, most users rarely will have to use the <code>Delete</code> file method directly
because for collection records the file deletion is handled transparently when removing the existing filename
from the record model (this also ensures that the db entry referencing the file is also removed). For example:
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#System.Upload" target="_blank" rel="noopener noreferrer"><code>Upload([]byte, key)</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#System.UploadFile" target="_blank" rel="noopener noreferrer"><code>UploadFile(*filesystem.File, key)</code></a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/filesystem#System.UploadFile" target="_blank" rel="noopener noreferrer"><code>UploadMultipart(*multipart.FileHeader, key)</code></a>
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Filesystem
PocketBase comes with a thin abstraction between the local filesystem and S3.
To configure which one will be used you can adjust the storage settings from
Dashboard > Settings > Files storage
The filesystem abstraction can be accessed programmatically via the
Below are listed some of the most common operations but you can find more details in the
Always make sure to call
at the end for both the created filesystem instance and
the retrieved file readers to prevent leaking resources.
To retrieve the file content of a single stored file you can use
Note that file keys often contain a
(aka. the "path" to the file). For record
files the full key is
collectionId/recordId/filename
To retrieve multiple files matching a specific
The below code shows a minimal example how to retrieve a single record file and copy its content into a
FindAuthRecordByEmail
// construct the full file key by concatenating the record storage path with the specific filename
// initialize the filesystem
// retrieve a file reader for the avatar key
// do something with the reader...
There are several methods to save
files depending on the available file content
source:
UploadFile(*filesystem.File, key)
UploadMultipart(*multipart.FileHeader, key)
Most users rarely will have to use the above methods directly because for collection records the file
persistence is handled transparently when saving the record model (it will also perform size and MIME type
validation based on the collection
field options). For example:
// Other available File factories
// - filesystem.NewFileFromBytes(data, name)
// - filesystem.NewFileFromURL(ctx, url)
// - filesystem.NewFileFromMultipart(mh)
"/local/path/to/file"
// set new file (can be single *filesytem.File or multiple []*filesystem.File)
// (if the record has an old file it is automatically deleted on successful Save)
Files can be deleted from the storage filesystem using
Similar to the previous section, most users rarely will have to use the
file method directly
because for collection records the file deletion is handled transparently when removing the existing filename
from the record model (this also ensures that the db entry referencing the file is also removed). For example:
// if you want to "reset" a file field (aka. deleting the associated single or multiple files)
// you can set it to nil
// OR if you just want to remove individual file(s) from a multiple file field you can use the "-" modifier
// (the value could be a single filename string or slice of filename strings)
"example_52iWbGinWd.txt"
Prev: Realtime messaging


--------------------------------------------------------------------------------

[39] Extend with Go - Logging
URL: https://pocketbase.io/docs/go-logging/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Logging

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#log-methods" class="link-primary"> Log methods </a>
<a href="#logs-settings" class="link-primary"> Logs settings </a>
<a href="#custom-log-queries" class="link-primary"> Custom log queries </a>
<a href="#intercepting-logs-write" class="link-primary"> Intercepting logs write </a>
<a href="#debugmessage-attrs-" class="link-primary"> Debug(message, attrs...) </a>
<a href="#infomessage-attrs-" class="link-primary"> Info(message, attrs...) </a>
<a href="#warnmessage-attrs-" class="link-primary"> Warn(message, attrs...) </a>
<a href="#errormessage-attrs-" class="link-primary"> Error(message, attrs...) </a>
<a href="#withattrs-" class="link-primary"> With(attrs...) </a>
<a href="#withgroupname" class="link-primary"> WithGroup(name) </a>
<code>app.Logger()</code> provides access to a standard <code>slog.Logger</code> implementation that
writes any logs into the database so that they can be later explored from the PocketBase
<em>Dashboard > Logs</em> section.
For better performance and to minimize blocking on hot paths, logs are written with debounce and
on batches:
All standard
<a href="https://pkg.go.dev/log/slog" target="_blank" rel="noopener noreferrer"><code>slog.Logger</code></a>
methods are available but below is a list with some of the most notable ones.
<code>With(atrs...)</code> creates a new local logger that will "inject" the specified attributes with each
following log.
<code>WithGroup(name)</code> creates a new local logger that wraps all logs attributes under the specified
group name.
You can control various log settings like logs retention period, minimal log level, request IP logging,
etc. from the logs settings panel:
The logs are usually meant to be filtered from the UI but if you want to programmatically retrieve and
filter the stored logs you can make use of the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.LogsQuery" target="_blank" rel="noopener noreferrer"><code>app.LogQuery()</code></a> query builder method. For example:
If you want to modify the log data before persisting in the database or to forward it to an external
system, then you can listen for changes of the <code>_logs</code> table by attaching to the
<a href="/docs/go-event-hooks/#base-model-hooks">base model hooks</a>. For example:
3 seconds after the last debounced log write
when the batch threshold is reached (currently 200)
right before app termination to attempt saving everything from the existing logs queue
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Logging
provides access to a standard
implementation that
writes any logs into the database so that they can be later explored from the PocketBase
For better performance and to minimize blocking on hot paths, logs are written with debounce and
on batches:
3 seconds after the last debounced log write
when the batch threshold is reached (currently 200)
right before app termination to attempt saving everything from the existing logs queue
methods are available but below is a list with some of the most notable ones.
Debug(message, attrs...)
"Debug message with attributes!"
Info(message, attrs...)
"Info message with attributes!"
Warn(message, attrs...)
"Warning message with attributes!"
Error(message, attrs...)
"Error message with attributes!"
creates a new local logger that will "inject" the specified attributes with each
following log.
// results in log with data {"total": 123}
// results in log with data {"total": 123, "name": "john"}
creates a new local logger that wraps all logs attributes under the specified
group name.
// results in log with data {"sub": { "total": 123 }}
You can control various log settings like logs retention period, minimal log level, request IP logging,
etc. from the logs settings panel:
The logs are usually meant to be filtered from the UI but if you want to programmatically retrieve and
filter the stored logs you can make use of the
query builder method. For example:
// see https://pocketbase.io/docs/go-database/#query-builder
// target only debug and info logs
// the data column is serialized json object and could be anything
"json_extract(data, '$.type') = 'request'"
Intercepting logs write
If you want to modify the log data before persisting in the database or to forward it to an external
system, then you can listen for changes of the
table by attaching to the


--------------------------------------------------------------------------------

[40] Extend with Go - Testing
URL: https://pocketbase.io/docs/go-testing/
Category: hooks
API Endpoint: GET /my/hello
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Testing

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

**API Endpoint:** `GET /my/hello`

## Content

<a href="#1-setup" class="link-primary"> 1. Setup </a>
<a href="#2-prepare-test-data" class="link-primary"> 2. Prepare test data </a>
<a href="#3-integration-test" class="link-primary"> 3. Integration test </a>
PocketBase exposes several test mocks and stubs (eg. <code>tests.TestApp</code>,
<code>tests.ApiScenario</code>, <code>tests.MockMultipartData</code>, etc.) to help you write unit and
integration tests for your app.
You could find more information in the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tests" target="_blank" rel="noreferrer noopener"><code>github.com/pocketbase/pocketbase/tests</code></a>
sub package, but here is a simple example.
Let's say that we have a custom API route <code>GET /my/hello</code> that requires superuser authentication:
Now we have to prepare our test/mock data. There are several ways you can approach this, but the easiest
one would be to start your application with a custom <code>test_pb_data</code> directory, e.g.:
Go to your browser and create the test data via the Dashboard (both collections and records). Once
completed you can stop the server (you could also commit <code>test_pb_data</code> to your repo).
To test the example endpoint, we want to:
Below is a simple integration test for the above test cases. We'll also use the test data created in the
previous step.
ensure it handles only GET requests
ensure that it can be accessed only by superusers
check if the response body is properly set
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Testing
PocketBase exposes several test mocks and stubs (eg.
tests.MockMultipartData
, etc.) to help you write unit and
integration tests for your app.
You could find more information in the
github.com/pocketbase/pocketbase/tests
sub package, but here is a simple example.
Let's say that we have a custom API route
that requires superuser authentication:
"github.com/pocketbase/pocketbase"
"github.com/pocketbase/pocketbase/apis"
"github.com/pocketbase/pocketbase/core"
Now we have to prepare our test/mock data. There are several ways you can approach this, but the easiest
one would be to start your application with a custom
Go to your browser and create the test data via the Dashboard (both collections and records). Once
completed you can stop the server (you could also commit
To test the example endpoint, we want to:
ensure it handles only GET requests
ensure that it can be accessed only by superusers
check if the response body is properly set
Below is a simple integration test for the above test cases. We'll also use the test data created in the
previous step.
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tests"
FindAuthRecordByEmail
CollectionNameSuperusers
// set up the test ApiScenario app instance
// no need to cleanup since scenario.Test() will do that for us
// defer testApp.Cleanup()
"try with different http method, e.g. POST"
"try as guest (aka. no Authorization header)"
"try as authenticated app user"
"try as authenticated superuser"


--------------------------------------------------------------------------------

[41] Extend with Go - Miscellaneous
URL: https://pocketbase.io/docs/go-miscellaneous/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Miscellaneous

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#app-store" class="link-primary"> app.Store() </a>
<a href="#security-helpers" class="link-primary"> Security helpers </a>
<a href="#generating-random-strings" class="link-primary"> Generating random strings </a>
<a href="#compare-strings-with-constant-time" class="link-primary"> Compare strings with constant time </a>
<a href="#aes-encryptdecrypt" class="link-primary"> AES Encrypt/Decrypt </a>
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseApp.Store" target="_blank" rel="noopener noreferrer"><code>app.Store()</code></a>
returns a concurrent-safe application memory store that you can use to store anything for the duration of the
application process (e.g. cache, config flags, etc.).
You can find more details about the available store methods in the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/store#Store" target="_blank" rel="noopener noreferrer"><code>store.Store</code></a>
documentation but the most commonly used ones are <code>Get(key)</code>, <code>Set(key, value)</code> and
<code>GetOrSet(key, setFunc)</code>.
Keep in mind that the application store is also used internally usually with <code>pb*</code>
prefixed keys (e.g. the collections cache is stored under the <code>pbAppCachedCollections</code>
key) and changing these system keys or calling <code>RemoveAll()</code>/<code>Reset()</code> could
have unintended side-effects.
If you want more advanced control you can initialize your own store independent from the
application instance via
<code>store.New[K, T](nil)</code>.
<em>Below are listed some of the most commonly used security helpers but you can find detailed
documentation for all available methods in the
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/security" target="_blank" rel="noopener noreferrer"><code>security</code></a>
subpackage.</em>
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Miscellaneous
returns a concurrent-safe application memory store that you can use to store anything for the duration of the
application process (e.g. cache, config flags, etc.).
You can find more details about the available store methods in the
documentation but the most commonly used ones are
GetOrSet(key, setFunc)
// this setter is invoked only once unless "example2" is removed
// (e.g. suitable for instantiating singletons)
Keep in mind that the application store is also used internally usually with
prefixed keys (e.g. the collections cache is stored under the
pbAppCachedCollections
key) and changing these system keys or calling
could
have unintended side-effects.
If you want more advanced control you can initialize your own store independent from the
application instance via
Below are listed some of the most commonly used security helpers but you can find detailed
documentation for all available methods in the
Generating random strings
RandomStringWithAlphabet
Compare strings with constant time
// must be random 32 characters string
"sqAEm1v5NI3XyMKRBJdHCDANfwj3hqZ9"


--------------------------------------------------------------------------------

[42] Extend with Go - Record proxy
URL: https://pocketbase.io/docs/go-record-proxy/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with Go - Record proxy

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

The available <a href="/docs/go-records"><code>core.Record</code> and its helpers</a>
are usually the recommended way to interact with your data, but in case you want a typed access to your record
fields you can create a helper struct that embeds
<a href="https://pkg.go.dev/github.com/pocketbase/pocketbase/core#BaseRecordProxy" target="_blank" rel="noopener noreferrer"><code>core.BaseRecordProxy</code></a> <em>(which implements the <code>core.RecordProxy</code> interface)</em> and define your collection fields as
getters and setters.
By implementing the <code>core.RecordProxy</code> interface you can use your custom struct as part of a
<code>RecordQuery</code> result like a regular record model. In addition, every DB change through the proxy
struct will trigger the corresponding record validations and hooks. This ensures that other parts of your app,
including 3rd party plugins, that don't know or use your custom struct will still work as expected.
Below is a sample <code>Article</code> record proxy implementation:
Accessing and modifying the proxy records is the same as for the regular records. Continuing with the
above <code>Article</code> example:
If you have an existing <code>*core.Record</code> value you can also load it into your proxy using the
<code>SetProxyRecord</code> method:
Collection operations
Collection operations
Sending HTTP requests
Extend with Go - Record proxy
are usually the recommended way to interact with your data, but in case you want a typed access to your record
fields you can create a helper struct that embeds
(which implements the
and define your collection fields as
getters and setters.
interface you can use your custom struct as part of a
result like a regular record model. In addition, every DB change through the proxy
struct will trigger the corresponding record validations and hooks. This ensures that other parts of your app,
including 3rd party plugins, that don't know or use your custom struct will still work as expected.
record proxy implementation:
"github.com/pocketbase/pocketbase/core"
"github.com/pocketbase/pocketbase/tools/types"
// ensures that the Article struct satisfy the core.RecordProxy interface
Accessing and modifying the proxy records is the same as for the regular records. Continuing with the
above
"LOWER(slug)={:slug}"
// case insensitive match
// persist the change while also triggering the original record validations and hooks
If you have an existing
value you can also load it into your proxy using the
// fetch regular record


--------------------------------------------------------------------------------

[43] Extend with JavaScript - Overview
URL: https://pocketbase.io/docs/js-overview/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Overview

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#javascript-engine" class="link-primary"> JavaScript engine </a>
<a href="#typescript-declarations-and-code-completion" class="link-primary"> TypeScript declarations and code completion </a>
<a href="#caveats-and-limitations" class="link-primary"> Caveats and limitations </a>
<a href="#global-objects" class="link-primary"> Global objects </a>
<a href="#handlers-scope" class="link-primary"> Handlers scope </a>
<a href="#relative-paths" class="link-primary"> Relative paths </a>
<a href="#loading-modules" class="link-primary"> Loading modules </a>
<a href="#performance" class="link-primary"> Performance </a>
<a href="#engine-limitations" class="link-primary"> Engine limitations </a>
The prebuilt PocketBase v0.17+ executable comes with embedded ES5 JavaScript engine (<a href="https://github.com/dop251/goja" target="_blank" rel="nopppener noreferrer">goja</a>) which enables you to write custom server-side code using plain JavaScript.
You can start by creating <code>*.pb.js</code> file(s) inside a <code>pb_hooks</code>
directory next to your executable.
<em>For convenience, when making changes to the files inside <code>pb_hooks</code>, the process will
automatically restart/reload itself (currently supported only on UNIX based platforms). The
<code>*.pb.js</code> files are loaded per their filename sort order.</em>
For most parts, the JavaScript APIs are derived from <a href="/docs/go-overview">Go</a> with 2 main differences:
Below is a list with some of the commonly used global objects that are accessible from everywhere:
While you can't use directly TypeScript (<em>without transpiling it to JS on your own</em>), PocketBase
comes with builtin <strong>ambient TypeScript declarations</strong> that can help providing information
and documentation about the available global variables, methods and arguments, code completion, etc. as
long as your editor has TypeScript LSP support
<em>(most editors either have it builtin or available as plugin)</em>.
The types declarations are stored in
<code>pb_data/types.d.ts</code> file. You can point to those declarations using the
<a href="https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html#-reference-path-" target="_blank" rel="noopener">reference triple-slash directive</a>
at the top of your JS file:
If after referencing the types your editor still doesn't perform linting, then you can try to rename your
file to have <code>.pb.ts</code> extension.
Each handler function (hook, route, middleware, etc.) is
<strong>serialized and executed in its own isolated context as a separate "program"</strong>. This means
that you don't have access to custom variables and functions declared outside of the handler scope. For
example, the below code will fail:
The above serialization and isolation context is also the reason why error stack trace line numbers may
not be accurate.
One possible workaround for sharing/reusing code across different handlers could be to move and export the
reusable code portion as local module and load it with <code>require()</code> inside the handler but keep in
mind that the loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues:
Relative file paths are relative to the current working directory (CWD) and not to the
<code>pb_hooks</code>.
<br>
To get an absolute path to the <code>pb_hooks</code> directory you can use the global
<code class="txt-bold">__hooks</code> variable.
Please note that the embedded JavaScript engine is not a Node.js or browser environment, meaning
that modules that rely on APIs like <em>window</em>, <em>fs</em>,
<em>fetch</em>, <em>buffer</em> or any other runtime specific API not part of the ES5 spec may not
work!
You can load modules either by specifying their local filesystem path or by using their name, which will
automatically search in:
Currently only CommonJS (CJS) modules are supported and can be loaded with
<code>const x = require(...)</code>.
<br>
ECMAScript modules (ESM) can be loaded by first precompiling and transforming your dependencies with a bundler
like
<a href="https://rollupjs.org/" target="_blank" rel="noopener noreferrer">rollup</a>,
<a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">webpack</a>,
<a href="https://browserify.org/" target="_blank" rel="noopener noreferrer">browserify</a>, etc.
A common usage of local modules is for loading shared helpers or configuration parameters, for example:
Loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues.
The prebuilt executable comes with a <strong>prewarmed pool of 15 JS runtimes</strong>, which helps
maintaining the handlers execution times on par with the Go equivalent code (see
<a href="https://github.com/pocketbase/benchmarks/blob/master/results/hetzner_cax11.md#go-vs-js-route-execution" target="blank" rel="noopener noreferrer">benchmarks</a>). You can adjust the pool size manually with the <code>--hooksPool=50</code> flag (<em>increasing the pool size may improve the performance in high concurrent scenarios but also will
increase the memory usage</em>).
Note that the handlers performance may degrade if you have heavy computational tasks in pure JavaScript
(encryption, random generators, etc.). For such cases prefer using the exposed <a href="/jsvm/index.html" target="_blank">Go bindings</a>
(e.g. <code>$security.randomString(10)</code>).
We inherit some of the limitations and caveats of the embedded JavaScript engine
(<a href="https://github.com/dop251/goja" target="_blank" rel="nopppener noreferrer">goja</a>):
Go exported method and field names are converted to camelCase, for example:
<br> <code>app.FindRecordById("example", "RECORD_ID")</code> becomes
<code>$app.findRecordById("example", "RECORD_ID")</code>.
Errors are thrown as regular JavaScript exceptions and not returned as Go values.
<a href="/jsvm/variables/__hooks.html" target="_blank"><code>__hooks</code></a>
- The absolute path to the app <code>pb_hooks</code> directory.
<a href="/jsvm/modules/_app.html" target="_blank"><code>$app</code></a> - The current running PocketBase application instance.
<a href="/jsvm/modules/_apis.html" target="_blank"><code>$apis.*</code></a> - API routing helpers and middlewares.
<a href="/jsvm/modules/_os.html" target="_blank"><code>$os.*</code></a> - OS level primitives (deleting directories, executing shell commands, etc.).
<a href="/jsvm/modules/_security.html" target="_blank"><code>$security.*</code></a> - Low level helpers for creating and parsing JWTs, random string generation, AES encryption, etc.
And many more - for all exposed APIs, please refer to the
<a href="/jsvm/index.html" target="_blank">JSVM reference docs</a>.
the current working directory (<em>affects also relative paths</em>)
any <code>node_modules</code> directory
any parent <code>node_modules</code> directory
Has most of ES6 functionality already implemented but it is not fully spec compliant yet.
No concurrent execution inside a single handler (aka. no <code>setTimeout</code>/<code>setInterval</code>).
Wrapped Go structural types (such as maps, slices) comes with some peculiarities and do not behave the
exact same way as native ECMAScript values (for more details see
<a href="https://pkg.go.dev/github.com/dop251/goja#Runtime.ToValue" target="blank" rel="noreferrer noopener">goja ToValue</a>).
In relation to the above, DB <code>json</code> field values require the use of <code>get()</code> and
<code>set()</code> helpers (<em>this may change in the future</em>).
Collection operations
Collection operations
Sending HTTP requests
You can start by creating
directory next to your executable.
// pb_hooks/main.pb.js
onRecordAfterUpdateSuccess
For convenience, when making changes to the files inside
, the process will
automatically restart/reload itself (currently supported only on UNIX based platforms). The
files are loaded per their filename sort order.
with 2 main differences:
Go exported method and field names are converted to camelCase, for example:
app.FindRecordById("example", "RECORD_ID")
$app.findRecordById("example", "RECORD_ID")
Below is a list with some of the commonly used global objects that are accessible from everywhere:
- The absolute path to the app
- The current running PocketBase application instance.
- API routing helpers and middlewares.
- OS level primitives (deleting directories, executing shell commands, etc.).
- Low level helpers for creating and parsing JWTs, random string generation, AES encryption, etc.
And many more - for all exposed APIs, please refer to the
without transpiling it to JS on your own
), PocketBase
comes with builtin
(most editors either have it builtin or available as plugin)
The types declarations are stored in
file. You can point to those declarations using the
reference triple-slash directive
at the top of your JS file:
/// <reference path="../pb_data/types.d.ts" />
If after referencing the types your editor still doesn't perform linting, then you can try to rename your
file to have
Caveats and limitations
Each handler function (hook, route, middleware, etc.) is
serialized and executed in its own isolated context as a separate "program"
. This means
that you don't have access to custom variables and functions declared outside of the handler scope. For
example, the below code will fail:
// <-- name will be undefined inside the handler
The above serialization and isolation context is also the reason why error stack trace line numbers may
not be accurate.
One possible workaround for sharing/reusing code across different handlers could be to move and export the
reusable code portion as local module and load it with
inside the handler but keep in
mind that the loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues:
Relative file paths are relative to the current working directory (CWD) and not to the
To get an absolute path to the
directory you can use the global
or any other runtime specific API not part of the ES5 spec may not
work!
You can load modules either by specifying their local filesystem path or by using their name, which will
automatically search in:
the current working directory (
affects also relative paths
Currently only CommonJS (CJS) modules are supported and can be loaded with
const x = require(...)
A common usage of local modules is for loading shared helpers or configuration parameters, for example:
// pb_hooks/main.pb.js
Loaded modules use a shared registry and mutations should be avoided when possible to prevent
concurrency issues.
The prebuilt executable comes with a
prewarmed pool of 15 JS runtimes
, which helps
maintaining the handlers execution times on par with the Go equivalent code (see
). You can adjust the pool size manually with the
increasing the pool size may improve the performance in high concurrent scenarios but also will
increase the memory usage
$security.randomString(10)
Has most of ES6 functionality already implemented but it is not fully spec compliant yet.
No concurrent execution inside a single handler (aka. no
In relation to the above, DB
field values require the use of
this may change in the future


--------------------------------------------------------------------------------

[44] Extend with JavaScript - Event hooks
URL: https://pocketbase.io/docs/js-event-hooks/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Event hooks

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#app-hooks" class="link-primary"> App hooks </a>
<a href="#mailer-hooks" class="link-primary"> Mailer hooks </a>
<a href="#realtime-hooks" class="link-primary"> Realtime hooks </a>
<a href="#record-model-hooks" class="link-primary"> Record model hooks </a>
<a href="#collection-model-hooks" class="link-primary"> Collection model hooks </a>
<a href="#request-hooks" class="link-primary"> Request hooks </a>
<a href="#base-model-hooks" class="link-primary"> Base model hooks </a>
<a href="#record-model-create-hooks" class="link-primary"> Record model create hooks </a>
<a href="#record-model-update-hooks" class="link-primary"> Record model update hooks </a>
<a href="#record-model-delete-hooks" class="link-primary"> Record model delete hooks </a>
<a href="#collection-mode-create-hooks" class="link-primary"> Collection mode create hooks </a>
<a href="#collection-mode-update-hooks" class="link-primary"> Collection mode update hooks </a>
<a href="#collection-mode-delete-hooks" class="link-primary"> Collection mode delete hooks </a>
<a href="#record-crud-request-hooks" class="link-primary"> Record CRUD request hooks </a>
<a href="#record-auth-request-hooks" class="link-primary"> Record auth request hooks </a>
<a href="#batch-request-hooks" class="link-primary"> Batch request hooks </a>
<a href="#file-request-hooks" class="link-primary"> File request hooks </a>
<a href="#collection-request-hooks" class="link-primary"> Collection request hooks </a>
<a href="#settings-request-hooks" class="link-primary"> Settings request hooks </a>
<a href="#base-model-create-hooks" class="link-primary"> Base model create hooks </a>
<a href="#base-model-update-hooks" class="link-primary"> Base model update hooks </a>
<a href="#base-model-delete-hooks" class="link-primary"> Base model delete hooks </a>
You can extend the default PocketBase behavior with custom server-side code using the exposed JavaScript
app event hooks.
Throwing an error or not calling <code>e.next()</code> inside a handler function stops the hook execution chain.
All hook handler functions share the same <code>function(e){}</code> signature and expect the
user to call <code data-svelte-h="svelte-1b9v6gt">e.next()</code> if they want to proceed with the execution chain.
<code>onBootstrap</code> hook is triggered when initializing the main
application resources (db, app settings, etc).
Note that attempting to access the database before the <code>e.next()</code> call will result in an error.
<code>onSettingsReload</code> hook is triggered every time when the <code>$app.settings()</code>
is being replaced with a new state.
Calling <code>e.app.settings()</code> after <code>e.next()</code> returns the new state.
<code>onMailerSend</code> hook is triggered every time when a new email is
being send using the <code>$app.newMailClient()</code> instance.
It allows intercepting the email message or to use a custom mailer client.
<code>onMailerRecordAuthAlertSend</code> hook is triggered when
sending a new device login auth alert email, allowing you to
intercept and customize the email message that is being sent.
<code>onMailerRecordPasswordResetSend</code> hook is triggered when
sending a password reset email to an auth record, allowing
you to intercept and customize the email message that is being sent.
<code>onMailerRecordVerificationSend</code> hook is triggered when
sending a verification email to an auth record, allowing
you to intercept and customize the email message that is being sent.
<code>onMailerRecordEmailChangeSend</code> hook is triggered when sending a
confirmation new address email to an auth record, allowing
you to intercept and customize the email message that is being sent.
<code>onMailerRecordOTPSend</code> hook is triggered when sending an OTP email
to an auth record, allowing you to intercept and customize the
email message that is being sent.
<code>onRealtimeConnectRequest</code> hook is triggered when establishing the SSE client connection.
Any execution after e.next() of a hook handler happens after the client disconnects.
These are lower level Record model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling <code>e.save(record)</code>, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
<a href="#request-hooks">Record <code>*Request</code> hooks</a>
<code>onRecordEnrich</code> is triggered every time when a record is enriched
- as part of the builtin Record responses, during realtime message serialization, or when <code>apis.enrichRecord</code> is invoked.
It could be used for example to redact/hide or add computed temporary
Record model props only for the specific request info.
<code>onRecordValidate</code> is a Record proxy model hook of <code>onModelValidate</code>.
<code>onRecordValidate</code> is called every time when a Record is being validated,
e.g. triggered by <code>$app.validate()</code> or <code>$app.save()</code>.
<code>onRecordCreate</code> is a Record proxy model hook of <code>onModelCreate</code>.
<code>onRecordCreate</code> is triggered every time when a new Record is being created,
e.g. triggered by <code>$app.save()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Record validation
and the INSERT DB statement.
Operations AFTER the <code>e.next()</code> execute after the Record validation
and the INSERT DB statement.
<code>onRecordCreateExecute</code> is a Record proxy model hook of <code>onModelCreateExecute</code>.
<code>onRecordCreateExecute</code> is triggered after successful Record validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the <code>$app.save()</code> in the following firing order:
<br>
<code>onRecordCreate</code>
<br>
<span class="txt-mono"> -> </span>
<code>onRecordValidate</code> (skipped with <code>$app.saveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>onRecordCreateExecute</code>
<code>onRecordAfterCreateSuccess</code> is a Record proxy model hook of <code>onModelAfterCreateSuccess</code>.
<code>onRecordAfterCreateSuccess</code> is triggered after each successful
Record DB create persistence.
<code>onRecordAfterCreateError</code> is a Record proxy model hook of <code>onModelAfterCreateError</code>.
<code>onRecordAfterCreateError</code> is triggered after each failed
Record DB create persistence.
<code>onRecordUpdate</code> is a Record proxy model hook of <code>onModelUpdate</code>.
<code>onRecordUpdate</code> is triggered every time when a new Record is being updated,
e.g. triggered by <code>$app.save()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Record validation
and the UPDATE DB statement.
Operations AFTER the <code>e.next()</code> execute after the Record validation
and the UPDATE DB statement.
<code>onRecordUpdateExecute</code> is a Record proxy model hook of <code>onModelUpdateExecute</code>.
<code>onRecordUpdateExecute</code> is triggered after successful Record validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the <code>$app.save()</code> in the following firing order:
<br>
<code>onRecordUpdate</code>
<br>
<span class="txt-mono"> -> </span>
<code>onRecordValidate</code> (skipped with <code>$app.saveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>onRecordUpdateExecute</code>
<code>onRecordAfterUpdateSuccess</code> is a Record proxy model hook of <code>onModelAfterUpdateSuccess</code>.
<code>onRecordAfterUpdateSuccess</code> is triggered after each successful
Record DB update persistence.
<code>onRecordAfterUpdateError</code> is a Record proxy model hook of <code>onModelAfterUpdateError</code>.
<code>onRecordAfterUpdateError</code> is triggered after each failed
Record DB update persistence.
<code>onRecordDelete</code> is a Record proxy model hook of <code>onModelDelete</code>.
<code>onRecordDelete</code> is triggered every time when a new Record is being deleted,
e.g. triggered by <code>$app.delete()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Record validation
and the UPDATE DB statement.
Operations AFTER the <code>e.next()</code> execute after the Record validation
and the UPDATE DB statement.
<code>onRecordDeleteExecute</code> is a Record proxy model hook of <code>onModelDeleteExecute</code>.
<code>onRecordDeleteExecute</code> is triggered after the internal delete checks and
right before the Record the model DELETE DB statement execution.
Usually it is triggered as part of the <code>$app.delete()</code> in the following firing order:
<br>
<code>onRecordDelete</code>
<br>
<span class="txt-mono"> -> </span>
internal delete checks
<br>
<span class="txt-mono"> -> </span>
<code>onRecordDeleteExecute</code>
<code>onRecordAfterDeleteSuccess</code> is a Record proxy model hook of <code>onModelAfterDeleteSuccess</code>.
<code>onRecordAfterDeleteSuccess</code> is triggered after each successful
Record DB delete persistence.
<code>onRecordAfterDeleteError</code> is a Record proxy model hook of <code>onModelAfterDeleteError</code>.
<code>onRecordAfterDeleteError</code> is triggered after each failed
Record DB delete persistence.
These are lower level Collection model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling <code>e.save(collection)</code>, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
<a href="#collection-request-hooks">Collection <code>*Request</code> hooks</a>
<code>onCollectionValidate</code> is a Collection proxy model hook of <code>onModelValidate</code>.
<code>onCollectionValidate</code> is called every time when a Collection is being validated,
e.g. triggered by <code>$app.validate()</code> or <code>$app.save()</code>.
<code>onCollectionCreate</code> is a Collection proxy model hook of <code>onModelCreate</code>.
<code>onCollectionCreate</code> is triggered every time when a new Collection is being created,
e.g. triggered by <code>$app.save()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Collection validation
and the INSERT DB statement.
Operations AFTER the <code>e.next()</code> execute after the Collection validation
and the INSERT DB statement.
<code>onCollectionCreateExecute</code> is a Collection proxy model hook of <code>onModelCreateExecute</code>.
<code>onCollectionCreateExecute</code> is triggered after successful Collection validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the <code>$app.save()</code> in the following firing order:
<br>
<code>onCollectionCreate</code>
<br>
<span class="txt-mono"> -> </span>
<code>onCollectionValidate</code> (skipped with <code>$app.saveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>onCollectionCreateExecute</code>
<code>onCollectionAfterCreateSuccess</code> is a Collection proxy model hook of <code>onModelAfterCreateSuccess</code>.
<code>onCollectionAfterCreateSuccess</code> is triggered after each successful
Collection DB create persistence.
<code>onCollectionAfterCreateError</code> is a Collection proxy model hook of <code>onModelAfterCreateError</code>.
<code>onCollectionAfterCreateError</code> is triggered after each failed
Collection DB create persistence.
<code>onCollectionUpdate</code> is a Collection proxy model hook of <code>onModelUpdate</code>.
<code>onCollectionUpdate</code> is triggered every time when a new Collection is being updated,
e.g. triggered by <code>$app.save()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Collection validation
and the UPDATE DB statement.
Operations AFTER the <code>e.next()</code> execute after the Collection validation
and the UPDATE DB statement.
<code>onCollectionUpdateExecute</code> is a Collection proxy model hook of <code>onModelUpdateExecute</code>.
<code>onCollectionUpdateExecute</code> is triggered after successful Collection validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the <code>$app.save()</code> in the following firing order:
<br>
<code>onCollectionUpdate</code>
<br>
<span class="txt-mono"> -> </span>
<code>onCollectionValidate</code> (skipped with <code>$app.saveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>onCollectionUpdateExecute</code>
<code>onCollectionAfterUpdateSuccess</code> is a Collection proxy model hook of <code>onModelAfterUpdateSuccess</code>.
<code>onCollectionAfterUpdateSuccess</code> is triggered after each successful
Collection DB update persistence.
<code>onCollectionAfterUpdateError</code> is a Collection proxy model hook of <code>onModelAfterUpdateError</code>.
<code>onCollectionAfterUpdateError</code> is triggered after each failed
Collection DB update persistence.
<code>onCollectionDelete</code> is a Collection proxy model hook of <code>onModelDelete</code>.
<code>onCollectionDelete</code> is triggered every time when a new Collection is being deleted,
e.g. triggered by <code>$app.delete()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Collection validation
and the UPDATE DB statement.
Operations AFTER the <code>e.next()</code> execute after the Collection validation
and the UPDATE DB statement.
<code>onCollectionDeleteExecute</code> is a Collection proxy model hook of <code>onModelDeleteExecute</code>.
<code>onCollectionDeleteExecute</code> is triggered after the internal delete checks and
right before the Collection the model DELETE DB statement execution.
Usually it is triggered as part of the <code>$app.delete()</code> in the following firing order:
<br>
<code>onCollectionDelete</code>
<br>
<span class="txt-mono"> -> </span>
internal delete checks
<br>
<span class="txt-mono"> -> </span>
<code>onCollectionDeleteExecute</code>
<code>onCollectionAfterDeleteSuccess</code> is a Collection proxy model hook of <code>onModelAfterDeleteSuccess</code>.
<code>onCollectionAfterDeleteSuccess</code> is triggered after each successful
Collection DB delete persistence.
<code>onCollectionAfterDeleteError</code> is a Collection proxy model hook of <code>onModelAfterDeleteError</code>.
<code>onCollectionAfterDeleteError</code> is triggered after each failed
Collection DB delete persistence.
The request hooks are triggered only when the corresponding API request endpoint is accessed.
<code>onRecordsListRequest</code> hook is triggered on each API Records list request.
Could be used to validate or modify the response before returning it to the client.
<code>onRecordViewRequest</code> hook is triggered on each API Record view request.
Could be used to validate or modify the response before returning it to the client.
<code>onRecordCreateRequest</code> hook is triggered on each API Record create request.
<br/>
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>onRecordUpdateRequest</code> hook is triggered on each API Record update request.
<br/>
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>onRecordDeleteRequest</code> hook is triggered on each API Record delete request.
<br/>
Could be used to additionally validate the request data or implement
completely different delete behavior.
<code>onRecordAuthRequest</code> hook is triggered on each successful API
record authentication request (sign-in, token refresh, etc.).
Could be used to additionally validate or modify the authenticated
record data and token.
<code>onRecordAuthRefreshRequest</code> hook is triggered on each Record
auth refresh API request (right before generating a new auth token).
Could be used to additionally validate the request data or implement
completely different auth refresh behavior.
<code>onRecordAuthWithPasswordRequest</code> hook is triggered on each
Record auth with password API request.
<code>e.record</code> could be <code>nil</code> if no matching identity is found, allowing
you to manually locate a different Record model (by reassigning <code>e.record</code>).
<code>onRecordAuthWithOAuth2Request</code> hook is triggered on each Record
OAuth2 sign-in/sign-up API request (after token exchange and before external provider linking).
If <code>e.record</code> is not set, then the OAuth2
request will try to create a new auth record.
<br>
To assign or link a different existing record model you can
change the <code>e.record</code> field.
<code>onRecordRequestPasswordResetRequest</code> hook is triggered on
each Record request password reset API request.
Could be used to additionally validate the request data or implement
completely different password reset behavior.
<code>onRecordConfirmPasswordResetRequest</code> hook is triggered on
each Record confirm password reset API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>onRecordRequestVerificationRequest</code> hook is triggered on
each Record request verification API request.
Could be used to additionally validate the loaded request data or implement
completely different verification behavior.
<code>onRecordConfirmVerificationRequest</code> hook is triggered on each
Record confirm verification API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>onRecordRequestEmailChangeRequest</code> hook is triggered on each
Record request email change API request.
Could be used to additionally validate the request data or implement
completely different request email change behavior.
<code>onRecordConfirmEmailChangeRequest</code> hook is triggered on each
Record confirm email change API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
<code>onRecordRequestOTPRequest</code> hook is triggered on each Record
request OTP API request.
<code>e.record</code> could be <code>nil</code> if no user with the requested email is found, allowing
you to manually create a new Record or locate a different Record model (by reassigning <code>e.record</code>).
<code>onRecordAuthWithOTPRequest</code> hook is triggered on each Record
auth with OTP API request.
<code>onBatchRequest</code> hook is triggered on each API batch request.
Could be used to additionally validate or modify the submitted batch requests.
This hook will also fire the corresponding <code>onRecordCreateRequest</code>, <code>onRecordUpdateRequest</code>, <code>onRecordDeleteRequest</code> hooks, where <code>e.app</code> is the batch transactional app.
<code>onFileTokenRequest</code> hook is triggered on each auth file token API request.
The Model hooks are fired for all PocketBase structs that implements the Model DB interface - Record, Collection, Log, etc.
For convenience, if you want to listen to only the Record or Collection DB model
events without doing manual type assertion, you can use the
<a href="#record-model-hooks"><code>onRecord*</code></a>
and
<a href="#collection-model-hooks"><code>onCollection*</code></a>
proxy hooks above.
<code>onModelValidate</code> is called every time when a Model is being validated,
e.g. triggered by <code>$app.validate()</code> or <code>$app.save()</code>.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelCreate</code> is triggered every time when a new Model is being created,
e.g. triggered by <code>$app.save()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Model validation
and the INSERT DB statement.
Operations AFTER the <code>e.next()</code> execute after the Model validation
and the INSERT DB statement.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelCreateExecute</code> is triggered after successful Model validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the <code>$app.save()</code> in the following firing order:
<br>
<code>onModelCreate</code>
<br>
<span class="txt-mono"> -> </span>
<code>onModelValidate</code> (skipped with <code>$app.saveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>onModelCreateExecute</code>
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelAfterCreateSuccess</code> is triggered after each successful
Model DB create persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelAfterCreateError</code> is triggered after each failed
Model DB create persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelUpdate</code> is triggered every time when a new Model is being updated,
e.g. triggered by <code>$app.save()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Model validation
and the UPDATE DB statement.
Operations AFTER the <code>e.next()</code> execute after the Model validation
and the UPDATE DB statement.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelUpdateExecute</code> is triggered after successful Model validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the <code>$app.save()</code> in the following firing order:
<br>
<code>onModelUpdate</code>
<br>
<span class="txt-mono"> -> </span>
<code>onModelValidate</code> (skipped with <code>$app.saveNoValidate()</code>)
<br>
<span class="txt-mono"> -> </span>
<code>onModelUpdateExecute</code>
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelAfterUpdateSuccess</code> is triggered after each successful
Model DB update persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelAfterUpdateError</code> is triggered after each failed
Model DB update persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelDelete</code> is triggered every time when a new Model is being deleted,
e.g. triggered by <code>$app.delete()</code>.
Operations BEFORE the <code>e.next()</code> execute before the Model validation
and the UPDATE DB statement.
Operations AFTER the <code>e.next()</code> execute after the Model validation
and the UPDATE DB statement.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelDeleteExecute</code> is triggered after the internal delete checks and
right before the Model the model DELETE DB statement execution.
Usually it is triggered as part of the <code>$app.delete()</code> in the following firing order:
<br>
<code>onModelDelete</code>
<br>
<span class="txt-mono"> -> </span>
internal delete checks
<br>
<span class="txt-mono"> -> </span>
<code>onModelDeleteExecute</code>
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelAfterDeleteSuccess</code> is triggered after each successful
Model DB delete persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<code>onModelAfterDeleteError</code> is triggered after each failed
Model DB delete persistence.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent <code>onRecord*</code> and <code>onCollection*</code> proxy hooks.
<strong>immediate</strong> on <code>$app.save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.delete()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.delete()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.save()</code> failure
<strong>delayed</strong> on transaction rollback
<strong>immediate</strong> on <code>$app.delete()</code> failure
<strong>delayed</strong> on transaction rollback
Collection operations
Collection operations
Sending HTTP requests
Throwing an error or not calling
inside a handler function stops the hook execution chain.
All hook handler functions share the same
signature and expect the
user to call
if they want to proceed with the execution chain.
hook is triggered when initializing the main
application resources (db, app settings, etc).
Note that attempting to access the database before the
call will result in an error.
hook is triggered every time when the
is being replaced with a new state.
returns the new state.
// e.name    - the name of the backup to create
// e.exclude - list of pb_data dir entries to exclude from the backup
is triggered before app backup restore (aka. on
// e.name    - the name of the backup to restore
// e.exclude - list of dir entries to exclude from the backup
hook is triggered when the app is in the process
of being terminated (ex. on
Note that the app could be terminated abruptly without awaiting the hook completion.
hook is triggered every time when a new email is
being send using the
It allows intercepting the email message or to use a custom mailer client.
// ex. change the mail subject
onMailerRecordAuthAlertSend
onMailerRecordAuthAlertSend
hook is triggered when
sending a new device login auth alert email, allowing you to
intercept and customize the email message that is being sent.
onMailerRecordAuthAlertSend
// ex. change the mail subject
onMailerRecordPasswordResetSend
onMailerRecordPasswordResetSend
hook is triggered when
sending a password reset email to an auth record, allowing
you to intercept and customize the email message that is being sent.
onMailerRecordPasswordResetSend
// ex. change the mail subject
onMailerRecordVerificationSend
onMailerRecordVerificationSend
hook is triggered when
sending a verification email to an auth record, allowing
you to intercept and customize the email message that is being sent.
onMailerRecordVerificationSend
// ex. change the mail subject
onMailerRecordEmailChangeSend
onMailerRecordEmailChangeSend
hook is triggered when sending a
confirmation new address email to an auth record, allowing
you to intercept and customize the email message that is being sent.
onMailerRecordEmailChangeSend
// ex. change the mail subject
onMailerRecordOTPSend
onMailerRecordOTPSend
hook is triggered when sending an OTP email
to an auth record, allowing you to intercept and customize the
email message that is being sent.
onMailerRecordOTPSend
// ex. change the mail subject
onRealtimeConnectRequest
onRealtimeConnectRequest
hook is triggered when establishing the SSE client connection.
Any execution after e.next() of a hook handler happens after the client disconnects.
onRealtimeConnectRequest
// and all RequestEvent fields...
onRealtimeSubscribeRequest
onRealtimeSubscribeRequest
onRealtimeSubscribeRequest
// and all RequestEvent fields...
onRealtimeMessageSend
onRealtimeMessageSend
hook is triggered when sending an SSE message to a client.
onRealtimeMessageSend
// and all original connect RequestEvent fields...
These are lower level Record model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling
, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
is triggered every time when a record is enriched
- as part of the builtin Record responses, during realtime message serialization, or when
It could be used for example to redact/hide or add computed temporary
Record model props only for the specific request info.
// hide one or more fields
// add new custom field for registered users
// for security custom props require to be enabled explicitly
is a Record proxy model hook of
is called every time when a Record is being validated,
e.g. triggered by
// fires for every record
// fires only for "users" and "articles" records
Record model create hooks
is a Record proxy model hook of
is triggered every time when a new Record is being created,
e.g. triggered by
Operations BEFORE the
execute before the Record validation
and the INSERT DB statement.
execute after the Record validation
and the INSERT DB statement.
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onRecordAfterCreateSuccess
onRecordAfterCreateError
// fires for every record
// fires only for "users" and "articles" records
onRecordCreateExecute
onRecordCreateExecute
is a Record proxy model hook of
onRecordCreateExecute
is triggered after successful Record validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the
in the following firing order:
$app.saveNoValidate()
onRecordCreateExecute
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onRecordAfterCreateSuccess
onRecordAfterCreateError
// fires for every record
onRecordCreateExecute
// fires only for "users" and "articles" records
onRecordCreateExecute
onRecordAfterCreateSuccess
onRecordAfterCreateSuccess
is a Record proxy model hook of
onModelAfterCreateSuccess
onRecordAfterCreateSuccess
is triggered after each successful
Record DB create persistence.
Note that when a Record is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
// fires for every record
onRecordAfterCreateSuccess
// fires only for "users" and "articles" records
onRecordAfterCreateSuccess
onRecordAfterCreateError
onRecordAfterCreateError
is a Record proxy model hook of
onModelAfterCreateError
onRecordAfterCreateError
is triggered after each failed
Record DB create persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
// fires for every record
onRecordAfterCreateError
// fires only for "users" and "articles" records
onRecordAfterCreateError
Record model update hooks
is a Record proxy model hook of
is triggered every time when a new Record is being updated,
e.g. triggered by
Operations BEFORE the
execute before the Record validation
and the UPDATE DB statement.
execute after the Record validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onRecordAfterUpdateSuccess
onRecordAfterUpdateError
// fires for every record
// fires only for "users" and "articles" records
onRecordUpdateExecute
onRecordUpdateExecute
is a Record proxy model hook of
onRecordUpdateExecute
is triggered after successful Record validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
$app.saveNoValidate()
onRecordUpdateExecute
Note that successful execution doesn't guarantee that the Record
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onRecordAfterUpdateSuccess
onRecordAfterUpdateError
// fires for every record
onRecordUpdateExecute
// fires only for "users" and "articles" records
onRecordUpdateExecute
onRecordAfterUpdateSuccess
onRecordAfterUpdateSuccess
is a Record proxy model hook of
onModelAfterUpdateSuccess
onRecordAfterUpdateSuccess
is triggered after each successful
Record DB update persistence.
Note that when a Record is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
// fires for every record
onRecordAfterUpdateSuccess
// fires only for "users" and "articles" records
onRecordAfterUpdateSuccess
onRecordAfterUpdateError
onRecordAfterUpdateError
is a Record proxy model hook of
onModelAfterUpdateError
onRecordAfterUpdateError
is triggered after each failed
Record DB update persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
// fires for every record
onRecordAfterUpdateError
// fires only for "users" and "articles" records
onRecordAfterUpdateError
Record model delete hooks
is a Record proxy model hook of
is triggered every time when a new Record is being deleted,
e.g. triggered by
Operations BEFORE the
execute before the Record validation
and the UPDATE DB statement.
execute after the Record validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Record
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted deleted events, you can
bind to
onRecordAfterDeleteSuccess
onRecordAfterDeleteError
// fires for every record
// fires only for "users" and "articles" records
onRecordDeleteExecute
onRecordDeleteExecute
is a Record proxy model hook of
onRecordDeleteExecute
is triggered after the internal delete checks and
right before the Record the model DELETE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
internal delete checks
onRecordDeleteExecute
Note that successful execution doesn't guarantee that the Record
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onRecordAfterDeleteSuccess
onRecordAfterDeleteError
// fires for every record
onRecordDeleteExecute
// fires only for "users" and "articles" records
onRecordDeleteExecute
onRecordAfterDeleteSuccess
onRecordAfterDeleteSuccess
is a Record proxy model hook of
onModelAfterDeleteSuccess
onRecordAfterDeleteSuccess
is triggered after each successful
Record DB delete persistence.
Note that when a Record is deleted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
// fires for every record
onRecordAfterDeleteSuccess
// fires only for "users" and "articles" records
onRecordAfterDeleteSuccess
onRecordAfterDeleteError
onRecordAfterDeleteError
is a Record proxy model hook of
onModelAfterDeleteError
onRecordAfterDeleteError
is triggered after each failed
Record DB delete persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
// fires for every record
onRecordAfterDeleteError
// fires only for "users" and "articles" records
onRecordAfterDeleteError
Collection model hooks
These are lower level Collection model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling
, etc.) and therefore they have no access to the request context!
If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
is a Collection proxy model hook of
is called every time when a Collection is being validated,
e.g. triggered by
// fires for every collection
// fires only for "users" and "articles" collections
Collection mode create hooks
is a Collection proxy model hook of
is triggered every time when a new Collection is being created,
e.g. triggered by
Operations BEFORE the
execute before the Collection validation
and the INSERT DB statement.
execute after the Collection validation
and the INSERT DB statement.
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onCollectionAfterCreateSuccess
onCollectionAfterCreateError
// fires for every collection
// fires only for "users" and "articles" collections
onCollectionCreateExecute
onCollectionCreateExecute
is a Collection proxy model hook of
onCollectionCreateExecute
is triggered after successful Collection validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the
in the following firing order:
$app.saveNoValidate()
onCollectionCreateExecute
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onCollectionAfterCreateSuccess
onCollectionAfterCreateError
// fires for every collection
onCollectionCreateExecute
// fires only for "users" and "articles" collections
onCollectionCreateExecute
onCollectionAfterCreateSuccess
onCollectionAfterCreateSuccess
is a Collection proxy model hook of
onModelAfterCreateSuccess
onCollectionAfterCreateSuccess
is triggered after each successful
Collection DB create persistence.
Note that when a Collection is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
// fires for every collection
onCollectionAfterCreateSuccess
// fires only for "users" and "articles" collections
onCollectionAfterCreateSuccess
onCollectionAfterCreateError
onCollectionAfterCreateError
is a Collection proxy model hook of
onModelAfterCreateError
onCollectionAfterCreateError
is triggered after each failed
Collection DB create persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
// fires for every collection
onCollectionAfterCreateError
// fires only for "users" and "articles" collections
onCollectionAfterCreateError
Collection mode update hooks
is a Collection proxy model hook of
is triggered every time when a new Collection is being updated,
e.g. triggered by
Operations BEFORE the
execute before the Collection validation
and the UPDATE DB statement.
execute after the Collection validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onCollectionAfterUpdateSuccess
onCollectionAfterUpdateError
// fires for every collection
// fires only for "users" and "articles" collections
onCollectionUpdateExecute
onCollectionUpdateExecute
is a Collection proxy model hook of
onCollectionUpdateExecute
is triggered after successful Collection validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
$app.saveNoValidate()
onCollectionUpdateExecute
Note that successful execution doesn't guarantee that the Collection
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onCollectionAfterUpdateSuccess
onCollectionAfterUpdateError
// fires for every collection
onCollectionUpdateExecute
// fires only for "users" and "articles" collections
onCollectionUpdateExecute
onCollectionAfterUpdateSuccess
onCollectionAfterUpdateSuccess
is a Collection proxy model hook of
onModelAfterUpdateSuccess
onCollectionAfterUpdateSuccess
is triggered after each successful
Collection DB update persistence.
Note that when a Collection is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
// fires for every collection
onCollectionAfterUpdateSuccess
// fires only for "users" and "articles" collections
onCollectionAfterUpdateSuccess
onCollectionAfterUpdateError
onCollectionAfterUpdateError
is a Collection proxy model hook of
onModelAfterUpdateError
onCollectionAfterUpdateError
is triggered after each failed
Collection DB update persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
// fires for every collection
onCollectionAfterUpdateError
// fires only for "users" and "articles" collections
onCollectionAfterUpdateError
Collection mode delete hooks
is a Collection proxy model hook of
is triggered every time when a new Collection is being deleted,
e.g. triggered by
Operations BEFORE the
execute before the Collection validation
and the UPDATE DB statement.
execute after the Collection validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Collection
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted deleted events, you can
bind to
onCollectionAfterDeleteSuccess
onCollectionAfterDeleteError
// fires for every collection
// fires only for "users" and "articles" collections
onCollectionDeleteExecute
onCollectionDeleteExecute
is a Collection proxy model hook of
onCollectionDeleteExecute
is triggered after the internal delete checks and
right before the Collection the model DELETE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
internal delete checks
onCollectionDeleteExecute
Note that successful execution doesn't guarantee that the Collection
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onCollectionAfterDeleteSuccess
onCollectionAfterDeleteError
// fires for every collection
onCollectionDeleteExecute
// fires only for "users" and "articles" collections
onCollectionDeleteExecute
onCollectionAfterDeleteSuccess
onCollectionAfterDeleteSuccess
is a Collection proxy model hook of
onModelAfterDeleteSuccess
onCollectionAfterDeleteSuccess
is triggered after each successful
Collection DB delete persistence.
Note that when a Collection is deleted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
// fires for every collection
onCollectionAfterDeleteSuccess
// fires only for "users" and "articles" collections
onCollectionAfterDeleteSuccess
onCollectionAfterDeleteError
onCollectionAfterDeleteError
is a Collection proxy model hook of
onModelAfterDeleteError
onCollectionAfterDeleteError
is triggered after each failed
Collection DB delete persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
// fires for every collection
onCollectionAfterDeleteError
// fires only for "users" and "articles" collections
onCollectionAfterDeleteError
The request hooks are triggered only when the corresponding API request endpoint is accessed.
Record CRUD request hooks
hook is triggered on each API Records list request.
Could be used to validate or modify the response before returning it to the client.
Note that if you want to hide existing or add new computed Record fields prefer using the
hook because it is less error-prone and it is triggered
by all builtin Record responses (including when sending realtime Record events).
// fires for every collection
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
// and all RequestEvent fields...
hook is triggered on each API Record view request.
Could be used to validate or modify the response before returning it to the client.
Note that if you want to hide existing or add new computed Record fields prefer using the
hook because it is less error-prone and it is triggered
by all builtin Record responses (including when sending realtime Record events).
// fires for every collection
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
// and all RequestEvent fields...
onRecordCreateRequest
onRecordCreateRequest
hook is triggered on each API Record create request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
// fires for every collection
onRecordCreateRequest
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
onRecordCreateRequest
// and all RequestEvent fields...
onRecordUpdateRequest
onRecordUpdateRequest
hook is triggered on each API Record update request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
// fires for every collection
onRecordUpdateRequest
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
onRecordUpdateRequest
// and all RequestEvent fields...
onRecordDeleteRequest
onRecordDeleteRequest
hook is triggered on each API Record delete request.
Could be used to additionally validate the request data or implement
completely different delete behavior.
// fires for every collection
onRecordDeleteRequest
// and all RequestEvent fields...
// fires only for "users" and "articles" collections
onRecordDeleteRequest
// and all RequestEvent fields...
Record auth request hooks
hook is triggered on each successful API
record authentication request (sign-in, token refresh, etc.).
Could be used to additionally validate or modify the authenticated
record data and token.
// fires for every auth collection
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
// and all RequestEvent fields...
onRecordAuthRefreshRequest
onRecordAuthRefreshRequest
hook is triggered on each Record
auth refresh API request (right before generating a new auth token).
Could be used to additionally validate the request data or implement
completely different auth refresh behavior.
// fires for every auth collection
onRecordAuthRefreshRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordAuthRefreshRequest
// and all RequestEvent fields...
onRecordAuthWithPasswordRequest
onRecordAuthWithPasswordRequest
hook is triggered on each
Record auth with password API request.
if no matching identity is found, allowing
you to manually locate a different Record model (by reassigning
// fires for every auth collection
onRecordAuthWithPasswordRequest
// e.record (could be null)
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordAuthWithPasswordRequest
// e.record (could be null)
// and all RequestEvent fields...
onRecordAuthWithOAuth2Request
onRecordAuthWithOAuth2Request
hook is triggered on each Record
OAuth2 sign-in/sign-up API request (after token exchange and before external provider linking).
is not set, then the OAuth2
request will try to create a new auth record.
To assign or link a different existing record model you can
change the
// fires for every auth collection
onRecordAuthWithOAuth2Request
// e.record (could be null)
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordAuthWithOAuth2Request
// e.record (could be null)
// and all RequestEvent fields...
onRecordRequestPasswordResetRequest
onRecordRequestPasswordResetRequest
hook is triggered on
each Record request password reset API request.
Could be used to additionally validate the request data or implement
completely different password reset behavior.
// fires for every auth collection
onRecordRequestPasswordResetRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordRequestPasswordResetRequest
// and all RequestEvent fields...
onRecordConfirmPasswordResetRequest
onRecordConfirmPasswordResetRequest
hook is triggered on
each Record confirm password reset API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
// fires for every auth collection
onRecordConfirmPasswordResetRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordConfirmPasswordResetRequest
// and all RequestEvent fields...
onRecordRequestVerificationRequest
onRecordRequestVerificationRequest
hook is triggered on
each Record request verification API request.
Could be used to additionally validate the loaded request data or implement
completely different verification behavior.
// fires for every auth collection
onRecordRequestVerificationRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordRequestVerificationRequest
// and all RequestEvent fields...
onRecordConfirmVerificationRequest
onRecordConfirmVerificationRequest
hook is triggered on each
Record confirm verification API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
// fires for every auth collection
onRecordConfirmVerificationRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordConfirmVerificationRequest
// and all RequestEvent fields...
onRecordRequestEmailChangeRequest
onRecordRequestEmailChangeRequest
hook is triggered on each
Record request email change API request.
Could be used to additionally validate the request data or implement
completely different request email change behavior.
// fires for every auth collection
onRecordRequestEmailChangeRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordRequestEmailChangeRequest
// and all RequestEvent fields...
onRecordConfirmEmailChangeRequest
onRecordConfirmEmailChangeRequest
hook is triggered on each
Record confirm email change API request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
// fires for every auth collection
onRecordConfirmEmailChangeRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordConfirmEmailChangeRequest
// and all RequestEvent fields...
onRecordRequestOTPRequest
onRecordRequestOTPRequest
hook is triggered on each Record
request OTP API request.
if no user with the requested email is found, allowing
you to manually create a new Record or locate a different Record model (by reassigning
// fires for every auth collection
onRecordRequestOTPRequest
// e.record (could be null)
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordRequestOTPRequest
// e.record (could be null)
// and all RequestEvent fields...
onRecordAuthWithOTPRequest
onRecordAuthWithOTPRequest
hook is triggered on each Record
auth with OTP API request.
// fires for every auth collection
onRecordAuthWithOTPRequest
// and all RequestEvent fields...
// fires only for "users" and "managers" auth collections
onRecordAuthWithOTPRequest
// and all RequestEvent fields...
hook is triggered on each API batch request.
Could be used to additionally validate or modify the submitted batch requests.
This hook will also fire the corresponding
onRecordCreateRequest
onRecordUpdateRequest
onRecordDeleteRequest
is the batch transactional app.
// and all RequestEvent fields...
onFileDownloadRequest
onFileDownloadRequest
hook is triggered before each API File download request.
Could be used to validate or modify the file response before returning it to the client.
onFileDownloadRequest
// and all RequestEvent fields...
hook is triggered on each auth file token API request.
// fires for every auth model
// and all RequestEvent fields...
// fires only for "users"
// and all RequestEvent fields...
Collection request hooks
onCollectionsListRequest
onCollectionsListRequest
hook is triggered on each API Collections list request.
Could be used to validate or modify the response before returning it to the client.
onCollectionsListRequest
// and all RequestEvent fields...
onCollectionViewRequest
onCollectionViewRequest
hook is triggered on each API Collection view request.
Could be used to validate or modify the response before returning it to the client.
onCollectionViewRequest
// and all RequestEvent fields...
onCollectionCreateRequest
onCollectionCreateRequest
hook is triggered on each API Collection create request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
onCollectionCreateRequest
// and all RequestEvent fields...
onCollectionUpdateRequest
onCollectionUpdateRequest
hook is triggered on each API Collection update request.
Could be used to additionally validate the request data or implement
completely different persistence behavior.
onCollectionUpdateRequest
// and all RequestEvent fields...
onCollectionDeleteRequest
onCollectionDeleteRequest
hook is triggered on each API Collection delete request.
Could be used to additionally validate the request data or implement
completely different delete behavior.
onCollectionDeleteRequest
// and all RequestEvent fields...
onCollectionsImportRequest
onCollectionsImportRequest
hook is triggered on each API
collections import request.
Could be used to additionally validate the imported collections or
to implement completely different import behavior.
onCollectionsImportRequest
Settings request hooks
onSettingsListRequest
onSettingsListRequest
hook is triggered on each API Settings list request.
Could be used to validate or modify the response before returning it to the client.
onSettingsListRequest
// and all RequestEvent fields...
onSettingsUpdateRequest
onSettingsUpdateRequest
hook is triggered on each API Settings update request.
Could be used to additionally validate the request data or
implement completely different persistence behavior.
onSettingsUpdateRequest
// and all RequestEvent fields...
The Model hooks are fired for all PocketBase structs that implements the Model DB interface - Record, Collection, Log, etc.
For convenience, if you want to listen to only the Record or Collection DB model
events without doing manual type assertion, you can use the
is called every time when a Model is being validated,
e.g. triggered by
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
// fires only for "users" and "articles" models
Base model create hooks
is triggered every time when a new Model is being created,
e.g. triggered by
Operations BEFORE the
execute before the Model validation
and the INSERT DB statement.
execute after the Model validation
and the INSERT DB statement.
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onModelAfterCreateSuccess
onModelAfterCreateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
// fires only for "users" and "articles" models
is triggered after successful Model validation
and right before the model INSERT DB statement execution.
Usually it is triggered as part of the
in the following firing order:
$app.saveNoValidate()
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onModelAfterCreateSuccess
onModelAfterCreateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
// fires only for "users" and "articles" models
onModelAfterCreateSuccess
onModelAfterCreateSuccess
is triggered after each successful
Model DB create persistence.
Note that when a Model is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
onModelAfterCreateSuccess
// fires only for "users" and "articles" models
onModelAfterCreateSuccess
onModelAfterCreateError
onModelAfterCreateError
is triggered after each failed
Model DB create persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
onModelAfterCreateError
// fires only for "users" and "articles" models
onModelAfterCreateError
Base model update hooks
is triggered every time when a new Model is being updated,
e.g. triggered by
Operations BEFORE the
execute before the Model validation
and the UPDATE DB statement.
execute after the Model validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onModelAfterUpdateSuccess
onModelAfterUpdateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
// fires only for "users" and "articles" models
is triggered after successful Model validation
and right before the model UPDATE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
$app.saveNoValidate()
Note that successful execution doesn't guarantee that the Model
is persisted in the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onModelAfterUpdateSuccess
onModelAfterUpdateError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
// fires only for "users" and "articles" models
onModelAfterUpdateSuccess
onModelAfterUpdateSuccess
is triggered after each successful
Model DB update persistence.
Note that when a Model is persisted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
onModelAfterUpdateSuccess
// fires only for "users" and "articles" models
onModelAfterUpdateSuccess
onModelAfterUpdateError
onModelAfterUpdateError
is triggered after each failed
Model DB update persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
onModelAfterUpdateError
// fires only for "users" and "articles" models
onModelAfterUpdateError
Base model delete hooks
is triggered every time when a new Model is being deleted,
e.g. triggered by
Operations BEFORE the
execute before the Model validation
and the UPDATE DB statement.
execute after the Model validation
and the UPDATE DB statement.
Note that successful execution doesn't guarantee that the Model
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted deleted events, you can
bind to
onModelAfterDeleteSuccess
onModelAfterDeleteError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
// fires only for "users" and "articles" models
is triggered after the internal delete checks and
right before the Model the model DELETE DB statement execution.
Usually it is triggered as part of the
in the following firing order:
internal delete checks
Note that successful execution doesn't guarantee that the Model
is deleted from the database since its wrapping transaction may
not have been committed yet.
If you want to listen to only the actual persisted events, you can
bind to
onModelAfterDeleteSuccess
onModelAfterDeleteError
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
// fires only for "users" and "articles" models
onModelAfterDeleteSuccess
onModelAfterDeleteSuccess
is triggered after each successful
Model DB delete persistence.
Note that when a Model is deleted as part of a transaction,
this hook is delayed and executed only AFTER the transaction has been committed.
This hook is NOT triggered in case the transaction fails/rollbacks.
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
onModelAfterDeleteSuccess
// fires only for "users" and "articles" models
onModelAfterDeleteSuccess
onModelAfterDeleteError
onModelAfterDeleteError
is triggered after each failed
Model DB delete persistence.
Note that the execution of this hook is either immediate or delayed
depending on the error:
on transaction rollback
For convenience, if you want to listen to only the Record or Collection models
events without doing manual type assertion, you can use the equivalent
// fires for every model
onModelAfterDeleteError
// fires only for "users" and "articles" models
onModelAfterDeleteError


--------------------------------------------------------------------------------

[45] Extend with JavaScript - Routing
URL: https://pocketbase.io/docs/js-routing/
Category: hooks
API Endpoint: GET /hello/{name}"
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Routing

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

**API Endpoint:** `GET /hello/{name}"`

## Content

<a href="#routes" class="link-primary"> Routes </a>
<a href="#middlewares" class="link-primary"> Middlewares </a>
<a href="#error-response" class="link-primary"> Error response </a>
<a href="#helpers" class="link-primary"> Helpers </a>
<a href="#sending-request-to-custom-routes-using-the-sdks" class="link-primary"> Sending request to custom routes using the SDKs </a>
<a href="#registering-new-routes" class="link-primary"> Registering new routes </a>
<a href="#path-parameters-and-matching-rules" class="link-primary"> Path parameters and matching rules </a>
<a href="#reading-path-parameters" class="link-primary"> Reading path parameters </a>
<a href="#retrieving-the-current-auth-state" class="link-primary"> Retrieving the current auth state </a>
<a href="#reading-query-parameters" class="link-primary"> Reading query parameters </a>
<a href="#reading-request-headers" class="link-primary"> Reading request headers </a>
<a href="#writing-response-headers" class="link-primary"> Writing response headers </a>
<a href="#retrieving-uploaded-files" class="link-primary"> Retrieving uploaded files </a>
<a href="#reading-request-body" class="link-primary"> Reading request body </a>
<a href="#writing-response-body" class="link-primary"> Writing response body </a>
<a href="#reading-the-client-ip" class="link-primary"> Reading the client IP </a>
<a href="#request-store" class="link-primary"> Request store </a>
<a href="#registering-middlewares" class="link-primary"> Registering middlewares </a>
<a href="#builtin-middlewares" class="link-primary"> Builtin middlewares </a>
<a href="#default-globally-registered-middlewares" class="link-primary"> Default globally registered middlewares </a>
<a href="#serving-static-directory" class="link-primary"> Serving static directory </a>
<a href="#auth-response" class="link-primary"> Auth response </a>
<a href="#enrich-records" class="link-primary"> Enrich record(s) </a>
You can register custom routes and middlewares by using the top-level
<a href="/jsvm/functions/routerAdd.html" target="_blank" rel="noopener noreferrer"><code>routerAdd()</code></a>
and
<a href="/jsvm/functions/routerUse.html" target="_blank" rel="noopener noreferrer"><code>routerUse()</code></a>
functions.
Every route has a path, handler function and eventually middlewares attached to it. For example:
Because PocketBase routing is based on top of the Go standard router mux, we follow the same pattern
matching rules. Below you could find a short overview but for more details please refer to
<a href="https://pkg.go.dev/net/http#ServeMux" target="_blank" rel="noopener noreferrer"><code>net/http.ServeMux</code></a>.
In general, a route pattern looks like <code>[METHOD ][HOST]/[PATH]</code>.
Route paths can include parameters in the format <code>{paramName}</code>.
<br>
You can also use <code>{paramName...}</code> format to specify a parameter that targets more than one path
segment.
A pattern ending with a trailing slash <code data-svelte-h="svelte-3m7v69">/</code> acts as anonymous wildcard and matches any requests
that begins with the defined route. If you want to have a trailing slash but to indicate the end of the
URL then you need to end the path with the special
<code>{$}</code> parameter.
If your route path starts with <code>/api/</code>
consider combining it with your unique app name like <code>/api/myapp/...</code> to avoid collisions
with system routes.
Here are some examples:
In the following examples <code>e</code> is usually
<a href="/jsvm/interfaces/core.RequestEvent.html" target="_blank" rel="noopener noreferrer"><code>core.RequestEvent</code></a> value.
The request auth state can be accessed (or set) via the <code>RequestEvent.auth</code> field.
Alternatively you could also access the request data from the summarized request info instance
<em>(usually used in hooks like the <code>onRecordEnrich</code> where there is no direct access to the request)
</em>.
Body parameters can be read either via
<a href="/jsvm/interfaces/core.RequestEvent.html#bindBody" target="_blank" rel="noopener noreferrer"><code>e.bindBody</code></a>
OR through the parsed request info.
The <code>core.RequestEvent</code> comes with a local store that you can use to share custom data between
<a href="#middlewares">middlewares</a> and the route action.
Middlewares allow inspecting, intercepting and filtering route requests.
<br>
Middlewares can be registered both to a single route (by passing them after the handler) and globally usually
by using <code>routerUse(middleware)</code>.
Here is a minimal example of what a global middleware looks like:
Middleware can be either registered as simple functions (<code>function(e){}</code> ) or if you want
to specify a custom priority and id - as a
<a href="/jsvm/classes/Middleware.html" target="_blank" rel="noopener noreferrer" data-svelte-h="svelte-ed31t2"><code>Middleware</code></a>
class instance.
Below is a slightly more advanced example showing all options and the execution sequence:
The global
<a href="/jsvm/modules/_apis.html" target="_blank" rel="noopener noreferrer"><code>$apis.*</code></a>
object exposes several middlewares that you can use as part of your application.
All PocketBase applications have the below internal middlewares registered out of the box (<em>sorted by their priority</em>):
<br>
PocketBase has a global error handler and every returned or thrown <code>Error</code> from a route or
middleware will be safely converted by default to a generic API error to avoid accidentally leaking
sensitive information (the original error will be visible only in the <em>Dashboard > Logs</em> or when in
<code>--dev</code> mode).
To make it easier returning formatted json error responses, PocketBase provides
<code>ApiError</code> constructor that can be instantiated directly or using the builtin factories.
<br> <code>ApiError.data</code> will be returned in the response only if it is a map of
<code>ValidationError</code> items.
<a href="/jsvm/functions/_apis.static.html" target="_blank" rel="noopener noreferrer"><code>$apis.static()</code></a>
serves static directory content from <code>fs.FS</code> instance.
Expects the route to have a <code>{path...}</code> wildcard parameter.
<a href="/jsvm/functions/_apis.recordAuthResponse.html" target="_blank" rel="noopener noreferrer"><code>$apis.recordAuthResponse()</code></a>
writes standardized JSON record auth response (aka. token + record data) into the specified request body. Could
be used as a return result from a custom auth route.
<a href="/jsvm/functions/_apis.enrichRecord.html" target="_blank" rel="noopener noreferrer"><code>$apis.enrichRecord()</code></a>
and
<a href="/jsvm/functions/_apis.enrichRecords.html" target="_blank" rel="noopener noreferrer"><code>$apis.enrichRecords()</code></a>
helpers parses the request context and enrich the provided record(s) by:
These helpers are also responsible for triggering the <code>onRecordEnrich</code> hook events.
The official PocketBase SDKs expose the internal <code>send()</code> method that could be used to send requests
to your custom route(s).
<strong>WWW redirect</strong> <small class="txt-hint">(id: pbWWWRedirect, priority: -99999)</small> <br> <em>Performs www -> non-www redirect(s) if the request host matches with one of the values in
certificate host policy.</em>
<strong>CORS</strong> <small class="txt-hint">(id: pbCors, priority: -1041)</small> <br> <em>By default all origins are allowed (PocketBase is stateless and doesn't rely on cookies) but this
can be configured with the <code>--origins</code> flag.</em>
<strong>Activity logger</strong> <small class="txt-hint">(id: pbActivityLogger, priority: -1040)</small> <br> <em>Saves request information into the logs auxiliary database.</em>
<strong>Auto panic recover</strong> <small class="txt-hint">(id: pbPanicRecover, priority: -1030)</small> <br> <em>Default panic-recover handler.</em>
<strong>Auth token loader</strong> <small class="txt-hint">(id: pbLoadAuthToken, priority: -1020)</small> <br> <em>Loads the auth token from the <code>Authorization</code> header and populates the related auth
record into the request event (aka. <code>e.auth</code>).</em>
<strong>Security response headers</strong> <small class="txt-hint">(id: pbSecurityHeaders, priority: -1010)</small> <br> <em>Adds default common security headers (<code>X-XSS-Protection</code>,
<code>X-Content-Type-Options</code>,
<code>X-Frame-Options</code>) to the response (can be overwritten by other middlewares or from
inside the route action).</em>
<strong>Rate limit</strong> <small class="txt-hint">(id: pbRateLimit, priority: -1000)</small> <br> <em>Rate limits client requests based on the configured app settings (it does nothing if the rate
limit option is not enabled).</em>
<strong>Body limit</strong> <small class="txt-hint">(id: pbBodyLimit, priority: -990)</small> <br> <em>Applies a default max ~32MB request body limit for all custom routes ( system record routes have
dynamic body size limit based on their collection field types). Can be overwritten on group/route
level by simply rebinding the <code>$apis.bodyLimit(limitBytes)</code> middleware.</em>
expands relations (if <code>defaultExpands</code> and/or <code>?expand</code> query parameter is set)
ensures that the emails of the auth record and its expanded auth relations are visible only for the
current logged superuser, record owner or record with manage access
Collection operations
Collection operations
Sending HTTP requests
You can register custom routes and middlewares by using the top-level
Registering new routes
Every route has a path, handler function and eventually middlewares attached to it. For example:
// register "GET /hello/{name}" route (allowed for everyone)
// register "POST /api/myapp/settings" route (allowed only for authenticated users)
"/api/myapp/settings"
Path parameters and matching rules
Because PocketBase routing is based on top of the Go standard router mux, we follow the same pattern
matching rules. Below you could find a short overview but for more details please refer to
In general, a route pattern looks like
[METHOD ][HOST]/[PATH]
Route paths can include parameters in the format
format to specify a parameter that targets more than one path
segment.
A pattern ending with a trailing slash
acts as anonymous wildcard and matches any requests
that begins with the defined route. If you want to have a trailing slash but to indicate the end of the
URL then you need to end the path with the special
If your route path starts with
consider combining it with your unique app name like
to avoid collisions
with system routes.
Here are some examples:
// match "GET example.com/index.html"
"example.com/index.html"
// match "GET /index.html" (for any host)
// match "GET /static/", "GET /static/a/b/c", etc.
// match "GET /static/", "GET /static/a/b/c", etc.
// (similar to the above but with a named wildcard parameter)
// match only "GET /static/" (if no "/static" is registered, it is 301 redirected)
// match "GET /customers/john", "GET /customers/jane", etc.
In the following examples
Reading path parameters
Retrieving the current auth state
The request auth state can be accessed (or set) via the
// the same as "e.auth?.isSuperuser()"
Alternatively you could also access the request data from the summarized request info instance
(usually used in hooks like the
where there is no direct access to the request)
// the same as "info.auth?.isSuperuser()"
Reading query parameters
// or via the parsed request info
Reading request headers
// or via the parsed request info
// (the header value is always normalized per the @request.headers.* API rules format)
Writing response headers
Retrieving uploaded files
// retrieve the uploaded files and parse the found multipart data into a ready-to-use []*filesystem.File
// or retrieve the raw single multipart/form-data file and header
Body parameters can be read either via
OR through the parsed request info.
// retrieve the entire raw body as string
// read the body fields via the parsed request object
// OR read/scan the request body fields into a typed object
// describe the fields to read (used also as initial values)
// object props are accessible via .get(key)
Writing response body
// send response with JSON body
// (it also provides a generic response fields picker/filter if the "fields" query parameter is set)
// send response with string body
// send response with HTML body
// (check also the "Rendering templates" section)
"https://example.com"
// send response with no body
// serve a single file
// stream the specified reader
"application/octet-stream"
// send response with blob (bytes array) body
"application/octet-stream"
Reading the client IP
// The IP of the last client connecting to your server.
// The returned IP is safe and can be always trusted.
// When behind a reverse proxy (e.g. nginx) this method returns the IP of the proxy.
// (/jsvm/interfaces/core.RequestEvent.html#remoteIP)
// The "real" IP of the client based on the configured Settings.trustedProxy header(s).
// If such headers are not set, it fallbacks to e.remoteIP().
// (/jsvm/interfaces/core.RequestEvent.html#realIP)
comes with a local store that you can use to share custom data between
and the route action.
// store for the duration of the request
Middlewares allow inspecting, intercepting and filtering route requests.
Middlewares can be registered both to a single route (by passing them after the handler) and globally usually
by using
routerUse(middleware)
Registering middlewares
Here is a minimal example of what a global middleware looks like:
// register a global middleware
"Something header value is missing!"
Middleware can be either registered as simple functions (
) or if you want
to specify a custom priority and id - as a
Below is a slightly more advanced example showing all options and the execution sequence:
// attach global middleware
// attach global middleware with a custom priority
// attach middleware to a single route
// "GET /hello" should print the sequence: 2,1,3,4
object exposes several middlewares that you can use as part of your application.
// Require the request client to be unauthenticated (aka. guest).
// Require the request client to be authenticated
// (optionally specify a list of allowed auth collection names, default to any).
// Require the request client to be authenticated as superuser
// (this is an alias for $apis.requireAuth("_superusers")).
// Require the request client to be authenticated as superuser OR
// regular auth record with id matching the specified route parameter (default to "id").
requireSuperuserOrOwnerAuth
// Changes the global 32MB default request body size limit (set it to 0 for no limit).
// Note that system record routes have dynamic body size limit based on their collection field types.
// Compresses the HTTP response using Gzip compression scheme.
// Instructs the activity logger to log only requests that have failed/returned an error.
skipSuccessActivityLog
Default globally registered middlewares
The below list is mostly useful for users that may want to plug their own custom middlewares before/after
the priority of the default global ones, for example: registering a custom auth loader before the rate
limiter with
so that the rate limit can be applied properly based on the loaded auth state.
All PocketBase applications have the below internal middlewares registered out of the box (
sorted by their priority
(id: pbWWWRedirect, priority: -99999)
Performs www -> non-www redirect(s) if the request host matches with one of the values in
certificate host policy.
(id: pbCors, priority: -1041)
By default all origins are allowed (PocketBase is stateless and doesn't rely on cookies) but this
can be configured with the
(id: pbActivityLogger, priority: -1040)
Saves request information into the logs auxiliary database.
(id: pbPanicRecover, priority: -1030)
Default panic-recover handler.
(id: pbLoadAuthToken, priority: -1020)
Loads the auth token from the
header and populates the related auth
record into the request event (aka.
Security response headers
(id: pbSecurityHeaders, priority: -1010)
Adds default common security headers (
X-Content-Type-Options
) to the response (can be overwritten by other middlewares or from
inside the route action).
(id: pbRateLimit, priority: -1000)
Rate limits client requests based on the configured app settings (it does nothing if the rate
limit option is not enabled).
(id: pbBodyLimit, priority: -990)
Applies a default max ~32MB request body limit for all custom routes ( system record routes have
dynamic body size limit based on their collection field types). Can be overwritten on group/route
level by simply rebinding the
$apis.bodyLimit(limitBytes)
PocketBase has a global error handler and every returned or thrown
from a route or
middleware will be safely converted by default to a generic API error to avoid accidentally leaking
sensitive information (the original error will be visible only in the
To make it easier returning formatted json error responses, PocketBase provides
constructor that can be instantiated directly or using the builtin factories.
will be returned in the response only if it is a map of
// construct ApiError with custom status code and validation data error
"something went wrong"
"Invalid or missing title"
// if message is empty string, a default one will be set
Serving static directory
serves static directory content from
Expects the route to have a
// serves static files from the provided dir (if exists)
$apis.recordAuthResponse()
writes standardized JSON record auth response (aka. token + record data) into the specified request body. Could
be used as a return result from a custom auth route.
findFirstRecordByData
// return generic 400 error as a basic enumeration protection
"Invalid credentials"
$apis.enrichRecords()
helpers parses the request context and enrich the provided record(s) by:
expands relations (if
query parameter is set)
ensures that the emails of the auth record and its expanded auth relations are visible only for the
current logged superuser, record owner or record with manage access
These helpers are also responsible for triggering the
// enrich the records with the "categories" relation as default expand
Sending request to custom routes using the SDKs
The official PocketBase SDKs expose the internal
method that could be used to send requests
to your custom route(s).
'http://127.0.0.1:8090'
// for other options check
// https://developer.mozilla.org/en-US/docs/Web/API/fetch#options
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'


--------------------------------------------------------------------------------

[46] Extend with JavaScript - Database
URL: https://pocketbase.io/docs/js-database/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Database

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#executing-queries" class="link-primary"> Executing queries </a>
<a href="#binding-parameters" class="link-primary"> Binding parameters </a>
<a href="#query-builder" class="link-primary"> Query builder </a>
<a href="#transaction" class="link-primary"> Transaction </a>
<a href="#select-andselect-distinct" class="link-primary"> select(), andSelect(), distinct() </a>
<a href="#from" class="link-primary"> from() </a>
<a href="#join" class="link-primary"> join() </a>
<a href="#where-andwhere-orwhere" class="link-primary"> where(), andWhere(), orWhere() </a>
<a href="#orderby-andorderby" class="link-primary"> orderBy(), andOrderBy() </a>
<a href="#groupby-andgroupby" class="link-primary"> groupBy(), andGroupBy() </a>
<a href="#having-andhaving-orhaving" class="link-primary"> having(), andHaving(), orHaving() </a>
<a href="#limit" class="link-primary"> limit() </a>
<a href="#offset" class="link-primary"> offset() </a>
<a href="/jsvm/modules/_app.html" target="_blank"><code>$app</code></a>
is the main interface to interact with your database.
<code>$app.db()</code>
returns a <code>dbx.Builder</code> that can run all kinds of SQL statements, including raw queries.
For more details and examples how to interact with Record and Collection models programmatically
you could also check <a href="/docs/js-collections">Collection operations</a>
and
<a href="/docs/js-records">Record operations</a> sections.
To execute DB queries you can start with the <code>newQuery("...")</code> statement and then call one of:
<code id="execute" class="heading-link "><a href="#execute" class="link-primary"> execute() </a></code>
- for any query statement that is not meant to retrieve data:
<code id="execute-one" class="heading-link "><a href="#execute-one" class="link-primary"> one() </a></code>
- to populate a single row into <code data-svelte-h="svelte-20ff2u">DynamicModel</code> object:
<code id="execute-all" class="heading-link "><a href="#execute-all" class="link-primary"> all() </a></code>
- to populate multiple rows into an array of objects (note that the array must be created with
<code data-svelte-h="svelte-7iuvgu">arrayOf</code>):
To prevent SQL injection attacks, you should use named parameters for any expression value that comes from
user input. This could be done using the named <code>{:paramName}</code>
placeholders in your SQL statement and then define the parameter values for the query with
<code data-svelte-h="svelte-1ixrkyu">bind(params)</code>. For example:
Instead of writing plain SQLs, you can also compose SQL statements programmatically using the db query
builder.
<br>
Every SQL keyword has a corresponding query building method. For example, <code>SELECT</code> corresponds
to <code>select()</code>, <code>FROM</code> corresponds to <code>from()</code>,
<code>WHERE</code> corresponds to <code>where()</code>, and so on.
The <code>select(...cols)</code> method initializes a <code>SELECT</code> query builder. It accepts a list
of the column names to be selected.
<br>
To add additional columns to an existing select query, you can call <code>andSelect()</code>.
<br>
To select distinct rows, you can call <code>distinct(true)</code>.
The <code>from(...tables)</code> method specifies which tables to select from (plain table names are automatically
quoted).
The <code>join(type, table, on)</code> method specifies a <code>JOIN</code> clause. It takes 3 parameters:
For convenience, you can also use the shortcuts <code>innerJoin(table, on)</code>,
<code>leftJoin(table, on)</code>,
<code>rightJoin(table, on)</code> to specify <code>INNER JOIN</code>, <code>LEFT JOIN</code> and
<code>RIGHT JOIN</code>, respectively.
The <code>where(exp)</code> method specifies the <code>WHERE</code> condition of the query.
<br>
You can also use <code>andWhere(exp)</code> or <code>orWhere(exp)</code> to append additional one or more
conditions to an existing <code>WHERE</code> clause.
<br>
Each where condition accepts a single <code>dbx.Expression</code> (see below for full list).
The following <code>dbx.Expression</code> methods are available:
The <code>orderBy(...cols)</code> specifies the <code>ORDER BY</code> clause of the query.
<br>
A column name can contain <em>"ASC"</em> or <em>"DESC"</em> to indicate its ordering direction.
<br>
You can also use <code>andOrderBy(...cols)</code> to append additional columns to an existing
<code>ORDER BY</code> clause.
The <code>groupBy(...cols)</code> specifies the <code>GROUP BY</code> clause of the query.
<br>
You can also use <code>andGroupBy(...cols)</code> to append additional columns to an existing
<code>GROUP BY</code> clause.
The <code>having(exp)</code> specifies the <code>HAVING</code> clause of the query.
<br>
Similarly to
<code>where(exp)</code>, it accept a single <code>dbx.Expression</code> (see all available expressions
listed above).
<br>
You can also use <code>andHaving(exp)</code> or <code>orHaving(exp)</code> to append additional one or
more conditions to an existing <code>HAVING</code> clause.
The <code>limit(number)</code> method specifies the <code>LIMIT</code> clause of the query.
The <code>offset(number)</code> method specifies the <code>OFFSET</code> clause of the query. Usually used
together with <code>limit(number)</code>.
To execute multiple queries in a transaction you can use
<a href="/jsvm/functions/_app.runInTransaction.html" target="_blank" rel="noopener noreferrer"><code>$app.runInTransaction(fn)</code></a>
The DB operations are persisted only if the transaction completes without throwing an error.
It is safe to nest <code>runInTransaction</code> calls as long as you use the callback's
<code>txApp</code> argument.
Inside the transaction function always use its <code>txApp</code> argument and not the original
<code>$app</code> instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
<p><code id="execute" class="heading-link "><a href="#execute" class="link-primary"> execute() </a></code>
- for any query statement that is not meant to retrieve data:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->$app<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">newQuery</span><span class="token punctuation">(</span><span class="token string">"DELETE FROM articles WHERE status = 'archived'"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// throw an error on db failure</span><!-- HTML_TAG_END --></code> </div>
<p><code id="execute-one" class="heading-link "><a href="#execute-one" class="link-primary"> one() </a></code>
- to populate a single row into <code data-svelte-h="svelte-20ff2u">DynamicModel</code> object:</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DynamicModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token comment">// describe the shape of the data (used also as initial values)</span>
<span class="token comment">// the keys cannot start with underscore and must be a valid Go struct field name</span>
<span class="token string-property property">"id"</span><span class="token operator">:</span>     <span class="token string">""</span><span class="token punctuation">,</span>
<span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token string-property property">"age"</span><span class="token operator">:</span>    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// use -0 for a float value</span>
<span class="token string-property property">"roles"</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// serialized json db arrays are decoded as plain arrays</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
$app<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">newQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT id, status, age, roles FROM users WHERE id=1"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// throw an error on db failure or missing row</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>id<span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<p><code id="execute-all" class="heading-link "><a href="#execute-all" class="link-primary"> all() </a></code>
- to populate multiple rows into an array of objects (note that the array must be created with
<code data-svelte-h="svelte-7iuvgu">arrayOf</code>):</p> <div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DynamicModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token comment">// describe the shape of the data (used also as initial values)</span>
<span class="token comment">// the keys cannot start with underscore and must be a valid Go struct field name</span>
<span class="token string-property property">"id"</span><span class="token operator">:</span>     <span class="token string">""</span><span class="token punctuation">,</span>
<span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token string-property property">"age"</span><span class="token operator">:</span>    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// use -0 for a float value</span>
<span class="token string-property property">"roles"</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// serialized json db arrays are decoded as plain arrays</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
$app<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">newQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT id, status, age, roles FROM users LIMIT 100"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// throw an error on db failure</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span><!-- HTML_TAG_END --></code> </div>
<code>type</code> - join type string like <code>INNER JOIN</code>, <code>LEFT JOIN</code>, etc.
<code>table</code> - the name of the table to be joined
<code>on</code> - optional <code>dbx.Expression</code> as an <code>ON</code> clause
<code id="dbx-expraw-optparams" class="heading-link "><a href="#dbx-expraw-optparams" class="link-primary"> $dbx.exp(raw, optParams) </a></code> <br>
Generates an expression with the specified raw query fragment. Use the <code data-svelte-h="svelte-yuyhnj">optParams</code> to bind
parameters to the expression.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START -->$dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"status = 'public'"</span><span class="token punctuation">)</span>
$dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"total > {:min} AND total < {:max}"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-hashexppairs" class="heading-link "><a href="#dbx-hashexppairs" class="link-primary"> $dbx.hashExp(pairs) </a></code> <br>
Generates a hash expression from a map whose keys are DB column names which need to be filtered according
to the corresponding values.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// slug = "example" AND active IS TRUE AND tags in ("tag1", "tag2", "tag3") AND parent IS NULL</span>
$dbx<span class="token punctuation">.</span><span class="token function">hashExp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token literal-property property">slug</span><span class="token operator">:</span>   <span class="token string">"example"</span><span class="token punctuation">,</span>
<span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token literal-property property">tags</span><span class="token operator">:</span>   <span class="token punctuation">[</span><span class="token string">"tag1"</span><span class="token punctuation">,</span> <span class="token string">"tag2"</span><span class="token punctuation">,</span> <span class="token string">"tag3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token literal-property property">parent</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notexp" class="heading-link "><a href="#dbx-notexp" class="link-primary"> $dbx.not(exp) </a></code> <br>
Negates a single expression by wrapping it with <code data-svelte-h="svelte-dkbc98">NOT()</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// NOT(status = 1)</span>
$dbx<span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span>$dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"status = 1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-and-exps" class="heading-link "><a href="#dbx-and-exps" class="link-primary"> $dbx.and(...exps) </a></code> <br>
Creates a new expression by concatenating the specified ones with <code data-svelte-h="svelte-12doej9">AND</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// (status = 1 AND username like "%john%")</span>
$dbx<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>$dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"status = 1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> $dbx<span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-or-exps" class="heading-link "><a href="#dbx-or-exps" class="link-primary"> $dbx.or(...exps) </a></code> <br>
Creates a new expression by concatenating the specified ones with <code data-svelte-h="svelte-1dtrn8t">OR</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// (status = 1 OR username like "%john%")</span>
$dbx<span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>$dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"status = 1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> $dbx<span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-incol-values" class="heading-link "><a href="#dbx-incol-values" class="link-primary"> $dbx.in(col, ...values) </a></code> <br>
Generates an <code data-svelte-h="svelte-1afmjj7">IN</code> expression for the specified column and the list of allowed values.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// status IN ("public", "reviewed")</span>
$dbx<span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token string">"public"</span><span class="token punctuation">,</span> <span class="token string">"reviewed"</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notincol-values" class="heading-link "><a href="#dbx-notincol-values" class="link-primary"> $dbx.notIn(col, ...values) </a></code> <br>
Generates an <code data-svelte-h="svelte-473alg">NOT IN</code> expression for the specified column and the list of allowed values.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// status NOT IN ("public", "reviewed")</span>
$dbx<span class="token punctuation">.</span><span class="token function">notIn</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token string">"public"</span><span class="token punctuation">,</span> <span class="token string">"reviewed"</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-likecol-values" class="heading-link "><a href="#dbx-likecol-values" class="link-primary"> $dbx.like(col, ...values) </a></code> <br>
Generates a <code data-svelte-h="svelte-1v6lktz">LIKE</code> expression for the specified column and the possible strings that the
column should be like. If multiple values are present, the column should be like
<strong data-svelte-h="svelte-pckt2v">all</strong> of them.
<br>
By default, each value will be surrounded by <em data-svelte-h="svelte-1e5kqvl">"%"</em> to enable partial matching. Special
characters like <em data-svelte-h="svelte-1e5kqvl">"%"</em>, <em data-svelte-h="svelte-19yseh6">"\"</em>, <em data-svelte-h="svelte-1aejt4n">"_"</em> will also be properly escaped. You may call
<code data-svelte-h="svelte-1x7blap">escape(...pairs)</code> and/or <code data-svelte-h="svelte-s2x8rn">match(left, right)</code> to change the default behavior.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name LIKE "%test1%" AND name LIKE "%test2%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name LIKE "test1%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notlikecol-values" class="heading-link "><a href="#dbx-notlikecol-values" class="link-primary"> $dbx.notLike(col, ...values) </a></code> <br>
Generates a <code data-svelte-h="svelte-1dawmxs">NOT LIKE</code> expression in similar manner as <code data-svelte-h="svelte-1edh5e4">like()</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name NOT LIKE "%test1%" AND name NOT LIKE "%test2%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">notLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name NOT LIKE "test1%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">notLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-orlikecol-values" class="heading-link "><a href="#dbx-orlikecol-values" class="link-primary"> $dbx.orLike(col, ...values) </a></code> <br>
This is similar to <code data-svelte-h="svelte-1edh5e4">like()</code> except that the column must be one of the provided values, aka.
multiple values are concatenated with <code data-svelte-h="svelte-1dtrn8t">OR</code> instead of <code data-svelte-h="svelte-12doej9">AND</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name LIKE "%test1%" OR name LIKE "%test2%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">orLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name LIKE "test1%" OR name LIKE "test2%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">orLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-ornotlikecol-values" class="heading-link "><a href="#dbx-ornotlikecol-values" class="link-primary"> $dbx.orNotLike(col, ...values) </a></code> <br>
This is similar to <code data-svelte-h="svelte-1n219vl">notLike()</code> except that the column must not be one of the provided
values, aka. multiple values are concatenated with <code data-svelte-h="svelte-1dtrn8t">OR</code> instead of <code data-svelte-h="svelte-12doej9">AND</code>.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// name NOT LIKE "%test1%" OR name NOT LIKE "%test2%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">orNotLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span>
<span class="token comment">// name NOT LIKE "test1%" OR name NOT LIKE "test2%"</span>
$dbx<span class="token punctuation">.</span><span class="token function">orNotLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"test2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-existsexp" class="heading-link "><a href="#dbx-existsexp" class="link-primary"> $dbx.exists(exp) </a></code> <br>
Prefix with <code data-svelte-h="svelte-1c5kcl8">EXISTS</code> the specified expression (usually a subquery).
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// EXISTS (SELECT 1 FROM users WHERE status = 'active')</span>
$dbx<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"SELECT 1 FROM users WHERE status = 'active'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notexistsexp" class="heading-link "><a href="#dbx-notexistsexp" class="link-primary"> $dbx.notExists(exp) </a></code> <br>
Prefix with <code data-svelte-h="svelte-10qzrq7">NOT EXISTS</code> the specified expression (usually a subquery).
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// NOT EXISTS (SELECT 1 FROM users WHERE status = 'active')</span>
$dbx<span class="token punctuation">.</span><span class="token function">notExists</span><span class="token punctuation">(</span>dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"SELECT 1 FROM users WHERE status = 'active'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-betweencol-from-to" class="heading-link "><a href="#dbx-betweencol-from-to" class="link-primary"> $dbx.between(col, from, to) </a></code> <br>
Generates a <code data-svelte-h="svelte-o8g806">BETWEEN</code> expression with the specified range.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// age BETWEEN 3 and 99</span>
$dbx<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
<code id="dbx-notbetweencol-from-to" class="heading-link "><a href="#dbx-notbetweencol-from-to" class="link-primary"> $dbx.notBetween(col, from, to) </a></code> <br>
Generates a <code data-svelte-h="svelte-1i7pgkh">NOT BETWEEN</code> expression with the specified range.
<div class="code-wrapper m-b-sm prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// age NOT BETWEEN 3 and 99</span>
$dbx<span class="token punctuation">.</span><span class="token function">notBetween</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code> </div>
Collection operations
Collection operations
Sending HTTP requests
is the main interface to interact with your database.
that can run all kinds of SQL statements, including raw queries.
For more details and examples how to interact with Record and Collection models programmatically
you could also check
Collection operations
To execute DB queries you can start with the
statement and then call one of:
- for any query statement that is not meant to retrieve data:
"DELETE FROM articles WHERE status = 'archived'"
// throw an error on db failure
- to populate a single row into
// describe the shape of the data (used also as initial values)
// the keys cannot start with underscore and must be a valid Go struct field name
// use -0 for a float value
// serialized json db arrays are decoded as plain arrays
"SELECT id, status, age, roles FROM users WHERE id=1"
// throw an error on db failure or missing row
- to populate multiple rows into an array of objects (note that the array must be created with
// describe the shape of the data (used also as initial values)
// the keys cannot start with underscore and must be a valid Go struct field name
// use -0 for a float value
// serialized json db arrays are decoded as plain arrays
"SELECT id, status, age, roles FROM users LIMIT 100"
// throw an error on db failure
To prevent SQL injection attacks, you should use named parameters for any expression value that comes from
user input. This could be done using the named
placeholders in your SQL statement and then define the parameter values for the query with
"SELECT name, created FROM posts WHERE created >= {:from} and created <= {:to}"
"2023-06-25 00:00:00.000Z"
"2023-06-28 23:59:59.999Z"
Instead of writing plain SQLs, you can also compose SQL statements programmatically using the db query
builder.
Every SQL keyword has a corresponding query building method. For example,
select(), andSelect(), distinct()
query builder. It accepts a list
of the column names to be selected.
To add additional columns to an existing select query, you can call
To select distinct rows, you can call
"(firstName || ' ' || lastName) as fullName"
method specifies which tables to select from (plain table names are automatically
quoted).
join(type, table, on)
clause. It takes 3 parameters:
- join type string like
- the name of the table to be joined
For convenience, you can also use the shortcuts
"profiles.user_id = users.id"
"department.id = {:id}"
where(), andWhere(), orWhere()
condition of the query.
to append additional one or more
conditions to an existing
Each where condition accepts a single
(see below for full list).
/*
SELECT users.*
FROM users
WHERE id = "someId" AND
status = "public" AND
name like "%john%" OR
role = "manager" AND
fullTime IS TRUE AND
experience > 10
*/
"experience > {:exp}"
methods are available:
$dbx.exp(raw, optParams)
Generates an expression with the specified raw query fragment. Use the
to bind
parameters to the expression.
"total > {:min} AND total < {:max}"
Generates a hash expression from a map whose keys are DB column names which need to be filtered according
to the corresponding values.
// slug = "example" AND active IS TRUE AND tags in ("tag1", "tag2", "tag3") AND parent IS NULL
Negates a single expression by wrapping it with
Creates a new expression by concatenating the specified ones with
// (status = 1 AND username like "%john%")
Creates a new expression by concatenating the specified ones with
// (status = 1 OR username like "%john%")
$dbx.in(col, ...values)
expression for the specified column and the list of allowed values.
// status IN ("public", "reviewed")
$dbx.notIn(col, ...values)
expression for the specified column and the list of allowed values.
// status NOT IN ("public", "reviewed")
$dbx.like(col, ...values)
expression for the specified column and the possible strings that the
column should be like. If multiple values are present, the column should be like
By default, each value will be surrounded by
to enable partial matching. Special
characters like
will also be properly escaped. You may call
to change the default behavior.
// name LIKE "%test1%" AND name LIKE "%test2%"
// name LIKE "test1%"
$dbx.notLike(col, ...values)
expression in similar manner as
// name NOT LIKE "%test1%" AND name NOT LIKE "%test2%"
// name NOT LIKE "test1%"
$dbx.orLike(col, ...values)
except that the column must be one of the provided values, aka.
multiple values are concatenated with
// name LIKE "%test1%" OR name LIKE "%test2%"
// name LIKE "test1%" OR name LIKE "test2%"
$dbx.orNotLike(col, ...values)
except that the column must not be one of the provided
values, aka. multiple values are concatenated with
// name NOT LIKE "%test1%" OR name NOT LIKE "%test2%"
// name NOT LIKE "test1%" OR name NOT LIKE "test2%"
the specified expression (usually a subquery).
// EXISTS (SELECT 1 FROM users WHERE status = 'active')
"SELECT 1 FROM users WHERE status = 'active'"
the specified expression (usually a subquery).
// NOT EXISTS (SELECT 1 FROM users WHERE status = 'active')
"SELECT 1 FROM users WHERE status = 'active'"
$dbx.between(col, from, to)
expression with the specified range.
// age BETWEEN 3 and 99
$dbx.notBetween(col, from, to)
expression with the specified range.
// age NOT BETWEEN 3 and 99
orderBy(), andOrderBy()
A column name can contain
to indicate its ordering direction.
to append additional columns to an existing
groupBy(), andGroupBy()
to append additional columns to an existing
having(), andHaving(), orHaving()
(see all available expressions
listed above).
to append additional one or
more conditions to an existing
"sum(level) > {:sum}"
clause of the query. Usually used
together with
To execute multiple queries in a transaction you can use
$app.runInTransaction(fn)
The DB operations are persisted only if the transaction completes without throwing an error.
calls as long as you use the callback's
Inside the transaction function always use its
argument and not the original
instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
// run a custom raw query (doesn't fire event hooks)
"DELETE FROM articles WHERE status = 'pending'"
Next: Record operations


--------------------------------------------------------------------------------

[47] Extend with JavaScript - Record operations
URL: https://pocketbase.io/docs/js-records/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Record operations

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#set-field-value" class="link-primary"> Set field value </a>
<a href="#get-field-value" class="link-primary"> Get field value </a>
<a href="#auth-accessors" class="link-primary"> Auth accessors </a>
<a href="#copies" class="link-primary"> Copies </a>
<a href="#hideunhide-fields" class="link-primary"> Hide/Unhide fields </a>
<a href="#fetch-records" class="link-primary"> Fetch records </a>
<a href="#create-new-record" class="link-primary"> Create new record </a>
<a href="#update-existing-record" class="link-primary"> Update existing record </a>
<a href="#delete-record" class="link-primary"> Delete record </a>
<a href="#transaction" class="link-primary"> Transaction </a>
<a href="#programmatically-expanding-relations" class="link-primary"> Programmatically expanding relations </a>
<a href="#check-if-record-can-be-accessed" class="link-primary"> Check if record can be accessed </a>
<a href="#generating-and-validating-tokens" class="link-primary"> Generating and validating tokens </a>
<a href="#fetch-single-record" class="link-primary"> Fetch single record </a>
<a href="#fetch-multiple-records" class="link-primary"> Fetch multiple records </a>
<a href="#fetch-auth-records" class="link-primary"> Fetch auth records </a>
<a href="#custom-record-query" class="link-primary"> Custom record query </a>
<a href="#create-new-record-programmatically" class="link-primary"> Create new record programmatically </a>
<a href="#intercept-create-request" class="link-primary"> Intercept create request </a>
<a href="#update-existing-record-programmatically" class="link-primary"> Update existing record programmatically </a>
<a href="#intercept-update-request" class="link-primary"> Intercept update request </a>
The most common task when extending PocketBase probably would be querying and working with your collection
records.
You could find detailed documentation about all the supported Record model methods in
<a href="/jsvm/interfaces/core.Record.html" target="_blank" rel="noopener noreferrer"><code>core.Record</code></a>
type interface but below are some examples with the most common ones.
Collection fields can be marked as "Hidden" from the Dashboard to prevent regular user access to the field
values.
Record models provide an option to further control the fields serialization visibility in addition to the
"Hidden" fields option using the
<a href="/jsvm/interfaces/core.Record.html#hide" target="_blank" rel="noopener noreferrer"><code>record.hide(fieldNames...)</code></a>
and
<a href="/jsvm/interfaces/core.Record.html#unhide" target="_blank" rel="noopener noreferrer"><code>record.unhide(fieldNames...)</code></a>
methods.
Often the <code>hide/unhide</code> methods are used in combination with the <code>onRecordEnrich</code> hook
invoked on every record enriching (list, view, create, update, realtime change, etc.). For example:
For custom fields, not part of the record collection schema, it is required to call explicitly
<code>record.withCustomData(true)</code> to allow them in the public serialization.
All single record retrieval methods throw an error if no record is found.
All multiple records retrieval methods return an empty array if no records are found.
In addition to the above query helpers, you can also create custom Record queries using
<a href="/jsvm/functions/_app.recordQuery.html" target="_blank" rel="noopener noreferrer"><code>$app.recordQuery(collection)</code></a>
method. It returns a SELECT DB builder that can be used with the same methods described in the
<a href="/docs/js-database">Database guide</a>.
For retrieving <strong>multiple</strong> Record models with the <code>all()</code> executor, you can use
<code>arrayOf(new Record)</code>
to create an array placeholder in which to populate the resolved DB result.
To execute multiple queries in a transaction you can use
<a href="/jsvm/functions/_app.runInTransaction.html" target="_blank" rel="noopener noreferrer"><code>$app.runInTransaction(fn)</code></a>
The DB operations are persisted only if the transaction completes without throwing an error.
It is safe to nest <code>runInTransaction</code> calls as long as you use the callback's
<code>txApp</code> argument.
Inside the transaction function always use its <code>txApp</code> argument and not the original
<code>$app</code> instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
To expand record relations programmatically you can use
<a href="/jsvm/functions/_app.expandRecord.html" target="_blank" rel="noopener noreferrer"><code>$app.expandRecord(record, expands, customFetchFunc)</code></a>
for single or
<a href="/jsvm/functions/_app.expandRecords.html" target="_blank" rel="noopener noreferrer"><code>$app.expandRecords(records, expands, customFetchFunc)</code></a>
for multiple records.
Once loaded, you can access the expanded relations via
<a href="/jsvm/interfaces/core.Record.html#expandedOne" target="_blank" rel="noopener noreferrer"><code>record.expandedOne(relName)</code></a>
or
<a href="/jsvm/interfaces/core.Record.html#expandedAll" target="_blank" rel="noopener noreferrer"><code>record.expandedAll(relName)</code> methods.</a>
For example:
To check whether a custom client request or user can access a single record, you can use the
<a href="/jsvm/functions/_app.canAccessRecord.html" target="_blank" rel="noopener noreferrer"><code>$app.canAccessRecord(record, requestInfo, rule)</code></a>
method.
Below is an example of creating a custom route to retrieve a single article and checking if the request
satisfy the View API rule of the record collection:
PocketBase Web APIs are fully stateless (aka. there are no sessions in the traditional sense) and an auth
record is considered authenticated if the submitted request contains a valid
<code>Authorization: TOKEN</code>
header
<em>(see also <a href="/docs/js-routing/#builtin-middlewares">Builtin auth middlewares</a> and
<a href="/docs/js-routing/#retrieving-the-current-auth-state">Retrieving the current auth state from a route</a>
)</em>
If you want to issue and verify manually a record JWT (auth, verification, password reset, etc.), you
could do that using the record token type specific methods:
Each token type has its own secret and the token duration is managed via its type related collection auth
option (<em>the only exception is <code>newStaticAuthToken</code></em>).
To validate a record token you can use the
<a href="/jsvm/functions/_app.findAuthRecordByToken.html" target="_blank" rel="noopener noreferrer"><code>$app.findAuthRecordByToken</code></a>
method. The token related auth record is returned only if the token is not expired and its signature is valid.
Here is an example how to validate an auth token:
Collection operations
Collection operations
Sending HTTP requests
The most common task when extending PocketBase probably would be querying and working with your collection
records.
You could find detailed documentation about all the supported Record model methods in
type interface but below are some examples with the most common ones.
// sets the value of a single record field
// (field type specific modifiers are also supported)
// append to existing value
// populates a record from a data map
// (calls set() for each entry of the map)
// retrieve a single record field value
// (field specific modifiers are also supported)
// -> any (without cast)
// -> cast to float64
// -> cast to types.DateTime
// -> cast to []string
// retrieve the new uploaded files
// (e.g. for inspecting and modifying the file(s) before save)
// unmarshal a single json field value into the provided result
// retrieve a single or multiple expanded data
// export all the public safe record fields in a plain object
// (note: "json" type field values are exported as raw bytes array)
// alias for record.collection().name == "_superusers"
// alias for record.get("email")
// alias for record.set("email", email)
// alias for record.get("verified")
// alias for record.set("verified", false)
// alias for record.get("tokenKey")
// alias for record.set("tokenKey", key)
// alias for record.set("tokenKey:autogenerate", "")
// alias for record.set("password", pass)
// sets cryptographically random 30 characters string as password
// returns a shallow copy of the current record model populated
// with its ORIGINAL db data state and everything else reset to the defaults
// (usually used for comparing old and new field values)
// returns a shallow copy of the current record model populated
// with its LATEST data state and everything else reset to the defaults
// (aka. no expand, no custom fields and with default visibility flags)
// returns a shallow copy of the current record model populated
// with its ALL collection and custom fields data, expand and visibility flags
Collection fields can be marked as "Hidden" from the Dashboard to prevent regular user access to the field
values.
Record models provide an option to further control the fields serialization visibility in addition to the
"Hidden" fields option using the
record.hide(fieldNames...)
record.unhide(fieldNames...)
methods are used in combination with the
hook
invoked on every record enriching (list, view, create, update, realtime change, etc.). For example:
// dynamically show/hide a record field depending on whether the current
// authenticated user has a certain "role" (or any other field constraint)
For custom fields, not part of the record collection schema, it is required to call explicitly
record.withCustomData(true)
to allow them in the public serialization.
All single record retrieval methods throw an error if no record is found.
// retrieve a single "articles" record by its id
// retrieve a single "articles" record by a single key-value pair
findFirstRecordByData
// retrieve a single "articles" record by a string filter expression
// (NB! use "{:placeholder}" to safely bind untrusted user input parameters)
findFirstRecordByFilter
"status = 'public' && category = {:category}"
Fetch multiple records
All multiple records retrieval methods return an empty array if no records are found.
// retrieve multiple "articles" records by their ids
// retrieve the total number of "articles" records in a collection with optional dbx expressions
// retrieve multiple "articles" records with optional dbx expressions
"LOWER(username) = {:username}"
// retrieve multiple paginated "articles" records by a string filter expression
// (NB! use "{:placeholder}" to safely bind untrusted user input parameters)
"status = 'public' && category = {:category}"
// optional filter params
// retrieve a single auth record by its email
findAuthRecordByEmail
// retrieve a single auth record by JWT
// (you could also specify an optional list of accepted token types)
findAuthRecordByToken
In addition to the above query helpers, you can also create custom Record queries using
$app.recordQuery(collection)
method. It returns a SELECT DB builder that can be used with the same methods described in the
Record models with the
executor, you can use
to create an array placeholder in which to populate the resolved DB result.
// the below is identical to
// $app.findRecordsByFilter("articles", "status = 'active'", '-published', 10)
// but allows more advanced use cases and filtering (aggregations, subqueries, etc.)
Create new record programmatically
findCollectionByNameOrId
// field type specific modifiers can also be used
// new files must be one or a slice of filesystem.File values
// note1: see all factories in /jsvm/modules/_filesystem.html
// note2: for reading files from a request event you can also use e.findUploadedFiles("fileKey")
"/local/path/to/file1.txt"
"https://example.com/file3.pdf"
// validate and persist
// (use saveNoValidate to skip fields validation)
Intercept create request
onRecordCreateRequest
// ignore for superusers
// overwrite the submitted "status" field value
// or you can also prevent the create event by returning an error
// guest or not an editor
"Only editors can set a status different from pending"
Update existing record
Update existing record programmatically
// delete existing record files by specifying their file names
// append one or more new files to the already uploaded list
// note1: see all factories in /jsvm/modules/_filesystem.html
// note2: for reading files from a request event you can also use e.findUploadedFiles("fileKey")
"/local/path/to/file1.txt"
"https://example.com/file3.pdf"
// validate and persist
// (use saveNoValidate to skip fields validation)
Intercept update request
onRecordUpdateRequest
// ignore for superusers
// overwrite the submitted "status" field value
// or you can also prevent the update event by returning an error
// guest or not an editor
"Only editors can set a status different from pending"
To execute multiple queries in a transaction you can use
$app.runInTransaction(fn)
The DB operations are persisted only if the transaction completes without throwing an error.
calls as long as you use the callback's
Inside the transaction function always use its
argument and not the original
instance because we allow only a single writer/transaction at a time and it could
result in a deadlock.
To avoid performance issues, try to minimize slow/long running tasks such as sending emails,
connecting to external services, etc. as part of the transaction.
findCollectionByNameOrId
// create new record for each title
Programmatically expanding relations
To expand record relations programmatically you can use
$app.expandRecord(record, expands, customFetchFunc)
$app.expandRecords(records, expands, customFetchFunc)
for multiple records.
Once loaded, you can access the expanded relations via
record.expandedOne(relName)
record.expandedAll(relName)
findFirstRecordByData
// expand the "author" and "categories" relations
// print the expanded records
Check if record can be accessed
To check whether a custom client request or user can access a single record, you can use the
$app.canAccessRecord(record, requestInfo, rule)
Below is an example of creating a custom route to retrieve a single article and checking if the request
satisfy the View API rule of the record collection:
findFirstRecordByData
Generating and validating tokens
PocketBase Web APIs are fully stateless (aka. there are no sessions in the traditional sense) and an auth
record is considered authenticated if the submitted request contains a valid
Builtin auth middlewares
Retrieving the current auth state from a route
If you want to issue and verify manually a record JWT (auth, verification, password reset, etc.), you
could do that using the record token type specific methods:
newPasswordResetToken
// for protected files
// nonrenewable auth token
Each token type has its own secret and the token duration is managed via its type related collection auth
option (
the only exception is
To validate a record token you can use the
$app.findAuthRecordByToken
method. The token related auth record is returned only if the token is not expired and its signature is valid.
Here is an example how to validate an auth token:
findAuthRecordByToken
Next: Collection operations


--------------------------------------------------------------------------------

[48] Extend with JavaScript - Collection operations
URL: https://pocketbase.io/docs/js-collections/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Collection operations

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#fetch-collections" class="link-primary"> Fetch collections </a>
<a href="#field-definitions" class="link-primary"> Field definitions </a>
<a href="#create-new-collection" class="link-primary"> Create new collection </a>
<a href="#update-existing-collection" class="link-primary"> Update existing collection </a>
<a href="#delete-collection" class="link-primary"> Delete collection </a>
<a href="#fetch-single-collection" class="link-primary"> Fetch single collection </a>
<a href="#fetch-multiple-collections" class="link-primary"> Fetch multiple collections </a>
<a href="#custom-collection-query" class="link-primary"> Custom collection query </a>
Collections are usually managed via the Dashboard interface, but there are some situations where you may
want to create or edit a collection programmatically (usually as part of a
<a href="/docs/js-migrations">DB migration</a>). You can find all available Collection related operations
and methods in
<a href="/jsvm/modules/_app.html" target="_blank" rel="noopener noreferrer"><code>$app</code></a>
and
<a href="/jsvm/classes/Collection.html" target="_blank" rel="noopener noreferrer"><code>Collection</code></a>
, but below are listed some of the most common ones:
All single collection retrieval methods throw an error if no collection is found.
All multiple collections retrieval methods return an empty array if no collections are found.
In addition to the above query helpers, you can also create custom Collection queries using
<a href="/jsvm/functions/_app.collectionQuery.html" target="_blank" rel="noopener noreferrer"><code>$app.collectionQuery()</code></a>
method. It returns a SELECT DB builder that can be used with the same methods described in the
<a href="/docs/js-database">Database guide</a>.
All collection fields <em>(with exception of the <code>JSONField</code>)</em> are non-nullable and
use a zero-default for their respective type as fallback value when missing.
<a href="/jsvm/classes/BoolField.html" target="_blank" rel="noopener noreferrer"><code>new BoolField({ ... })</code></a>
<a href="/jsvm/classes/NumberField.html" target="_blank" rel="noopener noreferrer"><code>new NumberField({ ... })</code></a>
<a href="/jsvm/classes/TextField.html" target="_blank" rel="noopener noreferrer"><code>new TextField({ ... })</code></a>
<a href="/jsvm/classes/EmailField.html" target="_blank" rel="noopener noreferrer"><code>new EmailField({ ... })</code></a>
<a href="/jsvm/classes/URLField.html" target="_blank" rel="noopener noreferrer"><code>new URLField({ ... })</code></a>
<a href="/jsvm/classes/EditorField.html" target="_blank" rel="noopener noreferrer"><code>new EditorField({ ... })</code></a>
<a href="/jsvm/classes/DateField.html" target="_blank" rel="noopener noreferrer"><code>new DateField({ ... })</code></a>
<a href="/jsvm/classes/AutodateField.html" target="_blank" rel="noopener noreferrer"><code>new AutodateField({ ... })</code></a>
<a href="/jsvm/classes/SelectField.html" target="_blank" rel="noopener noreferrer"><code>new SelectField({ ... })</code></a>
<a href="/jsvm/classes/FileField.html" target="_blank" rel="noopener noreferrer"><code>new FileField({ ... })</code></a>
<a href="/jsvm/classes/RelationField.html" target="_blank" rel="noopener noreferrer"><code>new RelationField({ ... })</code></a>
<a href="/jsvm/classes/JSONField.html" target="_blank" rel="noopener noreferrer"><code>new JSONField({ ... })</code></a>
<a href="/jsvm/classes/GeoPointField.html" target="_blank" rel="noopener noreferrer"><code>new GeoPointField({ ... })</code></a>
Collection operations
Collection operations
Sending HTTP requests
Collection operations
Collections are usually managed via the Dashboard interface, but there are some situations where you may
want to create or edit a collection programmatically (usually as part of a
). You can find all available Collection related operations
and methods in
, but below are listed some of the most common ones:
Fetch single collection
All single collection retrieval methods throw an error if no collection is found.
findCollectionByNameOrId
Fetch multiple collections
All multiple collections retrieval methods return an empty array if no collections are found.
// only specific types
authAndViewCollections
Custom collection query
In addition to the above query helpers, you can also create custom Collection queries using
$app.collectionQuery()
method. It returns a SELECT DB builder that can be used with the same methods described in the
All collection fields
(with exception of the
are non-nullable and
use a zero-default for their respective type as fallback value when missing.
new BoolField({ ... })
new NumberField({ ... })
new TextField({ ... })
new EmailField({ ... })
new URLField({ ... })
new EditorField({ ... })
new DateField({ ... })
new AutodateField({ ... })
new SelectField({ ... })
new FileField({ ... })
new RelationField({ ... })
new JSONField({ ... })
new GeoPointField({ ... })
Create new collection
// missing default options, system fields like id, email, etc. are initialized automatically
// and will be merged with the provided configuration
// base | auth | view
"@request.auth.id != ''"
"@request.auth.id != ''"
"CREATE UNIQUE INDEX idx_user ON example (user)"
// validate and persist
// (use saveNoValidate to skip fields validation)
Update existing collection
findCollectionByNameOrId
// change the collection name
// add new editor field
// change existing field
// (returns a pointer and direct modifications are allowed without the need of reinsert)
// or: collection.indexes.push("CREATE INDEX idx_example_title ON example (title)")
// validate and persist
// (use saveNoValidate to skip fields validation)
findCollectionByNameOrId
Prev: Record operations


--------------------------------------------------------------------------------

[49] Extend with JavaScript - Migrations
URL: https://pocketbase.io/docs/js-migrations/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Migrations

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#automigrate" class="link-primary"> Automigrate </a>
<a href="#creating-migrations" class="link-primary"> Creating migrations </a>
<a href="#collections-snapshot" class="link-primary"> Collections snapshot </a>
<a href="#migrations-history" class="link-primary"> Migrations history </a>
<a href="#examples" class="link-primary"> Examples </a>
<a href="#migration-file" class="link-primary"> Migration file </a>
<a href="#executing-raw-sql-statements" class="link-primary"> Executing raw SQL statements </a>
<a href="#initialize-default-application-settings" class="link-primary"> Initialize default application settings </a>
<a href="#creating-initial-superuser" class="link-primary"> Creating initial superuser </a>
<a href="#creating-collection-programmatically" class="link-primary"> Creating collection programmatically </a>
PocketBase comes with a builtin DB and data migration utility, allowing you to version your DB structure,
create collections programmatically, initialize default settings and/or run anything that needs to be
executed only once.
The user defined migrations are located in <code>pb_migrations</code> directory (it can be changed using
the
<code>--migrationsDir</code> flag) and each unapplied migration inside it will be executed automatically
in a transaction on <code>serve</code> (or on <code>migrate up</code>).
The generated migrations are safe to be committed to version control and can be shared with your other
team members.
The prebuilt executable has the <code>--automigrate</code> flag enabled by default, meaning that every collection
configuration change from the Dashboard (or Web API) will generate the related migration file automatically
for you.
To create a new blank migration you can run <code>migrate create</code>.
New migrations are applied automatically on <code>serve</code>.
Optionally, you could apply new migrations manually by running <code>migrate up</code>.
<br>
To revert the last applied migration(s), you could run <code>migrate down [number]</code>.
<br> <small class="txt-hint">When manually applying or reverting migrations, the <code>serve</code> process needs to be restarted so
that it can refresh its cached collections state.</small>
Each migration file should have a single <code>migrate(upFunc, downFunc)</code> call.
In the migration file, you are expected to write your "upgrade" code in the <code>upFunc</code> callback.
<br>
The <code>downFunc</code> is optional and it should contain the "downgrade" operations to revert the
changes made by the <code>upFunc</code>.
Both callbacks accept a transactional <code>app</code> instance.
The <code>migrate collections</code> command generates a full snapshot of your current collections
configuration without having to type it manually. Similar to the <code>migrate create</code> command, this
will generate a new migration file in the
<code>pb_migrations</code> directory.
By default the collections snapshot is imported in <em>extend</em> mode, meaning that collections and
fields that don't exist in the snapshot are preserved. If you want the snapshot to <em>delete</em>
missing collections and fields, you can edit the generated file and change the last argument of
<code>importCollections</code>
to <code>true</code>.
All applied migration filenames are stored in the internal <code>_migrations</code> table.
<br>
During local development often you might end up making various collection changes to test different approaches.
<br>
When <code>--automigrate</code> is enabled (<em>which is the default</em>) this could lead in a migration
history with unnecessary intermediate steps that may not be wanted in the final migration history.
To avoid the clutter and to prevent applying the intermediate steps in production, you can remove (or
squash) the unnecessary migration files manually and then update the local migrations history by running:
The above command will remove any entry from the <code>_migrations</code> table that doesn't have a related
migration file associated with it.
<em>For all supported record methods, you can refer to
<a href="/docs/js-records">Record operations</a></em>
<em>For all supported collection methods, you can refer to
<a href="/docs/js-collections">Collection operations</a></em>
Collection operations
Collection operations
Sending HTTP requests
PocketBase comes with a builtin DB and data migration utility, allowing you to version your DB structure,
create collections programmatically, initialize default settings and/or run anything that needs to be
executed only once.
The user defined migrations are located in
directory (it can be changed using
the
flag) and each unapplied migration inside it will be executed automatically
in a transaction on
The generated migrations are safe to be committed to version control and can be shared with your other
team members.
The prebuilt executable has the
flag enabled by default, meaning that every collection
configuration change from the Dashboard (or Web API) will generate the related migration file automatically
for you.
To create a new blank migration you can run
pocketbase migrate create
// pb_migrations/1687801097_your_new_migration.js
// add down queries...
New migrations are applied automatically on
Optionally, you could apply new migrations manually by running
To revert the last applied migration(s), you could run
migrate down [number]
When manually applying or reverting migrations, the
process needs to be restarted so
that it can refresh its cached collections state.
Each migration file should have a single
migrate(upFunc, downFunc)
In the migration file, you are expected to write your "upgrade" code in the
is optional and it should contain the "downgrade" operations to revert the
changes made by the
Both callbacks accept a transactional
command generates a full snapshot of your current collections
configuration without having to type it manually. Similar to the
command, this
will generate a new migration file in the
pocketbase migrate collections
By default the collections snapshot is imported in
mode, meaning that collections and
fields that don't exist in the snapshot are preserved. If you want the snapshot to
missing collections and fields, you can edit the generated file and change the last argument of
All applied migration filenames are stored in the internal
During local development often you might end up making various collection changes to test different approaches.
) this could lead in a migration
history with unnecessary intermediate steps that may not be wanted in the final migration history.
To avoid the clutter and to prevent applying the intermediate steps in production, you can remove (or
squash) the unnecessary migration files manually and then update the local migrations history by running:
pocketbase migrate history
The above command will remove any entry from the
table that doesn't have a related
migration file associated with it.
Executing raw SQL statements
// pb_migrations/1687801090_set_pending_status.js
"UPDATE articles SET status = 'pending' WHERE status = ''"
Initialize default application settings
// pb_migrations/1687801090_initial_settings.js
// for all available settings fields you could check
// /jsvm/interfaces/core.Settings.html
"https://example.com"
Creating initial superuser
For all supported record methods, you can refer to
// pb_migrations/1687801090_initial_superuser.js
findCollectionByNameOrId
// note: the values can be eventually loaded via $os.getenv(key)
// or from a special local config file
// optional revert operation
findAuthRecordByEmail
// silent errors (probably already deleted)
Creating collection programmatically
For all supported collection methods, you can refer to
Collection operations
// migrations/1687801090_create_clients_collection.js
// missing default options, system fields like id, email, etc. are initialized automatically
// and will be merged with the provided configuration
"id = @request.auth.id"
"id = @request.auth.id"
"CREATE INDEX idx_clients_company ON clients (company)"
findCollectionByNameOrId
Prev: Collection operations
Next: Jobs scheduling


--------------------------------------------------------------------------------

[50] Extend with JavaScript - Jobs scheduling
URL: https://pocketbase.io/docs/js-jobs-scheduling/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Jobs scheduling

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

If you have tasks that need to be performed periodically, you could set up crontab-like jobs with
<code>cronAdd(id, expr, handler)</code>.
Each scheduled job runs in its own goroutine as part of the <code>serve</code> command process and must have:
Here is an example:
To remove a single registered cron job you can call <code>cronRemove(id)</code>.
All registered app level cron jobs can be also previewed and triggered from the
<em>Dashboard > Settings > Crons</em> section.
<strong>id</strong> - identifier for the scheduled job; could be used to replace or remove an existing
job
<strong data-svelte-h="svelte-ig66ho">cron expression</strong> - e.g. <code data-svelte-h="svelte-1kxoz48">0 0 * * *</code> (
<em>supports numeric list, steps, ranges or
<span class="link-hint" data-svelte-h="svelte-1b8q6r7">macros</span> </em>)
<strong>handler</strong> - the function that will be executed every time when the job runs
Collection operations
Collection operations
Sending HTTP requests
If you have tasks that need to be performed periodically, you could set up crontab-like jobs with
cronAdd(id, expr, handler)
Each scheduled job runs in its own goroutine as part of the
command process and must have:
- identifier for the scheduled job; could be used to replace or remove an existing
job
supports numeric list, steps, ranges or
- the function that will be executed every time when the job runs
// prints "Hello!" every 2 minutes
To remove a single registered cron job you can call
All registered app level cron jobs can be also previewed and triggered from the
Dashboard > Settings > Crons


--------------------------------------------------------------------------------

[51] Extend with JavaScript - Sending emails
URL: https://pocketbase.io/docs/js-sending-emails/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Sending emails

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#send-custom-email" class="link-primary"> Send custom email </a>
<a href="#overwrite-system-emails" class="link-primary"> Overwrite system emails </a>
PocketBase provides a simple abstraction for sending emails via the
<code>$app.newMailClient()</code> helper.
Depending on your configured mail settings (<em>Dashboard > Settings > Mail settings</em>) it will use the
<code>sendmail</code> command or a SMTP client.
You can send your own custom emails from everywhere within the app (hooks, middlewares, routes, etc.) by
using <code>$app.newMailClient().send(message)</code>. Here is an example of sending a custom email after
user registration:
If you want to overwrite the default system emails for forgotten password, verification, etc., you can
adjust the default templates available from the
<em>Dashboard > Collections > Edit collection > Options</em>
Alternatively, you can also apply individual changes by binding to one of the
<a href="/docs/js-event-hooks/#mailer-hooks">mailer hooks</a>. Here is an example of appending a Record
field value to the subject using the <code>onMailerRecordPasswordResetSend</code> hook:
Collection operations
Collection operations
Sending HTTP requests
PocketBase provides a simple abstraction for sending emails via the
Depending on your configured mail settings (
Dashboard > Settings > Mail settings
command or a SMTP client.
You can send your own custom emails from everywhere within the app (hooks, middlewares, routes, etc.) by
using
$app.newMailClient().send(message)
. Here is an example of sending a custom email after
user registration:
onRecordCreateRequest
// bcc, cc and custom headers are also supported...
Overwrite system emails
If you want to overwrite the default system emails for forgotten password, verification, etc., you can
adjust the default templates available from the
Dashboard > Collections > Edit collection > Options
Alternatively, you can also apply individual changes by binding to one of the
. Here is an example of appending a Record
field value to the subject using the
onMailerRecordPasswordResetSend
onMailerRecordPasswordResetSend
// modify the subject
Prev: Jobs scheduling
Next: Rendering templates


--------------------------------------------------------------------------------

[52] Extend with JavaScript - Rendering templates
URL: https://pocketbase.io/docs/js-rendering-templates/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Rendering templates

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#overview" class="link-primary"> Overview </a>
<a href="#example-html-page-with-layout" class="link-primary"> Example HTML page with layout </a>
A common task when creating custom routes or emails is the need of generating HTML output. To assist with
this, PocketBase provides the global <code>$template</code> helper for parsing and rendering HTML templates.
The general flow when working with composed and nested templates is that you create "base" template(s)
that defines various placeholders using the
<code>{{template "placeholderName" .}}</code> or
<code>{{block "placeholderName" .}}default...{{end}}</code> actions.
Then in the partials, you define the content for those placeholders using the
<code>{{define "placeholderName"}}custom...{{end}}</code> action.
The dot object (<code class="txt-bold">.</code>) in the above represents the data passed to the templates
via the <code>render(data)</code> method.
By default the templates apply contextual (HTML, JS, CSS, URI) auto escaping so the generated template
content should be injection-safe. To render raw/verbatim trusted content in the templates you can use the
builtin <code data-svelte-h="svelte-1s9vl28">raw</code> function (e.g. <code>{{.content|raw}}</code>).
For more information about the template syntax please refer to the
<a href="https://pkg.go.dev/html/template#hdr-A_fuller_picture" target="_blank" rel="noopener noreferrer"><em>html/template</em></a>
and
<a href="https://pkg.go.dev/text/template" target="_blank" rel="noopener noreferrer"><em>text/template</em></a>
package godocs.
<strong>Another great resource is also the Hashicorp's
<a href="https://developer.hashicorp.com/nomad/tutorials/templates/go-template-syntax" target="_blank" rel="noopener noreferrer">Learn Go Template Syntax</a>
tutorial.</strong>
Consider the following app directory structure:
We define the content for <code>layout.html</code> as:
We define the content for <code>hello.html</code> as:
Then to output the final page, we'll register a custom <code>/hello/:name</code> route:
Collection operations
Collection operations
Sending HTTP requests
A common task when creating custom routes or emails is the need of generating HTML output. To assist with
this, PocketBase provides the global
helper for parsing and rendering HTML templates.
The general flow when working with composed and nested templates is that you create "base" template(s)
that defines various placeholders using the
{{template "placeholderName" .}}
{{block "placeholderName" .}}default...{{end}}
Then in the partials, you define the content for those placeholders using the
{{define "placeholderName"}}custom...{{end}}
) in the above represents the data passed to the templates
via the
By default the templates apply contextual (HTML, JS, CSS, URI) auto escaping so the generated template
content should be injection-safe. To render raw/verbatim trusted content in the templates you can use the
builtin
For more information about the template syntax please refer to the
Another great resource is also the Hashicorp's
Learn Go Template Syntax
Example HTML page with layout
Consider the following app directory structure:
myapp/
pb_hooks/
views/
layout.html
hello.html
main.pb.js
pocketbase
We define the content for
{{block "title" .}}Default app title{{end}}
Header...
{{block "body" .}}
Default app body...
{{end}}
Footer...
We define the content for
{{define "title"}}
Page 1
{{end}}
{{define "body"}}
Then to output the final page, we'll register a custom
Next: Console commands


--------------------------------------------------------------------------------

[53] Extend with JavaScript - Console commands
URL: https://pocketbase.io/docs/js-console-commands/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Console commands

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

You can register custom console commands using
<code>app.rootCmd.addCommand(cmd)</code>, where <code>cmd</code> is a
<a href="/jsvm/classes/Command.html" target="_blank" rel="noopener noreferrer">Command</a> instance.
Here is an example:
To run the command you can execute:
Keep in mind that the console commands execute in their own separate app process and run
independently from the main <code>serve</code> command (aka. hook and realtime events between different
processes are not shared with one another).
Collection operations
Collection operations
Sending HTTP requests
You can register custom console commands using
app.rootCmd.addCommand(cmd)
To run the command you can execute:
Keep in mind that the console commands execute in their own separate app process and run
independently from the main
command (aka. hook and realtime events between different
processes are not shared with one another).
Prev: Rendering templates
Next: Sending HTTP requests


--------------------------------------------------------------------------------

[54] Extend with JavaScript - Realtime messaging
URL: https://pocketbase.io/docs/js-realtime/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Realtime messaging

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

By default PocketBase sends realtime events only for Record create/update/delete operations (<em>and for the OAuth2 auth redirect</em>), but you are free to send custom realtime messages to the connected clients via the
<a href="/jsvm/functions/_app.subscriptionsBroker.html" target="_blank" rel="noopener noreferrer"><code>$app.subscriptionsBroker()</code></a> instance.
<a href="/jsvm/interfaces/subscriptions.Broker.html#clients" target="_blank" rel="noopener noreferrer"><code>$app.subscriptionsBroker().clients()</code></a>
returns all connected
<a href="/jsvm/interfaces/subscriptions.Client.html" target="_blank" rel="noopener noreferrer"><code>subscriptions.Client</code></a>
indexed by their unique connection id.
The current auth record associated with a client could be accessed through
<code>client.get("auth")</code>
Note that a single authenticated user could have more than one active realtime connection (aka.
multiple clients). This could happen for example when opening the same app in different tabs,
browsers, devices, etc.
Below you can find a minimal code sample that sends a JSON payload to all clients subscribed to the
"example" topic:
From the client-side, users can listen to the custom subscription topic by doing something like:
Collection operations
Collection operations
Sending HTTP requests
By default PocketBase sends realtime events only for Record create/update/delete operations (
and for the OAuth2 auth redirect
), but you are free to send custom realtime messages to the connected clients via the
returns all connected
indexed by their unique connection id.
The current auth record associated with a client could be accessed through
Note that a single authenticated user could have more than one active realtime connection (aka.
multiple clients). This could happen for example when opening the same app in different tabs,
browsers, devices, etc.
Below you can find a minimal code sample that sends a JSON payload to all clients subscribed to the
"example" topic:
// retrieve all clients (clients id indexed map)
'http://127.0.0.1:8090'
'package:pocketbase/pocketbase.dart'
'http://127.0.0.1:8090'
Prev: Sending HTTP requests


--------------------------------------------------------------------------------

[55] Extend with JavaScript - Filesystem
URL: https://pocketbase.io/docs/js-filesystem/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Filesystem

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#reading-files" class="link-primary"> Reading files </a>
<a href="#saving-files" class="link-primary"> Saving files </a>
<a href="#deleting-files" class="link-primary"> Deleting files </a>
PocketBase comes with a thin abstraction between the local filesystem and S3.
To configure which one will be used you can adjust the storage settings from
<em>Dashboard > Settings > Files storage</em> section.
The filesystem abstraction can be accessed programmatically via the
<a href="/jsvm/functions/_app.newFilesystem.html" target="_blank" rel="noopener noreferrer"><code>$app.newFilesystem()</code></a>
method.
Below are listed some of the most common operations but you can find more details in the
<a href="/jsvm/interfaces/filesystem.System.html" target="_blank" rel="noopener noreferrer"><code>filesystem.System</code></a>
interface.
Always make sure to call <code>close()</code> at the end for both the created filesystem instance and
the retrieved file readers to prevent leaking resources.
To retrieve the file content of a single stored file you can use
<a href="/jsvm/interfaces/filesystem.System.html#getReader" target="_blank" rel="noopener noreferrer"><code>getReader(key)</code></a>
<br>
Note that file keys often contain a <strong>prefix</strong> (aka. the "path" to the file). For record
files the full key is
<code>collectionId/recordId/filename</code>.
<br>
To retrieve multiple files matching a specific <em>prefix</em> you can use
<a href="/jsvm/interfaces/filesystem.System.html#list" target="_blank" rel="noopener noreferrer"><code>list(prefix)</code></a>
The below code shows a minimal example how to retrieve the content of a single record file as string.
There are several methods to save <em>(aka. write/upload)</em> files depending on the available file content
source:
Most users rarely will have to use the above methods directly because for collection records the file
persistence is handled transparently when saving the record model (it will also perform size and MIME type
validation based on the collection <code>file</code> field options). For example:
Files can be deleted from the storage filesystem using
<a href="/jsvm/interfaces/filesystem.System.html#delete" target="_blank" rel="noopener noreferrer"><code>delete(key)</code></a>
Similar to the previous section, most users rarely will have to use the <code>delete</code> file method directly
because for collection records the file deletion is handled transparently when removing the existing filename
from the record model (this also ensures that the db entry referencing the file is also removed). For example:
<a href="/jsvm/interfaces/filesystem.System.html#upload" target="_blank" rel="noopener noreferrer"><code>upload(content, key)</code></a>
<a href="/jsvm/interfaces/filesystem.System.html#uploadFile" target="_blank" rel="noopener noreferrer"><code>uploadFile(file, key)</code></a>
<a href="/jsvm/interfaces/filesystem.System.html#uploadMultipart" target="_blank" rel="noopener noreferrer"><code>uploadMultipart(mfh, key)</code></a>
Collection operations
Collection operations
Sending HTTP requests
PocketBase comes with a thin abstraction between the local filesystem and S3.
To configure which one will be used you can adjust the storage settings from
Dashboard > Settings > Files storage
The filesystem abstraction can be accessed programmatically via the
Below are listed some of the most common operations but you can find more details in the
Always make sure to call
at the end for both the created filesystem instance and
the retrieved file readers to prevent leaking resources.
To retrieve the file content of a single stored file you can use
Note that file keys often contain a
(aka. the "path" to the file). For record
files the full key is
collectionId/recordId/filename
To retrieve multiple files matching a specific
The below code shows a minimal example how to retrieve the content of a single record file as string.
findAuthRecordByEmail
// construct the full file key by concatenating the record storage path with the specific filename
// initialize the filesystem
// retrieve a file reader for the avatar key
// copy as plain string
There are several methods to save
files depending on the available file content
source:
uploadFile(file, key)
uploadMultipart(mfh, key)
Most users rarely will have to use the above methods directly because for collection records the file
persistence is handled transparently when saving the record model (it will also perform size and MIME type
validation based on the collection
field options). For example:
// Other available File factories
// - $filesystem.fileFromBytes(content, name)
// - $filesystem.fileFromURL(url)
// - $filesystem.fileFromMultipart(mfh)
"/local/path/to/file"
// set new file (can be single or array of File values)
// (if the record has an old file it is automatically deleted on successful save)
Files can be deleted from the storage filesystem using
Similar to the previous section, most users rarely will have to use the
file method directly
because for collection records the file deletion is handled transparently when removing the existing filename
from the record model (this also ensures that the db entry referencing the file is also removed). For example:
// if you want to "reset" a file field (aka. deleting the associated single or multiple files)
// you can set it to null
// OR if you just want to remove individual file(s) from a multiple file field you can use the "-" modifier
// (the value could be a single filename string or slice of filename strings)
"example_52iWbGinWd.txt"
Prev: Realtime messaging


--------------------------------------------------------------------------------

[56] Extend with JavaScript - Logging
URL: https://pocketbase.io/docs/js-logging/
Category: hooks
Description: Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

Content:
# Extend with JavaScript - Logging

Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard

## Content

<a href="#logger-methods" class="link-primary"> Logger methods </a>
<a href="#logs-settings" class="link-primary"> Logs settings </a>
<a href="#custom-log-queries" class="link-primary"> Custom log queries </a>
<a href="#intercepting-logs-write" class="link-primary"> Intercepting logs write </a>
<a href="#debugmessage-attrs-" class="link-primary"> debug(message, attrs...) </a>
<a href="#infomessage-attrs-" class="link-primary"> info(message, attrs...) </a>
<a href="#warnmessage-attrs-" class="link-primary"> warn(message, attrs...) </a>
<a href="#errormessage-attrs-" class="link-primary"> error(message, attrs...) </a>
<a href="#withattrs-" class="link-primary"> with(attrs...) </a>
<a href="#withgroupname" class="link-primary"> withGroup(name) </a>
<code>$app.logger()</code> could be used to write any logs into the database so that they can be later
explored from the PocketBase <em>Dashboard > Logs</em> section.
For better performance and to minimize blocking on hot paths, logs are written with debounce and
on batches:
All standard
<a href="/jsvm/interfaces/slog.Logger.html" target="_blank" rel="noopener noreferrer"><code>slog.Logger</code></a>
methods are available but below is a list with some of the most notable ones. Note that attributes are represented
as key-value pair arguments.
<code>with(attrs...)</code> creates a new local logger that will "inject" the specified attributes with each
following log.
<code>withGroup(name)</code> creates a new local logger that wraps all logs attributes under the specified
group name.
You can control various log settings like logs retention period, minimal log level, request IP logging,
etc. from the logs settings panel:
The logs are usually meant to be filtered from the UI but if you want to programmatically retrieve and
filter the stored logs you can make use of the
<a href="/jsvm/functions/_app.logQuery.html" target="_blank" rel="noopener noreferrer"><code>$app.logQuery()</code></a> query builder method. For example:
If you want to modify the log data before persisting in the database or to forward it to an external
system, then you can listen for changes of the <code>_logs</code> table by attaching to the
<a href="/docs/js-event-hooks/#base-model-hooks">base model hooks</a>. For example:
3 seconds after the last debounced log write
when the batch threshold is reached (currently 200)
right before app termination to attempt saving everything from the existing logs queue
Collection operations
Collection operations
Sending HTTP requests
could be used to write any logs into the database so that they can be later
explored from the PocketBase
For better performance and to minimize blocking on hot paths, logs are written with debounce and
on batches:
3 seconds after the last debounced log write
when the batch threshold is reached (currently 200)
right before app termination to attempt saving everything from the existing logs queue
methods are available but below is a list with some of the most notable ones. Note that attributes are represented
as key-value pair arguments.
debug(message, attrs...)
"Debug message with attributes!"
info(message, attrs...)
"Info message with attributes!"
warn(message, attrs...)
"Warning message with attributes!"
error(message, attrs...)
"Error message with attributes!"
creates a new local logger that will "inject" the specified attributes with each
following log.
// results in log with data {"total": 123}
// results in log with data {"total": 123, "name": "john"}
creates a new local logger that wraps all logs attributes under the specified
group name.
// results in log with data {"sub": { "total": 123 }}
You can control various log settings like logs retention period, minimal log level, request IP logging,
etc. from the logs settings panel:
The logs are usually meant to be filtered from the UI but if you want to programmatically retrieve and
filter the stored logs you can make use of the
query builder method. For example:
// see https://pocketbase.io/docs/js-database/#query-builder
// target only debug and info logs
// the data column is serialized json object and could be anything
"json_extract(data, '$.type') = 'request'"
Intercepting logs write
If you want to modify the log data before persisting in the database or to forward it to an external
system, then you can listen for changes of the
table by attaching to the
// print log model fields
Next: Types reference


--------------------------------------------------------------------------------

